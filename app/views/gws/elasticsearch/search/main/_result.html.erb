<% return if @result.blank? %>

<div class="list-head">
  <%= I18n.t('gws/elasticsearch.format.search_results_count', count: @result['hits']['total'], from: @item.from + 1, to: @item.from + @item.size, took: @result['took'] / 1000.0) %>
</div>
<ul class="list-items">
  <% @result['hits']['hits'].each do |hit| %>
    <li class="list-item">
      <div class="info">
        <% source = hit['_source'] %>
        <% title = source['name'] %>
        <% if source.dig('file', 'extname').present? %>
          <% title = "#{title} (#{source.dig('file', 'extname').upcase} #{number_to_human_size(source.dig('file', 'size'))})" %>
        <% end %>
        <%= link_to title, source['url'], class: 'title' %>
        <div class="meta">
          <span class="id"><%= hit['_id'] %></span>
          <span class="datetime"><%= I18n.l(Time.zone.parse(source['updated'])) %></span>
          <% if source['categories'].present? %>
          <span class="categories">
            <% source['categories'].each do |category| %>
              <%= link_to category, gws_board_category_topics_path(category: category), class: 'gws-category-label' %>
            <% end %>
          </span>
          <% end %>
        </div>
      </div>
    </li>
  <% end %>
</ul>
