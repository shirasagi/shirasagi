<nav class="main-navi">
  <h2><%= link_to t('gws/portal.my_portal'), "#{gws_portal_path}/", class: "icon-portal" %></h2>
  <h3><%= link_to t('gws/portal.tabs.user_portal'), gws_portal_user_path(user: @cur_user) %></h3>
  <% @cur_user.groups.in_group(@cur_site).each do |group| %>
    <h3><%= link_to group.trailing_name, gws_portal_group_path(group: group) %></h3>
  <% end %>
  <h3><%= link_to t('gws/portal.tabs.root_portal'), gws_portal_group_path(group: @cur_site) %></h3>

  <h2><%= link_to t('mongoid.models.gws/reminder'), gws_reminders_path, class: "icon-reminder" %></h2>

  <%# if Gws::Schedule::Plan.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/schedule'), gws_schedule_main_path, class: "icon-schedule" %></h2>
    <h3><%= link_to t('gws/schedule.tabs.personal'), gws_schedule_plans_path %></h3>
    <h3><%= link_to t('gws/schedule.tabs.todo'), gws_schedule_todos_path %></h3>
    <h3><%= link_to t('gws/schedule.tabs.facility'), gws_schedule_facilities_path %></h3>
    <h3><%= link_to t('gws/schedule.tabs.search'), gws_schedule_search_path %></h3>
  <%# end %>
  <h2><%= link_to t('modules.gws/memo'), gws_memo_messages_path, class: "icon-conv" %></h2>
  <% if Gws::Board::Post.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/board'), gws_board_topics_path, class: "icon-board" %></h2>
  <% end %>
  <% if [Gws::Faq::Post, Gws::Qna::Post].find { |model| model.allowed?(:read, @cur_user, site: @cur_site) } %>
    <h2><%= link_to t('gws.question_management'), gws_question_management_path, class: "icon-board" %></h2>
    <% if Gws::Faq::Post.allowed?(:read, @cur_user, site: @cur_site) %>
      <h3><%= link_to t('modules.gws/faq'), gws_faq_topics_path %></h3>
    <% end %>
    <% if Gws::Qna::Post.allowed?(:read, @cur_user, site: @cur_site) %>
      <h3><%= link_to t('modules.gws/qna'), gws_qna_topics_path %></h3>
    <% end %>
  <% end %>
  <% if Gws::Report::File.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/report'), gws_report_files_main_path, class: "icon-workflow" %></h2>
    <h3><%= link_to t('gws/report.options.file_state.inbox'), gws_report_files_path(state: 'inbox') %></h3>
    <h3><%= link_to t('gws/report.options.file_state.sent'), gws_report_files_path(state: 'sent') %></h3>
    <h3><%= link_to t('gws/report.options.file_state.closed'), gws_report_files_path(state: 'closed') %></h3>
    <h3><%= link_to t('gws/report.options.file_state.all'), gws_report_files_path(state: 'all') %></h3>
  <% end %>
  <% if Gws::Workflow::File.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/workflow'), gws_workflow_files_main_path, class: "icon-workflow" %></h2>
    <h3><%= link_to t('gws/workflow.options.file_state.approve'), gws_workflow_files_path(state: :approve) %></h3>
    <h3><%= link_to t('gws/workflow.options.file_state.request'), gws_workflow_files_path(state: :request) %></h3>
  <% end %>

  <h2><%= link_to t('modules.gws/circular'), gws_circular_posts_path, class: 'icon-write' %></h2>

  <% if Gws::Monitor::Post.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/monitor'), gws_monitor_topics_path %></h2>
  <% end %>
  <% if Gws::Share::File.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/share'), gws_share_files_path, class: "icon-conv" %></h2>
  <% end %>
  <% if Gws::SharedAddress::Address.allowed?(:read, @cur_user, site: @cur_site) %>
    <h2><%= link_to t('modules.gws/shared_address'), gws_shared_address_addresses_path, class: "icon-conv" %></h2>
  <% end %>

  <h2><%= link_to t('modules.gws/personal_address'), gws_personal_address_addresses_path, class: "icon-conv" %></h2>

  <% if @cur_site.elasticsearch_enabled? && [ Gws::Board::Topic, Gws::Share::File, Gws::Faq::Topic, Gws::Qna::Topic, Gws::Monitor::Topic ].find { |model| model.allowed?(:read, @cur_user, site: @cur_site) } %>
    <h2><%= link_to t('modules.gws/elasticsearch'), gws_elasticsearch_search_main_path, class: "icon-conv" %></h2>
  <% end %>

  <h2><%= link_to t('gws.site_config'), gws_site_path, class: "icon-conf" %></h2>
</nav>
<%# if Gws::StaffRecord::User.allowed?(:read, @cur_user, site: @cur_site) %>
<nav class="mod-navi">
  <h2><%= I18n.t('gws/staff_record.staff_records') %></h2>
  <h3><%= link_to t('gws/staff_record.staff_records'), gws_staff_record_public_records_path, class: "icon-conv" %></h3>
  <h3><%= link_to t('gws/staff_record.divide_duties'), gws_staff_record_public_duties_path, class: "icon-conv" %></h3>
  <h3><%= link_to t('mongoid.models.gws/staff_record/seating'), gws_staff_record_public_seatings_path, class: "icon-conv" %></h3>
</nav>
<%# end %>
<%= render partial: 'gws/main/links' %>
