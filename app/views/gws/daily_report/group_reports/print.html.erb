<%= render 'ss/crud/print_preview_head', links: [[ I18n.t('ss.links.back'), { action: :index } ]] %>

<div class="addon-views sheet gws-daily-report-print">
  <div class="addon-view print" id="addon-basic">
    <div class="addon-body print">
      <table class="index">
        <thead>
          <tr>
            <th><%= Gws::User.t(:name) %></th>
            <% if @forms.present? %>
              <% if @model.allowed?(:access, @cur_user, site: @cur_site) %>
                <th class="limited-access"><%= @model.t(:limited_access) %></th>
              <% end %>
              <th><%= @model.t(:small_talk) %></th>
              <% @forms.first.columns.each do |column| %>
                <th><%= column.name %></th>
              <% end %>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <% report = @items.where(user_id: user, form_id: @forms.first.try(:id), daily_report_date: @cur_date.to_date).first %>
            <tr>
              <%= render partial: 'name', locals: { user: user, report: report, print: true } %>
              <%= render partial: 'limited_access', locals: { user: user, report: report, print: true } %>
              <%= render partial: 'small_talk', locals: { user: user, report: report, print: true } %>
              <%= render partial: 'column_values', locals: { user: user, report: report, print: true } %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
