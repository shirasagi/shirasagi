<% addon ||= local_assigns.fetch(:addon, {}) %>
<%= code_editor "##{addon[:id]} .html", mode: :html %>

<dl class="see">
  <dt><%= @model.t :root_group_ids %><%= @model.tt :root_group_ids %></dt>
  <dd>
    <%= f.hidden_field "root_group_ids[]", value: "", id: nil, class: "hidden-ids" %>
    <%= link_to t("ss.apis.groups.index"), cms_apis_groups_path, class: "ajax-box" %>
  </dd>
  <dd>
    <table class="index ajax-selected">
      <thead>
        <tr>
          <th class="name"><%= Cms::Group.t :name %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @item.root_groups.each do |group| %>
          <tr data-id="<%= group.id %>">
            <td><%= f.hidden_field "root_group_ids[]", value: group.id, id: nil %> <%= group.name %></td>
            <td><%= link_to t("ss.buttons.delete"), "#", class: "deselect btn" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </dd>
</dl>
<dl class="see">
  <dt><%= @model.t :exclude_group_ids %><%= @model.tt :exclude_group_ids %></dt>
  <dd>
    <%= f.hidden_field "exclude_group_ids[]", value: "", id: nil, class: "hidden-ids" %>
    <%= link_to t("ss.apis.groups.index"), cms_apis_groups_path, class: "ajax-box" %>
  </dd>
  <dd>
    <table class="index ajax-selected">
      <thead>
        <tr>
          <th class="name"><%= Cms::Group.t :name %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @item.exclude_groups.each do |group| %>
          <tr data-id="<%= group.id %>">
            <td><%= f.hidden_field "exclude_group_ids[]", value: group.id, id: nil %> <%= group.name %></td>
            <td><%= link_to t("ss.buttons.delete"), "#", class: "deselect btn" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </dd>
</dl>
<dl class="see loop-format-liquid" style="margin-top: 20px;">
  <dt class="loop_format"><%= @model.t :loop_format %></dt>
  <dd class="loop_format"><%= f.select :loop_format, @item.loop_format_options, { selected: "liquid" }, { disabled: "disabled" } %></dd>

  <dt><%= @model.t :loop_liquid %><%= @model.tt :loop_liquid %></dt>
  <dd><%= f.text_area :loop_liquid, class: :html, style: "height: 300px;" %></dd>
</dl>
