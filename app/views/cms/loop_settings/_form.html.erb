<dl class="see">
  <dt><%= @model.t :name %><%= @model.tt :name %></dt>
  <dd><%= f.text_field :name %></dd>

  <dt><%= @model.t :description %><%= @model.tt :description %></dt>
  <dd><%= f.text_area :description %></dd>

  <dt><%= @model.t :order %><%= @model.tt :order %></dt>
  <dd><%= f.number_field :order %></dd>

  <dt><%= @model.t :state %><%= @model.tt :state %></dt>
  <dd><%= f.select :state, @item.state_options %></dd>

  <dt><%= @model.t :html_format %><%= @model.tt :html_format %></dt>
  <dd><%= f.select :html_format, @item.html_format_options %></dd>

  <dt><%= @model.t :loop_html_setting_type %><%= @model.tt :loop_html_setting_type %></dt>
  <dd><%= f.select :loop_html_setting_type, @item.loop_html_setting_type_options %></dd>
</dl>

<%= javascript_tag do %>
  SS.ready(function() {
    var $htmlFormat = $("#item_html_format");
    var $typeSelect = $("#item_loop_html_setting_type");
    if ($htmlFormat.length === 0 || $typeSelect.length === 0) {
      return;
    }
    // Turbolinks/Turbo等で複数回評価されても二重bindしない
    if ($htmlFormat.data("loop-setting-form-bound")) {
      return;
    }
    $htmlFormat.data("loop-setting-form-bound", true);

    var sync = function() {
      var isLiquid = ($htmlFormat.val() === "liquid");
      var $snippetOption = $typeSelect.find("option[value='snippet']");
      if ($snippetOption.length) {
        $snippetOption.prop("disabled", !isLiquid);
        // hidden属性は古いブラウザ対策でpropで付与
        $snippetOption.prop("hidden", !isLiquid);
      }
      if (!isLiquid && $typeSelect.val() === "snippet") {
        $typeSelect.val("template");
      }
    };

    $htmlFormat.on("change", sync);
    sync();
  });
<% end %>
