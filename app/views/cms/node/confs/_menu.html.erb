<nav class="nav-menu">
  <% if params[:action] =~ /edit|update|delete|soft_delete|undo_delete|move/ %>
    <%= link_to t('ss.links.back_to_show'), action: :show %>
    <%= link_to t('ss.links.back_to_index'), controller: :nodes %>
  <% else %>
    <%= link_to t('ss.links.edit'), action: :edit if @item.allowed?(:edit, @cur_user)  %>
    <%= link_to t('ss.links.move'), action: :move if @item.allowed?(:move, @cur_user)  %>
    <%= link_to t('ss.links.copy'), :node_copy if @item.allowed?(:edit, @cur_user)  %>

    <% if @item.route == "category/node"|| @item.route == "category/page" %>
      <% if @item.allowed?(:edit, @cur_user) %>
        <%= link_to t('ss.links.split'), split_category_nodes_path %>
        <%= link_to t('ss.links.integrate'), integrate_category_nodes_path %>
      <% end %>
    <% end %>

    <% if @item.allowed?(:edit, @cur_user, site: @cur_site, node: @cur_node) %>
      <% if Cms::Command.allowed?(:use, @cur_user, site: @cur_site, node: @cur_node) %>
        <%= link_to(t('ss.links.command'), { action: :command, id: @item }, class: :command) rescue nil %>
      <% end %>
    <% end %>

    <% if @item.deleted? %>
      <% if @item.allowed?(:delete, @cur_user, site: @cur_site, node: @cur_node) %>
        <%= link_to t('ss.links.restore'), { action: :undo_delete }, class: :undo_delete rescue nil %>
        <%= link_to t('ss.links.delete'), { action: :delete }, class: :delete rescue nil %>
      <% end %>
      <%= link_to t('ss.links.back_to_index'), { controller: :nodes, action: :trash } %>
    <% else %>
      <% if @item.allowed?(:delete, @cur_user, site: @cur_site, node: @cur_node) %>
        <%= link_to t('ss.links.delete'), { action: :soft_delete }, class: :soft_delete rescue nil %>
      <% end %>
      <%= link_to t('ss.links.back_to_index'), controller: :nodes %>
    <% end %>
  <% end %>
</nav>
