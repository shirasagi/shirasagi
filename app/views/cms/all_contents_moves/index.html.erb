<%= jquery do %>
SS_Notice.renderNotice("<%= flash[:notice] %>", { type: "notice" });
<% end %>

<div class="cms-tabs">
  <%= link_to cms_all_contents_download_path do %>
    <span class="tab-name"><%= t("cms.all_content.download_tab") %></span>
  <% end %>
  <%= link_to cms_all_contents_import_path do %>
    <span class="tab-name"><%= t("cms.all_content.import_tab") %></span>
  <% end %>
  <%= link_to cms_all_contents_sampling_path do %>
    <span class="tab-name"><%= t("cms.all_content.sampling_tab") %></span>
  <% end %>
  <%= link_to cms_all_contents_moves_path, class: 'current' do %>
    <span class="tab-name"><%= t("cms.all_content.moves_tab") %></span>
  <% end %>
</div>

<% if @task.running? || @task.ready? %>
  <div class="job-status">
    <% if @task.segment.present? %>
      <p><%= "#{@task.segment}: #{t('cms.all_contents_moves.status.reading_csv')}" %></p>
    <% else %>
      <p><%= t("ss.notice.job_started") %></p>
    <% end %>
    <p><%= link_to t("ss.links.job_log"), job_cms_task_path(id: @task.id), target: "_blank" %></p>
  </div>
<% elsif @execute_task && (@execute_task.running? || @execute_task.ready?) %>
  <div class="job-status">
    <% csv_filename = @execute_task.segment.presence || @task.segment %>
    <% if csv_filename.present? %>
      <p><%= "#{csv_filename}: #{t('cms.all_contents_moves.status.executing')}" %></p>
    <% else %>
      <p><%= t("ss.notice.job_started") %></p>
    <% end %>
    <p><%= link_to t("ss.links.job_log"), job_cms_task_path(id: @execute_task.id), target: "_blank" %></p>
  </div>
<% elsif @check_result %>
  <% if @execute_result %>
    <%= render "execute_result" %>
  <% else %>
    <%= render "check_result" %>
  <% end %>
<% else %>
  <%= render "upload_form" %>
<% end %>

