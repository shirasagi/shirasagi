<%
  if item.is_a?(Cms::TempFile)
    file_path = proc { |item| view_sns_apis_temp_file_path(user: @cur_user.id, id: item) }
    thumb_path = proc { |item| thumb_sns_apis_temp_file_path(user: @cur_user.id, id: item, _: item.updated.to_i) }
  else
    file_path = proc { |item| item.url }
    thumb_path = proc { |item| item.thumb_url }
  end
%>
<div class="file-view" data-file-id="<%= item.id %>" data-humanized-name="<%= item.humanized_name %>">
  <%= link_to file_path.call(item), class: :thumb, target: "_blank" do %>
    <% if item.image? %>
      <img src="<%= thumb_path.call(item) %>" alt="<%= item.basename %>" />
    <% else %>
      <span class="ext icon-<%= item.extname %>"><%= item.extname %></span>
    <% end %>
  <% end %>
  <div class="name">
    <label>
      <%= hidden_field_tag("item[column_values][][in_wrap][file_ids][]", item.id, class: "file-id") %>
      <%= item.name %>
    </label><br />
    <% if params[:file_size] %>
      <span class="file-size"><%= "( #{number_to_human_size(item.size)} )" %></span>
    <% end %>
  </div>

  <div class="action">
    <% content = link_to "#{@item.name} (#{@item.extname.upcase} #{number_to_human_size(@item.size)})", @item.url, class: "icon-#{@item.extname}" %>
    <%= link_to t("sns.file_attach"), "#", class: "action-attach", onclick: "insertContent('#{escape_javascript(content)}'); return false;" %>
    <% if @item.image? %>
      <% content = image_tag @item.url, alt: @item.name %>
      <%= link_to t("sns.image_paste"), "#", class: "action-paste", onclick: "insertContent('#{escape_javascript(content)}'); return false;" %>
      <% content = link_to(@item.url, alt: @item.name, class: "ajax-box") { image_tag(@item.thumb_url, alt: @item.name) } %>
      <%= link_to t("sns.thumb_paste"), "#", class: "action-thumb", onclick: "insertContent('#{escape_javascript(content)}'); return false;" %>
    <% end %>
    <%= link_to t("ss.buttons.delete"), "#", class: "action-delete", onclick: "deleteContent('#{@item.id}'); return false;" %>
  </div>
</div>
