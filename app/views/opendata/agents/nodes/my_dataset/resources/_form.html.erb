<%= coffee do %>
$ ->
  data = <%== @model.formats.inspect %>

  $("#item_format").autocomplete
    source: (request, response) ->
      response(
        $.grep data, (value) ->
          return value.match(new RegExp("^" + request.term, "i"))
      )

  $("#item_in_file").change ->
    filename = $(this).val()
    if filename.match(/\./)
      $("#item_format").val filename.replace(/.*\./, "").toUpperCase()
<% end %>

<dl class="see opendata-dataset-resources">
  <dt><%= @model.t :name %></dt>
  <dd><%= f.text_field :name %></dd>

  <dt><%= @model.t :file_id %></dt>
  <dd><%= f.file_field :in_file %></dd>

  <dt><%= @model.t :text %></dt>
  <dd><%= f.text_area :text %></dd>

  <dt><%= @model.t :format %></dt>
  <dd><%= f.text_field :format, style: "ime-mode: disabled;" %></dd>
</dl>
