<%= jquery do %>
var anchor = $.colorbox.element()
if (anchor.hasClass("ajax-in-box")) {
  anchor = SS_SearchUI.anchorAjaxBox;
}
SS_SearchUI.modal({
  anchor: anchor,
  $el: $("#questions-modal")
});
<% end %>

<div id="questions-modal">
  <div class="cms-guide-tabs">
    <%= link_to guide_apis_procedures_path, class: "ajax-box ajax-in-box" do %>
      <span class="tab-name"><%= "手続き" %></span>
    <% end %>
    <%= link_to guide_apis_questions_path, class: "current", onclick: "return false;" do %>
      <span class="tab-name"><%= "質問" %></span>
    <% end %>
  </div>

  <div class="search-ui-form">
    <% url = @multi ? { action: :index } : { action: :index, single: 1 } %>
    <%= form_for :s, url: url, html: { method: "GET", class: :search } do |f| %>
      <%= f.text_field :name, value: params[:s].try(:[], :name) %>
      <%= f.submit  t("ss.buttons.search"), class: :btn %>
    <% end %>
  </div>

  <table class="index">
    <thead class="list-head">
    <tr>
      <% if @multi %>
        <th class="checkbox"><input type="checkbox" /></th>
      <% end %>
      <th class="name"><%= "質問（別の質問に設定されていないもの）" %></th>
    </tr>
    </thead>
    <tbody class="items">
    <% @items.each do |item| %>
      <tr data-id="<%= item.id %>" data-name="<%= item.name_with_type %>" class="list-item">
        <% if @multi %>
          <td class="checkbox">
            <input type="checkbox" name="ids[]" value="<%= item.id %>" />
          </td>
        <% end %>
        <td><%= link_to item.name, "#", class: @multi ? "select-item" : "select-single-item" %></td>
      </tr>
    <% end %>
    </tbody>
  </table>

  <% if @multi %>
    <div class="search-ui-select">
      <%= button_tag t("ss.links.select"), { type: :button, class: "select-items btn" } %>
    </div>
  <% end %>

  <%= paginate @items if @items.try(:current_page) %>
</div>
