<%= jquery do %>
  $('input.alnum').on({
    focus: function() { $(this).attr('type', 'tel').css('width', '100%'); },
    blur: function() { $(this).attr('type', 'text'); },
    keypress: function(ev) { if (ev.which == 13) { $('#item_password').focus(); return false; } }
  });
<% end %>

<%= render file: '_notices' %>

<article>
  <%= form_tag(action: params[:action]) do %>
    <% if flash[:alert] %>
    <div class="error-message alert alert-warning"><%= flash[:alert] %></div>
    <% end %>

    <%= error_messages_for :item %>
    <%= hidden_field_tag :ref, params[:ref] %>

    <div class="form-group mb-0">
      <label for="item_email" class="bmd-label-floating"><%== t("ss.views.login/login.id") %></label>
      <%= text_field :item, :email, class: "form-control", autofocus: true %>
    </div>

    <div class="form-group mb-4">
      <label for="item_password" class="bmd-label-floating"><%= t("ss.views.login/login.password") %></label>
      <%= password_field :item, :password, class: "form-control" %>
    </div>

    <footer class="send">
      <%= submit_tag t("ss.login"), class: "btn btn-outline-primary btn-lg w-100" %>
    </footer>
  <% end %>

  <% sso = Sys::Auth::Base.where(state: "enabled").order_by(order: 1).to_a %>
  <% if sso.present? %>
    <ul class="sso">
      <% sso.each do |sso| %>
      <% sso = sso.becomes_with_model %>
      <li class="<%= sso.filename %>">
        <%= link_to(sso.url(params.slice(:ref)), class: "btn-default") do %>
          <h2 class="name"><%= sso.name %></h2>
          <p class="text"><%= br sso.text %></p>
        <% end %>
      </li>
      <% end %>
    </ul>
  <% end %>
</article>