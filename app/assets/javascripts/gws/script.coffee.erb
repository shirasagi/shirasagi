//= require moment
//= require sprintf
//= require fullcalendar
//= require fullcalendar/gcal
//= require fullcalendar/lang/ja
//= require fullcalendar-scheduler/scheduler.min.js
//= require tinyColorPicker/jqColorPicker.min.js
//= require gws/lib/popup
//= require gws/lib/member
//= require gws/lib/reminder
//= require gws/schedule/lib/view
//= require gws/schedule/lib/calendar
//= require gws/schedule/lib/calendar_basic_hour_view
//= require gws/schedule/lib/calendar_list_month_view
//= require gws/schedule/lib/multiple_calendar
//= require gws/schedule/lib/plan
//= require gws/schedule/lib/repeat_plan

$ ->
  # external link
  $('a[href^=http]').not('[href*="'+location.hostname+'"]').attr({ target: '_blank' })

  # tabs
  path = location.pathname + "/"
  $(".gws-schedule-tabs a").each ->
    menu = $(this)
    menu.addClass("current") if path.match(new RegExp('^' + menu.attr('href') + '(\/|$)'))

  Gws_Member.render()

class @Gws
  @renderColorPicker: (opts = {})->
    sel = opts['selector'] || '#item_color'
    $(sel).colorPicker().data('colorMode', 'HEX')

    if opts['clear']
      btn = $("<input type='button' class='btn' value='<%= I18n.t('views.button.clear') %>' />").uniqueId()
      $(sel).after(btn).after(' ')
      $('#' + btn.attr('id')).click ->
        $(sel).val('#FFFFFF')
        $(sel).colorPicker({ doRender: true }).data('colorMode', 'HEX')
        $(sel).val('')

