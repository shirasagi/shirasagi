function Gws_Share_FolderToolbar(e,o){this.$el=$(e),this.options=o,this.render()}Gws_Share_FolderToolbar.prototype.render=function(){var e=this;this.$el.find(".btn-create-folder").on("click",function(){e.createFolder($(this))}),this.$el.find(".btn-create-root-folder").on("click",function(){e.createFolder($(this))}),this.$el.find(".btn-rename-folder").on("click",function(){e.renameFolder($(this),{success:{callback:e.refresh}})}),this.$el.find(".btn-delete-folder").on("click",function(){e.deleteFolder($(this))}),this.$el.find(".btn-edit-folder").on("click",function(){e.editFolder($(this))}),this.$el.find(".btn-refresh-folder").on("click",function(){e.refreshFolder()})},Gws_Share_FolderToolbar.prototype.createFolder=function(e,o){var r=e.data("href");if(r)location.href=r;else{var t=e.data("api");if(t){var l=e.data("success");!l&&o&&(l=o.success);var a=e.data("error");!a&&o&&(a=o.error);var i=this;$.colorbox({href:t,open:!0,fixed:!0,"with":"90%",height:"90%",onComplete:function(){SS.ajaxForm("#cboxLoadedContent form",{success:function(e){var o;if($.colorbox.close(),l&&l.redirect_to)return e&&((o=e.id)||(o=e._id)),void(location.href=l.redirect_to.replace(/:id/,o));l&&l.reload?location.reload():l&&l.callback&&l.callback.call(i,e)},error:function(e){$.colorbox.close(),e.responseJSON&&0<e.responseJSON.length?alert(e.responseJSON.join("\n")):a&&a.message&&alert(a.message)}})}})}}},Gws_Share_FolderToolbar.prototype.refresh=function(e){e&&(this.$el.find(".folder-name").text(e.name),this.refreshFolder())},Gws_Share_FolderToolbar.prototype.renameFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.deleteFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.editFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.refreshFolder=function(){this.options.treeNavi&&this.options.treeNavi.refresh()};