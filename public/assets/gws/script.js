function sprintf(){var t=sprintf.arguments,e=t.length;if(0==e)return"";for(var i,n,s,r,o="",a=t[0],l=a.length,d=1,h=i=0,c=0;c<l;c++){var u=a.charAt(c);switch(h){case 0:"%"==u?(u,h=1,r=""):o+=u;break;case 1:if("%"==u){o+=u,h=0;break}switch(e<=d&&(t[e++]=""),n=0,s=-1,u){case"-":i|=1,h=1;break;case"+":i|=2,h=1;break;case"0":i|=4,h=2;break;case" ":i|=8,h=1;break;case"#":i|=16,h=1;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=parseInt(u),h=2;break;case"-":i=1,h=2;break;case".":n="",s=0,h=3;break;case"d":o+=toInteger(t[d],i,n,s),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":o+=t[d],d++,h=0;break;default:o+=r+u,h=0}break;case 2:switch(u){case".":s=0,h=3;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=10*n+parseInt(u),h=2;break;case"d":o+=toInteger(t[d],i,n,s),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":o+=toFormatString(t[d],n,s),d++,h=0;break;default:o+=r+u,h=0}break;case 3:switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=10*s+parseInt(u);break;case"d":o+=toInteger(t[d],i,n,s),d++,h=0;break;case"f":o+=toFloatingPoint(t[d],i,n,s),d++,h=0;break;case"e":o+=toExponential(t[d],i,n,s,"e"),d++,h=0;break;case"E":o+=toExponential(t[d],i,n,s,"E"),d++,h=0;break;case"s":o+=toFormatString(t[d],n,s),d++,h=0;break;default:o+=r+u,h=0}break;default:return"error"}h&&(r+=u)}return o}function toInteger(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var s=t.toString();if(-1<t&&t<1)s="0";else{t<0&&(s=s.substring(1));var r=s.indexOf("e");if(-1!=r){var o=parseInt(s.substring(r+2));for(-1==(a=s.indexOf("."))?(s=s.substring(0,r)+"000000000000000000000",o-=21):o-=(s=s.substring(0,a)+s.substring(a+1,r)+"00000").length-a;o;o--)s+="0"}else{var a;-1!=(a=s.indexOf("."))&&(s=s.substring(0,a))}}var l=s.length;if(l<n){for(var d="0",h=n-l;h;h--)s=d+s;l=n}return ProcFlag(s,e,i-l,0<=t)}function toFloatingPoint(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var s=0<=t;return s||(t=-t),str=toFloatingPoint2(t,e,n),ProcFlag(str,e,i-str.length,s)}function toFloatingPoint2(t,e,i){var n=t.toString(),s=n.indexOf("e");if(-1!=s){var r=parseInt(n.substring(s+1));if(0<r){for(-1==(l=n.indexOf("."))?(n=n.substring(0,s)+"000000000000000000000",r-=21):r-=(n=n.charAt(0)+n.substring(2,s)+"00000").length-1;r;r--)n+="0"}else{var o=r+i;if(o<-1)n="0";else if(0<=o){for(-1!=(l=(n=n.substring(0,s)).indexOf("."))&&(n=n.charAt(0)+n.substring(2,s)),n="000000"+n,r+=7;r;r++)n="0"+n;n="0."+n}else{if(5<(h=parseFloat(n.substring(0,s)))){n="0.00000";for(var a=r+7;a;a++)n+="0";n+="1"}else n="0"}}}var l,d=n.length;if(-1!=(l=n.indexOf("."))){var h,c=d-l-1;if(i<c)if(5<(h=parseFloat(n.charAt(l+i+1)+"."+n.substring(l+i+2))))if(t<1){for(a=2;"0"==n.charAt(a);)a++;n=(h=(parseInt(n.substring(a,i+2))+1).toString()).length>i+2-a?2==a?"1."+h.substring(1):n.substring(0,a-1)+h:n.substring(0,a)+h}else n=(h=(parseInt(n.substring(0,l)+n.substring(l+1,l+i+1))+1).toString()).length>l+i?h.substring(0,l+1)+"."+h.substring(l+1):h.substring(0,l)+"."+h.substring(l);else n=n.substring(0,i?l+i+1:l);else if(c<i)for(a=i-c;a;a--)n+="0"}else if(i){n+=".0";for(a=i-1;a;a--)n+="0"}return n}function toExponential(t,e,i,n,s){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var r=0<=t;r||(t=-t);var o,a=t.toString(),l=a.indexOf("."),d=a.indexOf("e"),h=((-1!=d)<<1)+(-1!=l);if(0==h)(o=a.length-1)&&(a=a.charAt(0)+"."+a.substring(l=1));else if(1==h)if(10<t)o=l-1,a=a.substring(0,1)+"."+a.substring(1,l)+a.substring(l+1),l=1;else if(1<t)o=0;else{for(var c=2;;c++)if("0"!=a.charAt(c)){o=1-c,a=a.charAt(c)+"."+a.substring(c+1);break}l=1}else o=parseInt(a.substring(d+1)),a=a.substring(0,d);return a=toFloatingPoint2(parseFloat(a),e,n),a=ProcFlag(a+=0<=o?s+(o<10?"+0":"+")+o:s+(-10<o?"-0"+-o:o),e,i-a.length,r)}function toFormatString(t,e,i){"string"!=typeof t&&(t=t.toString());var n=t.length;if(0<=i&&i<n&&(t=t.substring(0,i),n=i),n<e)for(var s=" ",r=e-n;r;r--)t=s+t;return t}function ProcFlag(t,e,i,n){var s=1&e,r=2&e,o=8&e;if(o&&i--,i-=0<!n+r,0<(4&e)&&!s){if(0<i)for(var a="0",l=i;l;l--)t=a+t;n?r&&(t="+"+t):t="-"+t}else{n?r&&(t="+"+t):t="-"+t;a=" ";if(0<i){a=" ";if(s)for(l=i;l;l--)t+=a;else for(l=i;l;l--)t=a+t}}return o&&(t=" "+t),t}function Gws_Category_Navi(t){this.el=$(t)}function Gws_Tab(){}function Gws_Bookmark(){this.bookmarkId=null,this.defaultName=null,this.url=null,this.model=null,this.el=$(".gws-bookmark"),this.bookmarkIcon="&#xE838;",this.unbookmarkIcon="&#xE83A;",this.loading=!1}function Gws_ReadableSetting(t){this.el=$(t)}function Gws_Contrast(t){this.opts=t,this.$el=$("#user-contrast-menu"),this.template="body * { color: :color !important; border-color: :color !important; background: :background !important; }",this.render()}function Gws_Schedule_CalendarTransition(t){t&&(this.state=$.param({calendar:t}))}function Gws_Schedule_Integration(){}function Gws_Schedule_Csv(t){this.$el=$(t),this.$importMode=this.$el.find("#import_mode"),this.$importLog=this.$el.find(".import-log")}function Gws_Memo_Folder(){}function Gws_Memo_Filter(){}function Gws_Portal(t,e){var i={autogenerate_stylesheet:!0,resize:{enabled:!0,max_size:[4,10]},widget_base_dimensions:["auto",120],widget_margins:[10,10],min_cols:1,max_cols:4};e&&e.readonly&&(this.readonly=!0,i.resize={enabled:!1},i.draggable={enabled:!1,handle:"disable"}),this.el=$(t),this.gs=this.el.find("ul.portlets").gridster(i).data("gridster")}function Gws_Share_FolderToolbar(t,e){this.$el=$(t),this.options=e,this.render()}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function d(){return Tn.apply(null,arguments)}function t(t){Tn=t}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function r(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function i(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var i in e)c(e,i)&&(t[i]=e[i]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,i,n){return Ce(t,e,i,n,!0).utc()}function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=e()),t._pf}function g(t){if(null==t._isValid){var e=f(t),i=kn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function n(t){var e=p(NaN);return null!=t?u(f(e),t):f(e).userInvalidated=!0,e}function m(t,e){var i,n,s;if(r(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),r(e._i)||(t._i=e._i),r(e._f)||(t._f=e._f),r(e._l)||(t._l=e._l),r(e._strict)||(t._strict=e._strict),r(e._tzm)||(t._tzm=e._tzm),r(e._isUTC)||(t._isUTC=e._isUTC),r(e._offset)||(t._offset=e._offset),r(e._pf)||(t._pf=f(e)),r(e._locale)||(t._locale=e._locale),0<Rn.length)for(i=0;i<Rn.length;i++)r(s=e[n=Rn[i]])||(t[n]=s);return t}function v(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Hn&&(Hn=!0,d.updateOffset(this),Hn=!1)}function _(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function y(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=w(e)),i}function b(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;n<s;n++)(i&&t[n]!==e[n]||!i&&y(t[n])!==y(e[n]))&&o++;return o+r}function S(t){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function x(r,o){var a=!0;return u(function(t){if(null!=d.deprecationHandler&&d.deprecationHandler(null,r),a){for(var e,i=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\n["+n+"] ",t)e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];i.push(e)}S(r+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),a=!1}return o.apply(this,arguments)},o)}function C(t,e){null!=d.deprecationHandler&&d.deprecationHandler(t,e),Mn[t]||(S(e),Mn[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t){var e,i;for(i in t)D(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,n=u({},t);for(i in e)c(e,i)&&(a(t[i])&&a(e[i])?(n[i]={},u(n[i],t[i]),u(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)c(t,i)&&!c(e,i)&&a(t[i])&&(n[i]=u({},n[i]));return n}function k(t){null!=t&&this.set(t)}function $(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return D(n)?n.call(e,i):n}function R(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function H(){return this._invalidDate}function M(t){return this._ordinal.replace("%d",t)}function z(t,e,i,n){var s=this._relativeTime[i];return D(s)?s(t,e,i,n):s.replace(/%d/i,t)}function I(t,e){var i=this._relativeTime[0<t?"future":"past"];return D(i)?i(e):i.replace(/%s/i,e)}function F(t,e){var i=t.toLowerCase();Ln[i]=Ln[i+"s"]=Ln[e]=t}function G(t){return"string"==typeof t?Ln[t]||Ln[t.toLowerCase()]:undefined}function P(t){var e,i,n={};for(i in t)c(t,i)&&(e=G(i))&&(n[e]=t[i]);return n}function Y(t,e){On[t]=e}function L(t){var e=[];for(var i in t)e.push({unit:i,priority:On[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function O(t,e,i){var n=""+Math.abs(t),s=e-n.length;return(0<=t?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function A(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(Bn[t]=s),e&&(Bn[e[0]]=function(){return O(s.apply(this,arguments),e[1],e[2])}),i&&(Bn[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function N(n){var t,s,r=n.match(An);for(t=0,s=r.length;t<s;t++)Bn[r[t]]?r[t]=Bn[r[t]]:r[t]=W(r[t]);return function(t){var e,i="";for(e=0;e<s;e++)i+=D(r[e])?r[e].call(t,n):r[e];return i}}function B(t,e){return t.isValid()?(e=V(e,t.localeData()),Nn[e]=Nn[e]||N(e),Nn[e](t)):t.localeData().invalidDate()}function V(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Wn.lastIndex=0;0<=n&&Wn.test(t);)t=t.replace(Wn,i),Wn.lastIndex=0,n-=1;return t}function j(t,e,i){ls[t]=D(e)?e:function(t){return t&&i?i:e}}function q(t,e){return c(ls,t)?ls[t](e._strict,e._locale):new RegExp(U(t))}function U(t){return Z(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}))}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(t,i){var e,n=i;for("string"==typeof t&&(t=[t]),h(i)&&(n=function(t,e){e[i]=y(t)}),e=0;e<t.length;e++)ds[t[e]]=n}function Q(t,s){X(t,function(t,e,i,n){i._w=i._w||{},s(t,i._w,i,n)})}function J(t,e,i){null!=e&&c(ds,t)&&ds[t](e,i._a,i,t)}function K(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(){return tt(this.year())}function it(e,i){return function(t){return null!=t?(st(this,e,t),d.updateOffset(this,i),this):nt(this,e)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function st(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function rt(t){return D(this[t=G(t)])?this[t]():this}function ot(t,e){if("object"==typeof t)for(var i=L(t=P(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(D(this[t=G(t)]))return this[t](e);return this}function at(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=at(e,12);return t+=(e-i)/12,1===i?tt(t)?29:28:31-i%7%2}function dt(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||bs).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone}function ht(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[bs.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(s=ws.call(this._shortMonthsParse,o))?s:null:-1!==(s=ws.call(this._longMonthsParse,o))?s:null:"MMM"===e?-1!==(s=ws.call(this._shortMonthsParse,o))?s:-1!==(s=ws.call(this._longMonthsParse,o))?s:null:-1!==(s=ws.call(this._longMonthsParse,o))?s:-1!==(s=ws.call(this._shortMonthsParse,o))?s:null}function ut(t,e,i){var n,s,r;if(this._monthsParseExact)return ct.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=p([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function pt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=y(e);else if(!h(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(t){return null!=t?(pt(this,t),d.updateOffset(this,!0),this):nt(this,"Month")}function gt(){return lt(this.year(),this.month())}function mt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||_t.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Cs),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(t){return this._monthsParseExact?(c(this,"_monthsRegex")||_t.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ds),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function _t(){function t(t,e){return e.length-t.length}var e,i,n=[],s=[],r=[];for(e=0;e<12;e++)i=p([2e3,e]),n.push(this.monthsShort(i,"")),s.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),s.sort(t),r.sort(t),e=0;e<12;e++)n[e]=Z(n[e]),s[e]=Z(s[e]);for(e=0;e<24;e++)r[e]=Z(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function wt(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);return t<100&&0<=t&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function yt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&0<=t&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,i){var n=7+e-i;return-((7+yt(t,0,n).getUTCDay()-e)%7)+n-1}function St(t,e,i,n,s){var r,o,a=1+7*(e-1)+(7+i-n)%7+bt(t,n,s);return a<=0?o=K(r=t-1)+a:a>K(t)?(r=t+1,o=a-K(t)):(r=t,o=a),{year:r,dayOfYear:o}}function xt(t,e,i){var n,s,r=bt(t.year(),e,i),o=Math.floor((t.dayOfYear()-r-1)/7)+1;return o<1?n=o+Ct(s=t.year()-1,e,i):o>Ct(t.year(),e,i)?(n=o-Ct(t.year(),e,i),s=t.year()+1):(s=t.year(),n=o),{week:n,year:s}}function Ct(t,e,i){var n=bt(t,e,i),s=bt(t+1,e,i);return(K(t)-n+s)/7}function Dt(t){return xt(t,this._week.dow,this._week.doy).week}function Et(){return this._week.dow}function Tt(){return this._week.doy}function kt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function $t(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Rt(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Ht(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Mt(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone}function zt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function It(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ft(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(s=ws.call(this._weekdaysParse,o))?s:null:"ddd"===e?-1!==(s=ws.call(this._shortWeekdaysParse,o))?s:null:-1!==(s=ws.call(this._minWeekdaysParse,o))?s:null:"dddd"===e?-1!==(s=ws.call(this._weekdaysParse,o))?s:-1!==(s=ws.call(this._shortWeekdaysParse,o))?s:-1!==(s=ws.call(this._minWeekdaysParse,o))?s:null:"ddd"===e?-1!==(s=ws.call(this._shortWeekdaysParse,o))?s:-1!==(s=ws.call(this._weekdaysParse,o))?s:-1!==(s=ws.call(this._minWeekdaysParse,o))?s:null:-1!==(s=ws.call(this._minWeekdaysParse,o))?s:-1!==(s=ws.call(this._weekdaysParse,o))?s:-1!==(s=ws.call(this._shortWeekdaysParse,o))?s:null}function Gt(t,e,i){var n,s,r;if(this._weekdaysParseExact)return Ft.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=p([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Pt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Rt(t,this.localeData()),this.add(t-e,"d")):e}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Lt(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e=Ht(t,this.localeData());return this.day(this.day()%7?e:e-7)}function Ot(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Rs),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function At(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Hs),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Wt(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ms),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Nt(){function t(t,e){return e.length-t.length}var e,i,n,s,r,o=[],a=[],l=[],d=[];for(e=0;e<7;e++)i=p([2e3,1]).day(e),n=this.weekdaysMin(i,""),s=this.weekdaysShort(i,""),r=this.weekdays(i,""),o.push(n),a.push(s),l.push(r),d.push(n),d.push(s),d.push(r);for(o.sort(t),a.sort(t),l.sort(t),d.sort(t),e=0;e<7;e++)a[e]=Z(a[e]),l[e]=Z(l[e]),d[e]=Z(d[e]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Bt(){return this.hours()%12||12}function Vt(){return this.hours()||24}function jt(t,e){A(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function qt(t,e){return e._meridiemParse}function Ut(t){return"p"===(t+"").toLowerCase().charAt(0)}function Zt(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"}function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){for(var e,i,n,s,r=0;r<t.length;){for(e=(s=Xt(t[r]).split("-")).length,i=(i=Xt(t[r+1]))?i.split("-"):null;0<e;){if(n=Jt(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&b(s,i,!0)>=e-1)break;e--}r++}return null}function Jt(t){var e=null;if(!Ps[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=zs._abbr,require("./locale/"+t),Kt(e)}catch(i){}return Ps[t]}function Kt(t,e){var i;return t&&(i=r(e)?ie(t):te(t,e))&&(zs=i),zs._abbr}function te(t,e){if(null===e)return delete Ps[t],null;var i=Gs;if(e.abbr=t,null!=Ps[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ps[t]._config;else if(null!=e.parentLocale){if(null==Ps[e.parentLocale])return Ys[e.parentLocale]||(Ys[e.parentLocale]=[]),Ys[e.parentLocale].push({name:t,config:e}),null;i=Ps[e.parentLocale]._config}return Ps[t]=new k(T(i,e)),Ys[t]&&Ys[t].forEach(function(t){te(t.name,t.config)}),Kt(t),Ps[t]}function ee(t,e){if(null!=e){var i,n,s=Gs;null!=(n=Jt(t))&&(s=n._config),(i=new k(e=T(s,e))).parentLocale=Ps[t],Ps[t]=i,Kt(t)}else null!=Ps[t]&&(null!=Ps[t].parentLocale?Ps[t]=Ps[t].parentLocale:null!=Ps[t]&&delete Ps[t]);return Ps[t]}function ie(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return zs;if(!o(t)){if(e=Jt(t))return e;t=[t]}return Qt(t)}function ne(){return $n(Ps)}function se(t){var e,i=t._a;return i&&-2===f(t).overflow&&(e=i[cs]<0||11<i[cs]?cs:i[us]<1||i[us]>lt(i[hs],i[cs])?us:i[ps]<0||24<i[ps]||24===i[ps]&&(0!==i[fs]||0!==i[gs]||0!==i[ms])?ps:i[fs]<0||59<i[fs]?fs:i[gs]<0||59<i[gs]?gs:i[ms]<0||999<i[ms]?ms:-1,f(t)._overflowDayOfYear&&(e<hs||us<e)&&(e=us),f(t)._overflowWeeks&&-1===e&&(e=vs),f(t)._overflowWeekday&&-1===e&&(e=_s),f(t).overflow=e),t}function re(t,e,i){return null!=t?t:null!=e?e:i}function oe(t){var e=new Date(d.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function ae(t){var e,i,n,s,r,o=[];if(!t._d){for(n=oe(t),t._w&&null==t._a[us]&&null==t._a[cs]&&le(t),null!=t._dayOfYear&&(r=re(t._a[hs],n[hs]),(t._dayOfYear>K(r)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),i=yt(r,0,t._dayOfYear),t._a[cs]=i.getUTCMonth(),t._a[us]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ps]&&0===t._a[fs]&&0===t._a[gs]&&0===t._a[ms]&&(t._nextDay=!0,t._a[ps]=0),t._d=(t._useUTC?yt:wt).apply(null,o),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ps]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==s&&(f(t).weekdayMismatch=!0)}}function le(t){var e,i,n,s,r,o,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)r=1,o=4,i=re(e.GG,t._a[hs],xt(De(),1,4).year),n=re(e.W,1),((s=re(e.E,1))<1||7<s)&&(l=!0);else{r=t._locale._week.dow,o=t._locale._week.doy;var d=xt(De(),r,o);i=re(e.gg,t._a[hs],d.year),n=re(e.w,d.week),null!=e.d?((s=e.d)<0||6<s)&&(l=!0):null!=e.e?(s=e.e+r,(e.e<0||6<e.e)&&(l=!0)):s=r}n<1||n>Ct(i,r,o)?f(t)._overflowWeeks=!0:null!=l?f(t)._overflowWeekday=!0:(a=St(i,n,s,r,o),t._a[hs]=a.year,t._dayOfYear=a.dayOfYear)}function de(t){var e,i,n,s,r,o,a=t._i,l=Ls.exec(a)||Os.exec(a);if(l){for(f(t).iso=!0,e=0,i=Ws.length;e<i;e++)if(Ws[e][1].exec(l[1])){s=Ws[e][0],n=!1!==Ws[e][2];break}if(null==s)return void(t._isValid=!1);if(l[3]){for(e=0,i=Ns.length;e<i;e++)if(Ns[e][1].exec(l[3])){r=(l[2]||" ")+Ns[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!As.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=s+(r||"")+(o||""),ve(t)}else t._isValid=!1}function he(t,e,i,n,s,r){var o=[ce(t),xs.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function ce(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ue(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function pe(t,e,i){if(t&&ks.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return f(i).weekdayMismatch=!0,i._isValid=!1;return!0}function fe(t,e,i){if(t)return js[t];if(e)return 0;var n=parseInt(i,10),s=n%100;return 60*((n-s)/100)+s}function ge(t){var e=Vs.exec(ue(t._i));if(e){var i=he(e[4],e[3],e[2],e[5],e[6],e[7]);if(!pe(e[1],i,t))return;t._a=i,t._tzm=fe(e[8],e[9],e[10]),t._d=yt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function me(t){var e=Bs.exec(t._i);null===e?(de(t),!1===t._isValid&&(delete t._isValid,ge(t),!1===t._isValid&&(delete t._isValid,d.createFromInputFallback(t)))):t._d=new Date(+e[1])}function ve(t){if(t._f!==d.ISO_8601)if(t._f!==d.RFC_2822){t._a=[],f(t).empty=!0;var e,i,n,s,r,o=""+t._i,a=o.length,l=0;for(n=V(t._f,t._locale).match(An)||[],e=0;e<n.length;e++)s=n[e],(i=(o.match(q(s,t))||[])[0])&&(0<(r=o.substr(0,o.indexOf(i))).length&&f(t).unusedInput.push(r),o=o.slice(o.indexOf(i)+i.length),l+=i.length),Bn[s]?(i?f(t).empty=!1:f(t).unusedTokens.push(s),J(s,i,t)):t._strict&&!i&&f(t).unusedTokens.push(s);f(t).charsLeftOver=a-l,0<o.length&&f(t).unusedInput.push(o),t._a[ps]<=12&&!0===f(t).bigHour&&0<t._a[ps]&&(f(t).bigHour=undefined),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[ps]=_e(t._locale,t._a[ps],t._meridiem),ae(t),se(t)}else ge(t);else de(t)}function _e(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):(null!=t.isPM&&((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0)),e)}function we(t){var e,i,n,s,r;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)r=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],ve(e),g(e)&&(r+=f(e).charsLeftOver,r+=10*f(e).unusedTokens.length,f(e).score=r,(null==n||r<n)&&(n=r,i=e));u(t,i||e)}function ye(t){if(!t._d){var e=P(t._i);t._a=i([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ae(t)}}function be(t){var e=new v(se(Se(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function Se(t){var e=t._i,i=t._f;return t._locale=t._locale||ie(t._l),null===e||i===undefined&&""===e?n({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new v(se(e)):(s(e)?t._d=e:o(i)?we(t):i?ve(t):xe(t),g(t)||(t._d=null),t))}function xe(t){var e=t._i;r(e)?t._d=new Date(d.now()):s(e)?t._d=new Date(e.valueOf()):"string"==typeof e?me(t):o(e)?(t._a=i(e.slice(0),function(t){return parseInt(t,10)}),ae(t)):a(e)?ye(t):h(e)?t._d=new Date(e):d.createFromInputFallback(t)}function Ce(t,e,i,n,s){var r={};return!0!==i&&!1!==i||(n=i,i=undefined),(a(t)&&l(t)||o(t)&&0===t.length)&&(t=undefined),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=i,r._i=t,r._f=e,r._strict=n,be(r)}function De(t,e,i,n){return Ce(t,e,i,n,!1)}function Ee(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return De();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}function Te(){return Ee("isBefore",[].slice.call(arguments,0))}function ke(){return Ee("isAfter",[].slice.call(arguments,0))}function $e(t){for(var e in t)if(-1===ws.call(Xs,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Xs.length;++n)if(t[Xs[n]]){if(i)return!1;parseFloat(t[Xs[n]])!==y(t[Xs[n]])&&(i=!0)}return!0}function Re(){return this._isValid}function He(){return Xe(NaN)}function Me(t){var e=P(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=$e(e),this._milliseconds=+h+1e3*d+6e4*l+1e3*a*60*60,this._days=+o+7*r,this._months=+s+3*n+12*i,this._data={},this._locale=ie(),this._bubble()}function ze(t){return t instanceof Me}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,i){A(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+O(~~(t/60),2)+i+O(~~t%60,2)})}function Ge(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Qs)||["-",0,0],s=60*n[1]+y(n[2]);return 0===s?0:"+"===n[0]?s:-s}function Pe(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(_(t)||s(t)?t.valueOf():De(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),d.updateOffset(i,!1),i):De(t).local()}function Ye(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Le(t,e,i){var n,s=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?s:Ye(this);if("string"==typeof t){if(null===(t=Ge(rs,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=Ye(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==t&&(!e||this._changeInProgress?ei(this,Xe(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this}function Oe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ae(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ye(this),"m")),this}function Ne(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ge(ss,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Be(t){return!!this.isValid()&&(t=t?De(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function je(){if(!r(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=Se(t))._a){var e=t._isUTC?p(t._a):De(t._a);this._isDSTShifted=this.isValid()&&0<b(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function qe(){return!!this.isValid()&&!this._isUTC}function Ue(){return!!this.isValid()&&this._isUTC}function Ze(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xe(t,e){var i,n,s,r=t,o=null;return ze(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:h(t)?(r={},e?r[e]=t:r.milliseconds=t):(o=Js.exec(t))?(i="-"===o[1]?-1:1,r={y:0,d:y(o[us])*i,h:y(o[ps])*i,m:y(o[fs])*i,s:y(o[gs])*i,ms:y(Ie(1e3*o[ms]))*i}):(o=Ks.exec(t))?(i="-"===o[1]?-1:(o[1],1),r={y:Qe(o[2],i),M:Qe(o[3],i),w:Qe(o[4],i),d:Qe(o[5],i),h:Qe(o[6],i),m:Qe(o[7],i),s:Qe(o[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=Ke(De(r.from),De(r.to)),(r={}
).ms=s.milliseconds,r.M=s.months),n=new Me(r),ze(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Je(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ke(t,e){var i;return t.isValid()&&e.isValid()?(e=Pe(e,t),t.isBefore(e)?i=Je(t,e):((i=Je(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ti(n,s){return function(t,e){var i;return null===e||isNaN(+e)||(C(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=t,t=e,e=i),ei(this,Xe(t="string"==typeof t?+t:t,e),n),this}}function ei(t,e,i,n){var s=e._milliseconds,r=Ie(e._days),o=Ie(e._months);t.isValid()&&(n=null==n||n,o&&pt(t,nt(t,"Month")+o*i),r&&st(t,"Date",nt(t,"Date")+r*i),s&&t._d.setTime(t._d.valueOf()+s*i),n&&d.updateOffset(t,r||o))}function ii(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(t,e){var i=t||De(),n=Pe(i,this).startOf("day"),s=d.calendarFormat(this,n)||"sameElse",r=e&&(D(e[s])?e[s].call(this,i):e[s]);return this.format(r||this.localeData().calendar(s,this,De(i)))}function si(){return new v(this)}function ri(t,e){var i=_(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(r(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function oi(t,e){var i=_(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(r(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function ai(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function li(t,e){var i,n=_(t)?t:De(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=G(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function di(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function hi(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ci(t,e,i){var n,s,r;if(!this.isValid())return NaN;if(!(n=Pe(t,this)).isValid())return NaN;switch(s=6e4*(n.utcOffset()-this.utcOffset()),e=G(e)){case"year":r=ui(this,n)/12;break;case"month":r=ui(this,n);break;case"quarter":r=ui(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-s)/864e5;break;case"week":r=(this-n-s)/6048e5;break;default:r=this-n}return i?r:w(r)}function ui(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function pi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||9999<i.year()?B(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",B(i,"Z")):B(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]';return this.format(i+n+s+r)}function mi(t){t||(t=this.isUtc()?d.defaultFormatUtc:d.defaultFormat);var e=B(this,t);return this.localeData().postformat(e)}function vi(t,e){return this.isValid()&&(_(t)&&t.isValid()||De(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _i(t){return this.from(De(),t)}function wi(t,e){return this.isValid()&&(_(t)&&t.isValid()||De(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function yi(t){return this.to(De(),t)}function bi(t){var e;return t===undefined?this._locale._abbr:(null!=(e=ie(t))&&(this._locale=e),this)}function Si(){return this._locale}function xi(t){switch(t=G(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Ci(t){return(t=G(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Di(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function Ti(){return new Date(this.valueOf())}function ki(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function $i(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ri(){return this.isValid()?this.toISOString():null}function Hi(){return g(this)}function Mi(){return u({},f(this))}function zi(){return f(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fi(t,e){A(0,[t,t.length],0,e)}function Gi(t){return Oi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Pi(t){return Oi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Yi(){return Ct(this.year(),1,4)}function Li(){var t=this.localeData()._week;return Ct(this.year(),t.dow,t.doy)}function Oi(t,e,i,n,s){var r;return null==t?xt(this,n,s).year:((r=Ct(t,n,s))<e&&(e=r),Ai.call(this,t,e,i,n,s))}function Ai(t,e,i,n,s){var r=St(t,e,i,n,s),o=yt(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Wi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ni(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Bi(t,e){e[ms]=y(1e3*("0."+t))}function Vi(){return this._isUTC?"UTC":""}function ji(){return this._isUTC?"Coordinated Universal Time":""}function qi(t){return De(1e3*t)}function Ui(){return De.apply(null,arguments).parseZone()}function Zi(t){return t}function Xi(t,e,i,n){var s=ie(),r=p().set(n,e);return s[i](r,t)}function Qi(t,e,i){if(h(t)&&(e=t,t=undefined),t=t||"",null!=e)return Xi(t,e,i,"month");var n,s=[];for(n=0;n<12;n++)s[n]=Xi(t,n,i,"month");return s}function Ji(t,e,i,n){"boolean"==typeof t?h(e)&&(i=e,e=undefined):(e=t,t=!1,h(i=e)&&(i=e,e=undefined)),e=e||"";var s,r=ie(),o=t?r._week.dow:0;if(null!=i)return Xi(e,(i+o)%7,n,"day");var a=[];for(s=0;s<7;s++)a[s]=Xi(e,(s+o)%7,n,"day");return a}function Ki(t,e){return Qi(t,e,"months")}function tn(t,e){return Qi(t,e,"monthsShort")}function en(t,e,i){return Ji(t,e,i,"weekdays")}function nn(t,e,i){return Ji(t,e,i,"weekdaysShort")}function sn(t,e,i){return Ji(t,e,i,"weekdaysMin")}function rn(){var t=this._data;return this._milliseconds=hr(this._milliseconds),this._days=hr(this._days),this._months=hr(this._months),t.milliseconds=hr(t.milliseconds),t.seconds=hr(t.seconds),t.minutes=hr(t.minutes),t.hours=hr(t.hours),t.months=hr(t.months),t.years=hr(t.years),this}function on(t,e,i,n){var s=Xe(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function an(t,e){return on(this,t,e,1)}function ln(t,e){return on(this,t,e,-1)}function dn(t){return t<0?Math.floor(t):Math.ceil(t)}function hn(){var t,e,i,n,s,r=this._milliseconds,o=this._days,a=this._months,l=this._data;return 0<=r&&0<=o&&0<=a||r<=0&&o<=0&&a<=0||(r+=864e5*dn(un(a)+o),a=o=0),l.milliseconds=r%1e3,t=w(r/1e3),l.seconds=t%60,e=w(t/60),l.minutes=e%60,i=w(e/60),l.hours=i%24,a+=s=w(cn(o+=w(i/24))),o-=dn(un(s)),n=w(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function cn(t){return 4800*t/146097}function un(t){return 146097*t/4800}function pn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=G(t))||"year"===t)return e=this._days+n/864e5,i=this._months+cn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(un(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function fn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12):NaN}function gn(t){return function(){return this.as(t)}}function mn(){return Xe(this)}function vn(t){return t=G(t),this.isValid()?this[t+"s"]():NaN}function _n(t){return function(){return this.isValid()?this._data[t]:NaN}}function wn(){return w(this.days()/7)}function yn(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function bn(t,e,i){var n=Xe(t).abs(),s=Er(n.as("s")),r=Er(n.as("m")),o=Er(n.as("h")),a=Er(n.as("d")),l=Er(n.as("M")),d=Er(n.as("y")),h=s<=Tr.ss&&["s",s]||s<Tr.s&&["ss",s]||r<=1&&["m"]||r<Tr.m&&["mm",r]||o<=1&&["h"]||o<Tr.h&&["hh",o]||a<=1&&["d"]||a<Tr.d&&["dd",a]||l<=1&&["M"]||l<Tr.M&&["MM",l]||d<=1&&["y"]||["yy",d];return h[2]=e,h[3]=0<+t,h[4]=i,yn.apply(null,h)}function Sn(t){return t===undefined?Er:"function"==typeof t&&(Er=t,!0)}function xn(t,e){return Tr[t]!==undefined&&(e===undefined?Tr[t]:(Tr[t]=e,"s"===t&&(Tr.ss=e-1),!0))}function Cn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=bn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Dn(t){return(0<t)-(t<0)||+t}function En(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=kr(this._milliseconds)/1e3,n=kr(this._days),s=kr(this._months);e=w((t=w(i/60))/60),i%=60,t%=60;var r=w(s/12),o=s%=12,a=n,l=e,d=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var u=c<0?"-":"",p=Dn(this._months)!==Dn(c)?"-":"",f=Dn(this._days)!==Dn(c)?"-":"",g=Dn(this._milliseconds)!==Dn(c)?"-":"";return u+"P"+(r?p+r+"Y":"")+(o?p+o+"M":"")+(a?f+a+"D":"")+(l||d||h?"T":"")+(l?g+l+"H":"")+(d?g+d+"M":"")+(h?g+h+"S":"")}var Tn,kn;kn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var $n,Rn=d.momentProperties=[],Hn=!1,Mn={};d.suppressDeprecationWarnings=!1,d.deprecationHandler=null,$n=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)c(t,e)&&i.push(e);return i};var zn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},In={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Fn="Invalid date",Gn="%d",Pn=/\d{1,2}/,Yn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ln={},On={},An=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nn={},Bn={},Vn=/\d/,jn=/\d\d/,qn=/\d{3}/,Un=/\d{4}/,Zn=/[+-]?\d{6}/,Xn=/\d\d?/,Qn=/\d\d\d\d?/,Jn=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,ts=/\d{1,4}/,es=/[+-]?\d{1,6}/,is=/\d+/,ns=/[+-]?\d+/,ss=/Z|[+-]\d\d:?\d\d/gi,rs=/Z|[+-]\d\d(?::?\d\d)?/gi,os=/[+-]?\d+(\.\d{1,3})?/,as=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ls={},ds={},hs=0,cs=1,us=2,ps=3,fs=4,gs=5,ms=6,vs=7,_s=8;A("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),F("year","y"),Y("year",1),j("Y",ns),j("YY",Xn,jn),j("YYYY",ts,Un),j("YYYYY",es,Zn),j("YYYYYY",es,Zn),X(["YYYYY","YYYYYY"],hs),X("YYYY",function(t,e){e[hs]=2===t.length?d.parseTwoDigitYear(t):y(t)}),X("YY",function(t,e){e[hs]=d.parseTwoDigitYear(t)}),X("Y",function(t,e){e[hs]=parseInt(t,10)}),d.parseTwoDigitYear=function(t){return y(t)+(68<y(t)?1900:2e3)};var ws,ys=it("FullYear",!0);ws=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),A("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),Y("month",8),j("M",Xn),j("MM",Xn,jn),j("MMM",function(t,e){return e.monthsShortRegex(t)}),j("MMMM",function(t,e){return e.monthsRegex(t)}),X(["M","MM"],function(t,e){e[cs]=y(t)-1}),X(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[cs]=s:f(i).invalidMonth=t});var bs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ss="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xs="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Cs=as,Ds=as;A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),Y("week",5),Y("isoWeek",5),j("w",Xn),j("ww",Xn,jn),j("W",Xn),j("WW",Xn,jn),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=y(t)});var Es={dow:0,doy:6};A("d",0,"do","day"),A("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),A("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),A("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),Y("day",11),Y("weekday",11),Y("isoWeekday",11),j("d",Xn),j("e",Xn),j("E",Xn),j("dd",function(t,e){return e.weekdaysMinRegex(t)}),j("ddd",function(t,e){return e.weekdaysShortRegex(t)}),j("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);null!=s?e.d=s:f(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=y(t)});var Ts="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ks="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$s="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rs=as,Hs=as,Ms=as;A("H",["HH",2],0,"hour"),A("h",["hh",2],0,Bt),A("k",["kk",2],0,Vt),A("hmm",0,0,function(){return""+Bt.apply(this)+O(this.minutes(),2)}),A("hmmss",0,0,function(){return""+Bt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),A("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),A("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),jt("a",!0),jt("A",!1),F("hour","h"),Y("hour",13),j("a",qt),j("A",qt),j("H",Xn),j("h",Xn),j("k",Xn),j("HH",Xn,jn),j("hh",Xn,jn),j("kk",Xn,jn),j("hmm",Qn),j("hmmss",Jn),j("Hmm",Qn),j("Hmmss",Jn),X(["H","HH"],ps),X(["k","kk"],function(t,e){var i=y(t);e[ps]=24===i?0:i}),X(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),X(["h","hh"],function(t,e,i){e[ps]=y(t),f(i).bigHour=!0}),X("hmm",function(t,e,i){var n=t.length-2;e[ps]=y(t.substr(0,n)),e[fs]=y(t.substr(n)),f(i).bigHour=!0}),X("hmmss",function(t,e,i){var n=t.length-4,s=t.length-2;e[ps]=y(t.substr(0,n)),e[fs]=y(t.substr(n,2)),e[gs]=y(t.substr(s)),f(i).bigHour=!0}),X("Hmm",function(t,e){var i=t.length-2;e[ps]=y(t.substr(0,i)),e[fs]=y(t.substr(i))}),X("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[ps]=y(t.substr(0,i)),e[fs]=y(t.substr(i,2)),e[gs]=y(t.substr(n))});var zs,Is=/[ap]\.?m?\.?/i,Fs=it("Hours",!0),Gs={calendar:zn,longDateFormat:In,invalidDate:Fn,ordinal:Gn,dayOfMonthOrdinalParse:Pn,relativeTime:Yn,months:Ss,monthsShort:xs,week:Es,weekdays:Ts,weekdaysMin:$s,weekdaysShort:ks,meridiemParse:Is},Ps={},Ys={},Ls=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Os=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,As=/Z|[+-]\d\d(?::?\d\d)?/,Ws=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ns=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bs=/^\/?Date\((\-?\d+)/i,Vs=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,js={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};d.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),d.ISO_8601=function(){},d.RFC_2822=function(){};var qs=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:n()}),Us=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:n()}),Zs=function(){return Date.now?Date.now():+new Date},Xs=["year","quarter","month","week","day","hour","minute","second","millisecond"];Fe("Z",":"),Fe("ZZ",""),j("Z",rs),j("ZZ",rs),X(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ge(rs,t)});var Qs=/([\+\-]|\d\d)/gi;d.updateOffset=function(){};var Js=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ks=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xe.fn=Me.prototype,Xe.invalid=He;var tr=ti(1,"add"),er=ti(-1,"subtract");d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",d.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ir=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fi("gggg","weekYear"),Fi("ggggg","weekYear"),Fi("GGGG","isoWeekYear"),Fi("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),Y("weekYear",1),Y("isoWeekYear",1),j("G",ns),j("g",ns),j("GG",Xn,jn),j("gg",Xn,jn),j("GGGG",ts,Un),j("gggg",ts,Un),j("GGGGG",es,Zn),j("ggggg",es,Zn),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=y(t)}),Q(["gg","GG"],function(t,e,i,n){e[n]=d.parseTwoDigitYear(t)}),A("Q",0,"Qo","quarter"),F("quarter","Q"),Y("quarter",7),j("Q",Vn),X("Q",function(t,e){e[cs]=3*(y(t)-1)}),A("D",["DD",2],"Do","date"),F("date","D"),Y("date",9),j("D",Xn),j("DD",Xn,jn),j("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),X(["D","DD"],us),X("Do",function(t,e){e[us]=y(t.match(Xn)[0])});var nr=it("Date",!0);A("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),Y("dayOfYear",4),j("DDD",Kn),j("DDDD",qn),X(["DDD","DDDD"],function(t,e,i){i._dayOfYear=y(t)}),A("m",["mm",2],0,"minute"),F("minute","m"),Y("minute",14),j("m",Xn),j("mm",Xn,jn),X(["m","mm"],fs);var sr=it("Minutes",!1);A("s",["ss",2],0,"second"),F("second","s"),Y("second",15),j("s",Xn),j("ss",Xn,jn),X(["s","ss"],gs);var rr,or=it("Seconds",!1);for(A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return 10*this.millisecond()}),A(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),A(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),A(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),A(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),A(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),Y("millisecond",16),j("S",Kn,Vn),j("SS",Kn,jn),j("SSS",Kn,qn),rr="SSSS";rr.length<=9;rr+="S")j(rr,is);for(rr="S";rr.length<=9;rr+="S")X(rr,Bi);var ar=it("Milliseconds",!1);A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");var lr=v.prototype;lr.add=tr,lr.calendar=ni,lr.clone=si,lr.diff=ci,lr.endOf=Ci,lr.format=mi,lr.from=vi,lr.fromNow=_i,lr.to=wi,lr.toNow=yi,lr.get=rt,lr.invalidAt=zi,lr.isAfter=ri,lr.isBefore=oi,lr.isBetween=ai,lr.isSame=li,lr.isSameOrAfter=di,lr.isSameOrBefore=hi,lr.isValid=Hi,lr.lang=ir,lr.locale=bi,lr.localeData=Si,lr.max=Us,lr.min=qs,lr.parsingFlags=Mi,lr.set=ot,lr.startOf=xi,lr.subtract=er,lr.toArray=ki,lr.toObject=$i,lr.toDate=Ti,lr.toISOString=fi,lr.inspect=gi,lr.toJSON=Ri,lr.toString=pi,lr.unix=Ei,lr.valueOf=Di,lr.creationData=Ii,lr.year=ys,lr.isLeapYear=et,lr.weekYear=Gi,lr.isoWeekYear=Pi,lr.quarter=lr.quarters=Wi,lr.month=ft,lr.daysInMonth=gt,lr.week=lr.weeks=kt,lr.isoWeek=lr.isoWeeks=$t,lr.weeksInYear=Li,lr.isoWeeksInYear=Yi,lr.date=nr,lr.day=lr.days=Pt,lr.weekday=Yt,lr.isoWeekday=Lt,lr.dayOfYear=Ni,lr.hour=lr.hours=Fs,lr.minute=lr.minutes=sr,lr.second=lr.seconds=or,lr.millisecond=lr.milliseconds=ar,lr.utcOffset=Le,lr.utc=Ae,lr.local=We,lr.parseZone=Ne,lr.hasAlignedHourOffset=Be,lr.isDST=Ve,lr.isLocal=qe,lr.isUtcOffset=Ue,lr.isUtc=Ze,lr.isUTC=Ze,lr.zoneAbbr=Vi,lr.zoneName=ji,lr.dates=x("dates accessor is deprecated. Use date instead.",nr),lr.months=x("months accessor is deprecated. Use month instead",ft),lr.years=x("years accessor is deprecated. Use year instead",ys),lr.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Oe),lr.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",je);var dr=k.prototype;dr.calendar=$,dr.longDateFormat=R,dr.invalidDate=H,dr.ordinal=M,dr.preparse=Zi,dr.postformat=Zi,dr.relativeTime=z,dr.pastFuture=I,dr.set=E,dr.months=dt,dr.monthsShort=ht,dr.monthsParse=ut,dr.monthsRegex=vt,dr.monthsShortRegex=mt,dr.week=Dt,dr.firstDayOfYear=Tt,dr.firstDayOfWeek=Et,dr.weekdays=Mt,dr.weekdaysMin=It,dr.weekdaysShort=zt,dr.weekdaysParse=Gt,dr.weekdaysRegex=Ot,dr.weekdaysShortRegex=At,dr.weekdaysMinRegex=Wt,dr.isPM=Ut,dr.meridiem=Zt,Kt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),d.lang=x("moment.lang is deprecated. Use moment.locale instead.",Kt),d.langData=x("moment.langData is deprecated. Use moment.localeData instead.",ie);var hr=Math.abs,cr=gn("ms"),ur=gn("s"),pr=gn("m"),fr=gn("h"),gr=gn("d"),mr=gn("w"),vr=gn("M"),_r=gn("y"),wr=_n("milliseconds"),yr=_n("seconds"),br=_n("minutes"),Sr=_n("hours"),xr=_n("days"),Cr=_n("months"),Dr=_n("years"),Er=Math.round,Tr={ss:44,s:45,m:45,h:22,d:26,M:11},kr=Math.abs,$r=Me.prototype;return $r.isValid=Re,$r.abs=rn,$r.add=an,$r.subtract=ln,$r.as=pn,$r.asMilliseconds=cr,$r.asSeconds=ur,$r.asMinutes=pr,$r.asHours=fr,$r.asDays=gr,$r.asWeeks=mr,$r.asMonths=vr,$r.asYears=_r,$r.valueOf=fn,$r._bubble=hn,$r.clone=mn,$r.get=vn,$r.milliseconds=wr,$r.seconds=yr,$r.minutes=br,$r.hours=Sr,$r.days=xr,$r.weeks=wn,$r.months=Cr,$r.years=Dr,$r.humanize=Cn,$r.toISOString=En,$r.toString=En,$r.toJSON=En,$r.locale=bi,$r.localeData=Si,$r.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),$r.lang=ir,A("X",0,0,"unix"),A("x",0,0,"valueOf"),j("x",ns),j("X",os),X("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),X("x",function(t,e,i){i._d=new Date(y(t))}),d.version="2.20.1",t(De),d.fn=lr,d.min=Te,d.max=ke,d.now=Zs,d.utc=p,d.unix=qi,d.months=Ki,d.isDate=s,d.locale=Kt,d.invalid=n,d.duration=Xe,d.isMoment=_,d.weekdays=en,d.parseZone=Ui,d.localeData=ie,d.isDuration=ze,d.monthsShort=tn,d.weekdaysMin=sn,d.defineLocale=te,d.updateLocale=ee,d.locales=ne,d.weekdaysShort=nn,d.normalizeUnits=G,d.relativeTimeRounding=Sn,d.relativeTimeThreshold=xn,d.calendarFormat=ii,d.prototype=lr,d.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},d}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(et,it){function h(t){return G(t,Nt)}function s(t){var n,s={views:t.views||{}};return et.each(t,function(i,t){"views"!=i&&(et.isPlainObject(t)&&!/(time|duration|interval)$/i.test(i)&&-1==et.inArray(i,Nt)?(n=null,et.each(t,function(t,e){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(s.views[t]||(s.views[t]={}),s.views[t][i]=e):(n||(n={}),n[t]=e)}),n&&(s[i]=n)):s[i]=t)}),s}function r(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function o(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function p(){et("body").addClass("fc-not-allowed")}function f(){et("body").removeClass("fc-not-allowed")}function i(s,t,e){var r=Math.floor(t/s.length),o=Math.floor(t-r*(s.length-1)),a=[],l=[],d=[],h=0;n(s),s.each(function(t,e){var i=t===s.length-1?o:r,n=et(e).outerHeight(!0);n<i?(a.push(e),l.push(n),d.push(et(e).height())):h+=n}),e&&(t-=h,r=Math.floor(t/a.length),o=Math.floor(t-r*(a.length-1))),et(a).each(function(t,e){var i=t===a.length-1?o:r,n=l[t],s=i-(n-d[t]);n<i&&et(e).height(s)})}function n(t){t.height("")}function t(t){var n=0;return t.find("> span").each(function(t,e){var i=et(e).outerWidth();n<i&&(n=i)}),n++,t.width(n),n}function a(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight||(l(t),!1)}function l(t){t.height("").removeClass("fc-scroller")}function c(t){var e=t.css("position"),i=t.parents().filter(function(){var t=et(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&i.length?i:et(t[0].ownerDocument||document)}function d(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function e(t){var e=t.offset(),i=g(t),n=e.left+_(t,"border-left-width")+i.left,s=e.top+_(t,"border-top-width")+i.top;return{left:n,right:n+t[0].clientWidth,top:s,bottom:s+t[0].clientHeight}}function u(t){var e=t.offset(),i=e.left+_(t,"border-left-width")+_(t,"padding-left"),n=e.top+_(t,"border-top-width")+_(t,"padding-top");return{left:i,right:i+t.width(),top:n,bottom:n+t.height()}}function g(t){var e=t.innerWidth()-t[0].clientWidth,i={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return m()&&"rtl"==t.css("direction")?i.left=e:i.right=e,i}function m(){return null===Bt&&(Bt=v()),Bt}function v(){var t=et("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),e=t.children().offset().left>t.offset().left;return t.remove(),e}function _(t,e){return parseFloat(t.css(e))||0}function w(t){return 1==t.which&&!t.ctrlKey}function y(t,e){var i={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return i.left<i.right&&i.top<i.bottom&&i}function b(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function S(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function x(t,e){return{left:t.left-e.left,top:t.top-e.top}}function C(t){var e,i,n=[],s=[];for("string"==typeof t?s=t.split(/\s*,\s*/):"function"==typeof t?s=[t]:et.isArray(t)&&(s=t),e=0;e<s.length;e++)"string"==typeof(i=s[e])?n.push("-"==i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&n.push({func:i});return n}function D(t,e,i){var n,s;for(n=0;n<i.length;n++)if(s=E(t,e,i[n]))return s;return 0}function E(t,e,i){return i.func?i.func(t,e):T(t[i.field],e[i.field])*(i.order||1)}function T(t,e){return t||e?null==e?-1:null==t?1:"string"===et.type(t)||"string"===et.type(e)?String(t).localeCompare(String(e)):t-e:0}function k(t,e){var i,n,s,r,o=t.start,a=t.end,l=e.start,d=e.end;if(l<a&&o<d)return l<=o?(i=o.clone(),s=!0):(i=l.clone(),s=!1),a<=d?(n=a.clone(),r=!0):(n=d.clone(),r=!1),{start:i,end:n,isStart:s,isEnd:r}}function O(t,e){return it.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days"),ms:t.time()-e.time()})}function A(t,e){return it.duration({days:t.clone().stripTime().diff(e.clone().stripTime(),"days")})}function W(t,e,i){return it.duration(Math.round(t.diff(e,i,!0)),i)}function $(t,e){var i,n,s;for(i=0;i<jt.length&&!(1<=(s=R(n=jt[i],t,e))&&J(s));i++);return n}function R(t,e,i){return null!=i?i.diff(e,t,!0):it.isDuration(e)?e.as(t):e.end.diff(e.start,t,!0)}function H(t,e,i){var n;return I(i)?(e-t)/i:(n=i.asMonths(),1<=Math.abs(n)&&J(n)?e.diff(t,"months",!0)/n:e.diff(t,"days",!0)/i.asDays())}function M(t,e){var i,n;return I(t)||I(e)?t/e:(i=t.asMonths(),n=e.asMonths(),1<=Math.abs(i)&&J(i)&&1<=Math.abs(n)&&J(n)?i/n:t.asDays()/e.asDays())}function z(t,e){var i;return I(t)?it.duration(t*e):(i=t.asMonths(),1<=Math.abs(i)&&J(i)?it.duration({months:i*e}):it.duration({days:t.asDays()*e}))}function I(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function F(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function N(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function G(t,e){var i,n,s,r,o,a,l={};if(e)for(i=0;i<e.length;i++){for(n=e[i],s=[],r=t.length-1;0<=r;r--)if("object"==typeof(o=t[r][n]))s.unshift(o);else if(o!==undefined){l[n]=o;break}s.length&&(l[n]=G(s))}for(i=t.length-1;0<=i;i--)for(n in a=t[i])n in l||(l[n]=a[n]);return l}function nt(t){var e=function(){};return e.prototype=t,new e}function P(t,e){for(var i in t)L(t,i)&&(e[i]=t[i])}function Y(t,e){var i,n,s=["constructor","toString","valueOf"];for(i=0;i<s.length;i++)t[n=s[i]]!==Object.prototype[n]&&(e[n]=t[n])}function L(t,e){return Xt.call(t,e)}function B(t){return/undefined|null|boolean|number|string/.test(et.type(t))}function V(t,e,i){if(et.isFunction(t)&&(t=[t]),t){var n,s;for(n=0;n<t.length;n++)s=t[n].apply(e,i)||s;return s}}function j(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==undefined)return arguments[t]}function q(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(t){return t.replace(/&.*?;/g,"")}function Z(t){var i=[];return et.each(t,function(t,e){null!=e&&i.push(t+":"+e)}),i.join(";")}function X(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Q(t,e){return t-e}function J(t){return t%1==0}function K(t,e){var i=t[e];return function(){return i.apply(t,arguments)}}function st(e,i){var n,s,r,o,a=function(){var t=+new Date-o;t<i&&0<t?n=setTimeout(a,i-t):(n=null,e.apply(r,s),n||(r=s=null))};return function(){r=this,s=arguments,o=+new Date,n||(n=setTimeout(a,i))}}function tt(t,e,i){var n,s,r,o,a=t[0],l=1==t.length&&"string"==typeof a;return it.isMoment(a)?ot(a,o=it.apply(null,t)):F(a)||a===undefined?o=it.apply(null,t):(s=n=!1,l?Qt.test(a)?(t=[a+="-01"],s=n=!0):(r=Jt.exec(a))&&(n=!r[5],s=!0):et.isArray(a)&&(s=!0),o=e||n?it.utc.apply(it,t):it.apply(null,t),n?(o._ambigTime=!0,o._ambigZone=!0):i&&(s?o._ambigZone=!0:l&&(o.utcOffset?o.utcOffset(a):o.zone(a)))),o._fullCalendar=!0,o}function rt(t,e){var i,n,s=!1,r=!1,o=t.length,a=[];for(i=0;i<o;i++)n=t[i],it.isMoment(n)||(n=At.moment.parseZone(n
)),s=s||n._ambigTime,r=r||n._ambigZone,a.push(n);for(i=0;i<o;i++)n=a[i],e||!s||n._ambigTime?r&&!n._ambigZone&&(a[i]=n.clone().stripZone()):a[i]=n.clone().stripTime();return a}function ot(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function at(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function lt(t,e){return te.format.call(t,e)}function dt(t,e){return ht(t,gt(e))}function ht(t,e){var i,n="";for(i=0;i<e.length;i++)n+=ct(t,e[i]);return n}function ct(t,e){var i,n;return"string"==typeof e?e:(i=e.token)?ee[i]?ee[i](t):lt(t,i):e.maybe&&(n=ht(t,e.maybe)).match(/[1-9]/)?n:""}function ut(t,e,i,n,s){return n=n||" - ",pt(t=At.moment.parseZone(t),e=At.moment.parseZone(e),gt(i=(t.localeData||t.lang).call(t).longDateFormat(i)||i),n,s)}function pt(t,e,i,n,s){var r,o,a,l,d=t.clone().stripZone(),h=e.clone().stripZone(),c="",u="",p="",f="",g="";for(o=0;o<i.length&&!1!==(r=ft(t,e,d,h,i[o]));o++)c+=r;for(a=i.length-1;o<a&&!1!==(r=ft(t,e,d,h,i[a]));a--)u=r+u;for(l=o;l<=a;l++)p+=ct(t,i[l]),f+=ct(e,i[l]);return(p||f)&&(g=s?f+n+p:p+n+f),c+g+u}function ft(t,e,i,n,s){var r,o;return"string"==typeof s?s:!!((r=s.token)&&(o=ie[r.charAt(0)])&&i.isSame(n,o))&&lt(t,r)}function gt(t){return t in ne?ne[t]:ne[t]=mt(t)}function mt(t){for(var e,i=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=n.exec(t);)e[1]?i.push(e[1]):e[2]?i.push({maybe:mt(e[2])}):e[3]?i.push({token:e[3]}):e[5]&&i.push(e[5]);return i}function vt(){}function _t(t,e){var i;return L(e,"constructor")&&(i=e.constructor),"function"!=typeof i&&(i=e.constructor=function(){t.apply(this,arguments)}),i.prototype=nt(t.prototype),P(e,i.prototype),Y(e,i.prototype),P(t,i),i}function wt(t,e){P(e.prototype||e,t.prototype)}function yt(t,e){return!t&&!e||!(!t||!e)&&(t.component===e.component&&bt(t,e)&&bt(e,t))}function bt(t,e){for(var i in t)if(!/^(component|left|right|top|bottom)$/.test(i)&&t[i]!==e[i])return!1;return!0}function St(t){var e=Ct(t);return"background"===e||"inverse-background"===e}function xt(t){return"inverse-background"===Ct(t)}function Ct(t){return j((t.source||{}).rendering,t.rendering)}function Dt(t){var e,i,n={};for(e=0;e<t.length;e++)(n[(i=t[e])._id]||(n[i._id]=[])).push(i);return n}function Et(t,e){return t.start-e.start}function Tt(t){var e,i,n,s,r=At.dataAttrPrefix;return r&&(r+="-"),(e=t.data(r+"event")||null)&&(null==(i=(e="object"==typeof e?et.extend({},e):{}).start)&&(i=e.time),n=e.duration,s=e.stick,delete e.start,delete e.time,delete e.duration,delete e.stick),null==i&&(i=t.data(r+"start")),null==i&&(i=t.data(r+"time")),null==n&&(n=t.data(r+"duration")),null==s&&(s=t.data(r+"stick")),{eventProps:e,startTime:i=null!=i?it.duration(i):null,duration:n=null!=n?it.duration(n):null,stick:s=Boolean(s)}}function kt(t,e){var i,n;for(i=0;i<e.length;i++)if((n=e[i]).leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return!0;return!1}function $t(t,e){return t.leftCol-e.leftCol}function Rt(t){var e,i,n,s=[];for(e=0;e<t.length;e++){for(i=t[e],n=0;n<s.length&&zt(i,s[n]).length;n++);(s[i.level=n]||(s[n]=[])).push(i)}return s}function Ht(t){var e,i,n,s,r;for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for((s=i[n]).forwardSegs=[],r=e+1;r<t.length;r++)zt(s,t[r],s.forwardSegs)}function Mt(t){var e,i,n=t.forwardSegs,s=0;if(t.forwardPressure===undefined){for(e=0;e<n.length;e++)Mt(i=n[e]),s=Math.max(s,1+i.forwardPressure);t.forwardPressure=s}}function zt(t,e,i){i=i||[];for(var n=0;n<e.length;n++)It(t,e[n])&&i.push(e[n]);return i}function It(t,e){return t.bottom>e.top&&t.top<e.bottom}function Ft(t,e){function i(){B?r()&&(l(),o()):n()}function n(){Y.theme?"ui":"fc",t.addClass("fc"),Y.isRTL?t.addClass("fc-rtl"):t.addClass("fc-ltr"),Y.theme?t.addClass("ui-widget"):t.addClass("fc-unthemed"),B=et("<div class='fc-view-container'/>").prependTo(t),W=P.header=new Yt(P,Y),(N=W.render())&&t.prepend(N),o(Y.defaultView),Y.handleWindowResize&&(q=st(h,Y.windowResizeDelay),et(window).resize(q))}function s(){V&&V.removeElement(),W.removeElement(),B.remove(),t.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),q&&et(window).unbind("resize",q)}function r(){return t.is(":visible")}function o(t){K++,V&&t&&V.type!==t&&(W.deactivateButton(V.type),H(),V.removeElement(),V=P.view=null),!V&&t&&((V=P.view=J[t]||(J[t]=P.instantiateView(t))).setElement(et("<div class='fc-view fc-"+t+"-view' />").appendTo(B)),W.activateButton(t)),V&&(U=V.massageCurrentDate(U),V.displaying&&U.isWithin(V.intervalStart,V.intervalEnd)||r()&&(V.display(U),M(),_(),w(),f())),M(),K--}function a(t){if(r())return t&&d(),K++,V.updateSize(!0),K--,!0}function l(){r()&&d()}function d(){j="number"==typeof Y.contentHeight?Y.contentHeight:"number"==typeof Y.height?Y.height-(N?N.outerHeight(!0):0):Math.round(B.width()/Math.max(Y.aspectRatio,.5))}function h(t){!K&&t.target===window&&V.start&&a(!0)&&V.trigger("windowResize",Q)}function c(){p(),g()}function u(){r()&&(H(),V.displayEvents(tt),M())}function p(){H(),V.clearEvents(),M()}function f(){!Y.lazyFetching||Z(V.start,V.end)?g():u()}function g(){X(V.start,V.end)}function m(t){tt=t,u()}function v(){u()}function _(){W.updateTitle(V.title)}function w(){P.getNow().isWithin(V.intervalStart,V.intervalEnd)?W.disableButton("today"):W.enableButton("today")}function y(t,e){V.select(P.buildSelectSpan.apply(P,arguments))}function b(){V&&V.unselect()}function S(){U=V.computePrevDate(U),o()}function x(){U=V.computeNextDate(U),o()}function C(){U.add(-1,"years"),o()}function D(){U.add(1,"years"),o()}function E(){U=P.getNow(),o()}function T(t){U=P.moment(t).stripZone(),o()}function k(t){U.add(it.duration(t)),o()}function $(t,e){var i;e=e||"day",i=P.getViewSpec(e)||P.getUnitViewSpec(e),U=t.clone(),o(i?i.type:null)}function R(){return P.applyTimezone(U)}function H(){B.css({width:"100%",height:B.height(),overflow:"hidden"})}function M(){B.css({width:"",height:"",overflow:""})}function z(){return P}function I(){return V}function F(t,e){if(e===undefined)return Y[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(Y[t]=e,a(!0))}function G(t,e){var i=Array.prototype.slice.call(arguments,2);if(e=e||Q,this.triggerWith(t,e,i),Y[t])return Y[t].apply(e,i)}var P=this;P.initOptions(e||{});var Y=this.options;P.render=i,P.destroy=s,P.refetchEvents=c,P.reportEvents=m,P.reportEventChange=v,P.rerenderEvents=u,P.changeView=o,P.select=y,P.unselect=b,P.prev=S,P.next=x,P.prevYear=C,P.nextYear=D,P.today=E,P.gotoDate=T,P.incrementDate=k,P.zoomTo=$,P.getDate=R,P.getCalendar=z,P.getView=I,P.option=F,P.trigger=G;var L,O=nt(Pt(Y.lang));if(Y.monthNames&&(O._months=Y.monthNames),Y.monthNamesShort&&(O._monthsShort=Y.monthNamesShort),Y.dayNames&&(O._weekdays=Y.dayNames),Y.dayNamesShort&&(O._weekdaysShort=Y.dayNamesShort),null!=Y.firstDay){var A=nt(O._week);A.dow=Y.firstDay,O._week=A}O._fullCalendar_weekCalc="function"==typeof(L=Y.weekNumberCalculation)?L:"local"===L?L:"iso"===L||"ISO"===L?"ISO":void 0,P.defaultAllDayEventDuration=it.duration(Y.defaultAllDayEventDuration),P.defaultTimedEventDuration=it.duration(Y.defaultTimedEventDuration),P.moment=function(){var t;return"local"===Y.timezone?(t=At.moment.apply(null,arguments)).hasTime()&&t.local():t="UTC"===Y.timezone?At.moment.utc.apply(null,arguments):At.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=O:t._lang=O,t},P.getIsAmbigTimezone=function(){return"local"!==Y.timezone&&"UTC"!==Y.timezone},P.applyTimezone=function(t){if(!t.hasTime())return t.clone();var e,i=P.moment(t.toArray()),n=t.time()-i.time();return n&&(e=i.clone().add(n),t.time()-e.time()==0&&(i=e)),i},P.getNow=function(){var t=Y.now;return"function"==typeof t&&(t=t()),P.moment(t).stripZone()},P.getEventEnd=function(t){return t.end?t.end.clone():P.getDefaultEventEnd(t.allDay,t.start)},P.getDefaultEventEnd=function(t,e){var i=e.clone();return t?i.stripTime().add(P.defaultAllDayEventDuration):i.add(P.defaultTimedEventDuration),P.getIsAmbigTimezone()&&i.stripZone(),i},P.humanizeDuration=function(t){return(t.locale||t.lang).call(t,Y.lang).humanize()},Lt.call(P,Y);var W,N,B,V,j,q,U,Z=P.isFetchNeeded,X=P.fetchEvents,Q=t[0],J={},K=0,tt=[];U=null!=Y.defaultDate?P.moment(Y.defaultDate).stripZone():P.getNow(),P.getSuggestedViewHeight=function(){return j===undefined&&l(),j},P.isHeightAuto=function(){return"auto"===Y.contentHeight||"auto"===Y.height},P.freezeContentHeight=H,P.unfreezeContentHeight=M,P.initialize()}function Gt(i){et.each(we,function(t,e){null==i[t]&&(i[t]=e(i))})}function Pt(t){var e=it.localeData||it.langData;return e.call(it,t)||e.call(it,"en")}function Yt(p,f){function t(){var t=f.header;if(g=f.theme?"ui":"fc",t)return h=et("<div class='fc-toolbar'/>").append(i("left")).append(i("right")).append(i("center")).append('<div class="fc-clear"/>')}function e(){h.remove(),h=et()}function i(t){var e=et('<div class="fc-'+t+'"/>'),i=f.header[t];return i&&et.each(i.split(" "),function(){var t,c=et(),u=!0;et.each(this.split(","),function(t,e){var i,n,s,r,o,a,l,d,h;"title"==e?(c=c.add(et("<h2>&nbsp;</h2>")),u=!1):((i=(p.options.customButtons||{})[e])?(s=function(t){i.click&&i.click.call(h[0],t)},r="",o=i.text):(n=p.getViewSpec(e))?(s=function(){p.changeView(e)},m.push(e),r=n.buttonTextOverride,o=n.buttonTextDefault):p[e]&&(s=function(){p[e]()},r=(p.overrides.buttonText||{})[e],o=f.buttonText[e]),s&&(a=i?i.themeIcon:f.themeButtonIcons[e],l=i?i.icon:f.buttonIcons[e],d=r?q(r):a&&f.theme?"<span class='ui-icon ui-icon-"+a+"'></span>":l&&!f.theme?"<span class='fc-icon fc-icon-"+l+"'></span>":q(o),h=et('<button type="button" class="'+["fc-"+e+"-button",g+"-button",g+"-state-default"].join(" ")+'">'+d+"</button>").click(function(t){h.hasClass(g+"-state-disabled")||(s(t),(h.hasClass(g+"-state-active")||h.hasClass(g+"-state-disabled"))&&h.removeClass(g+"-state-hover"))}).mousedown(function(){h.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){h.removeClass(g+"-state-down")}).hover(function(){h.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){h.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),c=c.add(h)))}),u&&c.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),1<c.length?(t=et("<div/>"),u&&t.addClass("fc-button-group"),t.append(c),e.append(t)):e.append(c)}),e}function n(t){h.find("h2").text(t)}function s(t){h.find(".fc-"+t+"-button").addClass(g+"-state-active")}function r(t){h.find(".fc-"+t+"-button").removeClass(g+"-state-active")}function o(t){h.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(g+"-state-disabled")}function a(t){h.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(g+"-state-disabled")}function l(){return m}var d=this;d.render=t,d.removeElement=e,d.updateTitle=n,d.activateButton=s,d.deactivateButton=r,d.disableButton=o,d.enableButton=a,d.getViewsWithButtons=l;var g,h=et(),m=[]}function Lt(f){function t(t,e){return!M||t<M||z<e}function e(t,e){M=t,z=e,L=[];var i=++P,n=G.length;Y=n;for(var s=0;s<n;s++)r(G[s],i)}function r(r,o){g(r,function(t){var e,i,n,s=et.isArray(r.events);if(o==P){if(t)for(e=0;e<t.length;e++)i=t[e],(n=s?i:m(i,r))&&L.push.apply(L,y(n));--Y||I(L)}})}function g(t,i){var e,n,s=At.sourceFetchers;for(e=0;e<s.length;e++){if(!0===(n=s[e].call(H,t,M.clone(),z.clone(),f.timezone,i)))return;if("object"==typeof n)return void g(n,i)}var r=t.events;if(r)et.isFunction(r)?(H.pushLoading(),r.call(H,M.clone(),z.clone(),f.timezone,function(t){i(t),H.popLoading()})):et.isArray(r)?i(r):i();else if(t.url){var o,a=t.success,l=t.error,d=t.complete;o=et.isFunction(t.data)?t.data():t.data;var h=et.extend({},o||{}),c=j(t.startParam,f.startParam),u=j(t.endParam,f.endParam),p=j(t.timezoneParam,f.timezoneParam);c&&(h[c]=M.format()),u&&(h[u]=z.format()),f.timezone&&"local"!=f.timezone&&(h[p]=f.timezone),H.pushLoading(),et.ajax(et.extend({},ye,t,{data:h,success:function(t){t=t||[];var e=V(a,this,arguments);et.isArray(e)&&(t=e),i(t)},error:function(){V(l,this,arguments),i()},complete:function(){V(d,this,arguments),H.popLoading()}}))}else i()}function i(t){var e=n(t);e&&(G.push(e),Y++,r(e,P))}function n(t){var e,i,n=At.sourceNormalizers;if(et.isFunction(t)||et.isArray(t)?e={events:t}:"string"==typeof t?e={url:t}:"object"==typeof t&&(e=et.extend({},t)),e){for(e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[],et.isArray(e.events)&&(e.origArray=e.events,e.events=et.map(e.events,function(t){return m(t,e)})),i=0;i<n.length;i++)n[i].call(H,e);return e}}function s(e){G=et.grep(G,function(t){return!o(t,e)}),L=et.grep(L,function(t){return!o(t.source,e)}),I(L)}function o(t,e){return t&&e&&a(t)==a(e)}function a(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function l(t){t.start=H.moment(t.start),t.end?t.end=H.moment(t.end):t.end=null,b(t,d(t)),I(L)}function d(t){var i={};return et.each(t,function(t,e){h(t)&&e!==undefined&&B(e)&&(i[t]=e)}),i}function h(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function c(t,e){var i,n,s,r=m(t);if(r){for(i=y(r),n=0;n<i.length;n++)(s=i[n]).source||(e&&(F.events.push(s),s.source=F),L.push(s));return I(L),i}return[]}function u(t){var e,i;for(null==t?t=function(){return!0}:et.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),L=et.grep(L,t,!0),i=0;i<G.length;i++)et.isArray(G[i].events)&&(G[i].events=et.grep(G[i].events,t,!0));I(L)}function p(e){return et.isFunction(e)?et.grep(L,e):null!=e?(e+="",et.grep(L,function(t){return t._id==e})):L}function m(t,e){var i,n,s,r={};if(f.eventDataTransform&&(t=f.eventDataTransform(t)),e&&e.eventDataTransform&&(t=e.eventDataTransform(t)),et.extend(r,t),e&&(r.source=e),r._id=t._id||(t.id===undefined?"_fc"+be++:t.id+""),t.className?"string"==typeof t.className?r.className=t.className.split(/\s+/):r.className=t.className:r.className=[],i=t.start||t.date,n=t.end,N(i)&&(i=it.duration(i)),N(n)&&(n=it.duration(n)),t.dow||it.isDuration(i)||it.isDuration(n))r.start=i?it.duration(i):null,r.end=n?it.duration(n):null,r._recurring=!0;else{if(i&&!(i=H.moment(i)).isValid())return!1;n&&((n=H.moment(n)).isValid()||(n=null)),(s=t.allDay)===undefined&&(s=j(e?e.allDayDefault:undefined,f.allDayDefault)),v(i,n,s,r)}return r}function v(t,e,i,n){n.start=t,n.end=e,n.allDay=i,_(n),Ot(n)}function _(t){w(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(f.forceEventDuration?t.end=H.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function w(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=H.applyTimezone(t.start.time(0))),t.end&&!t.end.hasTime()&&(t.end=H.applyTimezone(t.end.time(0))))}function y(t,e,i){var n,s,r,o,a,l,d,h,c,u=[];if(e=e||M,i=i||z,t)if(t._recurring){if(s=t.dow)for(n={},r=0;r<s.length;r++)n[s[r]]=!0;for(o=e.clone().stripTime();o.isBefore(i);)n&&!n[o.day()]||(a=t.start,l=t.end,d=o.clone(),h=null,a&&(d=d.time(a)),l&&(h=o.clone().time(l)),v(d,h,!a&&!l,c=et.extend({},t)),u.push(c)),o.add(1,"days")}else u.push(t);return u}function b(t,i,n){function e(t,e){return n?W(t,e,n):i.allDay?A(t,e):O(t,e)}var s,r,o,a,l={};return(i=i||{}).start||(i.start=t.start.clone()),i.end===undefined&&(i.end=t.end?t.end.clone():null),null==i.allDay&&(i.allDay=t.allDay),_(i),_(s={start:t._start.clone(),end:t._end?t._end.clone():H.getDefaultEventEnd(t._allDay,t._start),allDay:i.allDay}),r=null!==t._end&&null===i.end,o=e(i.start,s.start),a=i.end?e(i.end,s.end).subtract(o):null,et.each(i,function(t,e){h(t)&&e!==undefined&&(l[t]=e)}),{dateDelta:o,durationDelta:a,undo:S(p(t._id),r,i.allDay,o,a,l)}}function S(t,s,r,o,a,l){var d=H.getIsAmbigTimezone(),h=[];return o&&!o.valueOf()&&(o=null),a&&!a.valueOf()&&(a=null),et.each(t,function(t,e){var i,n;i={start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay},et.each(l,function(t){i[t]=e[t]}),_(n={start:e._start,end:e._end,allDay:r}),s?n.end=null:a&&!n.end&&(n.end=H.getDefaultEventEnd(n.allDay,n.start)),o&&(n.start.add(o),n.end&&n.end.add(o)),a&&n.end.add(a),d&&!n.allDay&&(o||a)&&(n.start.stripZone(),n.end&&n.end.stripZone()),et.extend(e,l,n),Ot(e),h.push(function(){et.extend(e,i),Ot(e)})}),function(){for(var t=0;t<h.length;t++)h[t]()}}function x(t){var e,i=f.businessHours,n={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},s=H.getView();return i&&(e=et.extend({},n,"object"==typeof i?i:{})),e?(t&&(e.start=null,e.end=null),y(m(e),s.start,s.end)):[]}function C(t,e){var i=e.source||{};return T(t,j(e.constraint,i.constraint,f.eventConstraint),j(e.overlap,i.overlap,f.eventOverlap),e)}function D(t,e,i){var n;return i&&(n=y(m(et.extend({},i,e)))[0]),n?C(t,n):E(t)}function E(t){return T(t,f.selectConstraint,f.selectOverlap)}function T(t,e,i,n){var s,r,o,a,l,d;if(null!=e){for(s=k(e),r=!1,a=0;a<s.length;a++)if($(s[a],t)){r=!0;break}if(!r)return!1}for(o=H.getPeerEvents(t,n),a=0;a<o.length;a++)if(R(l=o[a],t)){if(!1===i)return!1;if("function"==typeof i&&!i(l,n))return!1;if(n){if(!1===(d=j(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof d&&!d(n,l))return!1}}return!0}function k(t){return"businessHours"===t?x():"object"==typeof t?y(m(t)):p(t)}function $(t,e){var i=t.start.clone().stripZone(),n=H.getEventEnd(t).stripZone();return e.start>=i&&e.end<=n}function R(t,e){var i=t.start.clone().stripZone(),n=H.getEventEnd(t).stripZone();return e.start<n&&e.end>i}var H=this;H.isFetchNeeded=t,H.fetchEvents=e,H.addEventSource=i,H.removeEventSource=s,H.updateEvent=l,H.renderEvent=c,H.removeEvents=u,H.clientEvents=p,H.mutateEvent=b,H.normalizeEventDates=_,H.normalizeEventTimes=w;var M,z,I=H.reportEvents,F={events:[]},G=[F],P=0,Y=0,L=[];et.each((f.events?[f.events]:[]).concat(f.eventSources||[]),function(t,e){var i=n(e);i&&G.push(i)}),H.getBusinessHoursEvents=x,H.isEventSpanAllowed=C,H.isExternalSpanAllowed=D,H.isSelectionSpanAllowed=E,H.getEventCache=function(){return L}}function Ot(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var At=et.fullCalendar={version:"2.6.1",internalApiVersion:3},Wt=At.views={};et.fn.fullCalendar=function(r){var o=Array.prototype.slice.call(arguments,1),a=this;return this.each(function(t,e){var i,n=et(e),s=n.data("fullCalendar");"string"==typeof r?s&&et.isFunction(s[r])&&(i=s[r].apply(s,o),t||(a=i),"destroy"===r&&n.removeData("fullCalendar")):s||(s=new ge(n,r),n.data("fullCalendar",s),s.render())}),a};var Nt=["header","buttonText","buttonIcons","themeButtonIcons"];At.intersectRanges=k,At.applyAll=V,At.debounce=st,At.isInt=J,At.htmlEscape=q,At.cssToStr=Z,At.proxy=K,At.capitaliseFirstLetter=X,At.getOuterRect=d,At.getClientRect=e,At.getContentRect=u,At.getScrollbarWidths=g;var Bt=null;At.intersectRects=y,At.parseFieldSpecs=C,At.compareByFieldSpecs=D,At.compareByFieldSpec=E,At.flexibleCompare=T,At.computeIntervalUnit=$,At.divideRangeByDuration=H,At.divideDurationByDuration=M,At.multiplyDuration=z,At.durationHasTime=I;var Vt=["sun","mon","tue","wed","thu","fri","sat"],jt=["year","month","week","day","hour","minute","second","millisecond"];At.log=function(){var t=window.console;if(t&&t.log)return t.log.apply(t,arguments)},At.warn=function(){var t=window.console;return t&&t.warn?t.warn.apply(t,arguments):At.log.apply(At,arguments)};var qt,Ut,Zt,Xt={}.hasOwnProperty,Qt=/^\s*\d{4}-\d\d$/,Jt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Kt=it.fn,te=et.extend({},Kt);At.moment=function(){return tt(arguments)},At.moment.utc=function(){var t=tt(arguments,!0);return t.hasTime()&&t.utc(),t},At.moment.parseZone=function(){return tt(arguments,!0,!0)},Kt.clone=function(){var t=te.clone.apply(this,arguments);return ot(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},Kt.week=Kt.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?te.isoWeek.apply(this,arguments):te.week.apply(this,arguments)},Kt.time=function(t){if(!this._fullCalendar)return te.time.apply(this,arguments);if(null==t)return it.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,it.isDuration(t)||it.isMoment(t)||(t=it.duration(t));var e=0;return it.isDuration(t)&&(e=24*Math.floor(t.asDays())),this.hours(e+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Kt.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),Ut(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Kt.hasTime=function(){return!this._ambigTime},Kt.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),Ut(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},Kt.hasZone=function(){return!this._ambigZone},Kt.local=function(){var t=this.toArray(),e=this._ambigZone;return te.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&Zt(this,t),this},Kt.utc=function(){return te.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},et.each(["zone","utcOffset"],function(t,e){te[e]&&(Kt[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),te[e].apply(this,arguments)})}),Kt.format=function(t){return this._fullCalendar&&t?dt(this,t):this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.format.apply(this,arguments)},Kt.toISOString=function(){return this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.toISOString.apply(this,arguments)},Kt.isWithin=function(t,e){var i=rt([this,t,e]);return i[0]>=i[1]&&i[0]<i[2]},Kt.isSame=function(t,e){var i;return this._fullCalendar?e?(i=rt([this,t],!0),te.isSame.call(i[0],i[1],e)):(t=At.moment.parseZone(t),te.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):te.isSame.apply(this,arguments)},et.each(["isBefore","isAfter"],function(t,n){Kt[n]=function(t,e){var i;return this._fullCalendar?(i=rt([this,t]),te[n].call(i[0],i[1],e)):te[n].apply(this,arguments)}}),qt="_d"in it()&&"updateOffset"in it,Ut=qt?function(t,e){t._d.setTime(Date.UTC.apply(Date,e)),it.updateOffset(t,!1)}:at,Zt=qt?function(t,e){t._d.setTime(+new Date(e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0,e[6]||0)),it.updateOffset(t,!1)}:at;var ee={t:function(t){return lt(t,"a").charAt(0)},T:function(t){return lt(t,"A").charAt(0)}};At.formatRange=ut;var ie={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ne={};(At.Class=vt).extend=function(){var t,e,i=arguments.length;for(t=0;t<i;t++)e=arguments[t],t<i-1&&wt(this,e);return _t(this,e||{})},vt.mixin=function(t){wt(this,t)};var se=At.Emitter=vt.extend({callbackHash:null,on:function(t,e){return this.getCallbacks(t).add(e),this},off:function(t,e){return this.getCallbacks(t).remove(e),this},trigger:function(t){var e=Array.prototype.slice.call(arguments,1);return this.triggerWith(t,this,e),this},triggerWith:function(t,e,i){return this.getCallbacks(t).fireWith(e,i),this},getCallbacks:function(t){var e;return this.callbackHash||(this.callbackHash={}),(e=this.callbackHash[t])||(e=this.callbackHash[t]=et.Callbacks()),e}}),re=vt.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,e=this.options;this.el=et('<div class="fc-popover"/>').addClass(e.className||"").css({top:0,left:0}).append(e.content).appendTo(e.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),e.autoHide&&et(document).on("mousedown",this.documentMousedownProxy=K(this,"documentMousedown"))},documentMousedown:function(t){this.el&&!et(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),et(document).off("mousedown",this.documentMousedownProxy)},position:function(){var t,e,i,n,s,r=this.options,o=this.el.offsetParent().offset(),a=this.el.outerWidth(),l=this.el.outerHeight(),d=et(window),h=c(this.el);n=r.top||0,s=r.left!==undefined?r.left:r.right!==undefined?r.right-a:0,h.is(window)||h.is(document)?(h=d,e=t=0):(t=(i=h.offset()).top,e=i.left),t+=d.scrollTop(),e+=d.scrollLeft(),!1!==r.viewportConstrain&&(n=Math.min(n,t+h.outerHeight()-l-this.margin),n=Math.max(n,t+this.margin),s=Math.min(s,e+h.outerWidth()-a-this.margin),s=Math.max(s,e+this.margin)),this.el.css({top:n-o.top,left:s-o.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),oe=At.CoordCache=vt.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=et(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?et(t.offsetParent):null},build:function(){var t=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=t.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var t=c(this.els.eq(0));if(!t.is(document))return e(t)},buildElHorizontals:function(){var r=[],o=[];this.els.each(function(t,e){var i=et(e),n=i.offset().left,s=i.outerWidth();r.push(n),o.push(n+s)}),this.lefts=r,this.rights=o},buildElVerticals:function(){var r=[],o=[];this.els.each(function(t,e){var i=et(e),n=i.offset().top,s=i.outerHeight();r.push(n),o.push(n+s)}),this.tops=r,this.bottoms=o},getHorizontalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.lefts,s=this.rights,r=n.length;if(!i||t>=i.left&&t<i.right)for(e=0;e<r;e++)if(t>=n[e]&&t<s[e])return e},getVerticalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.tops,s=this.bottoms,r=n.length;if(!i||t>=i.top&&t<i.bottom)for(e=0;e<r;e++)if(t>=n[e]&&t<s[e])return e},getLeftOffset:function(t){return this.ensureBuilt(),this.lefts[t]},getLeftPosition:function(t){return this.ensureBuilt(),this.lefts[t]-this.origin.left},getRightOffset:function(t){return this.ensureBuilt(),this.rights[t]},getRightPosition:function(t){return this.ensureBuilt(),this.rights[t]-this.origin.left},getWidth:function(t){return this.ensureBuilt(),this.rights[t]-this.lefts[t]},getTopOffset:function(t){return this.ensureBuilt(),this.tops[t]},getTopPosition:function(t){return this.ensureBuilt(),this.tops[t]-this.origin.top},getBottomOffset:function(t){return this.ensureBuilt(),this.bottoms[t]},getBottomPosition:function(t){return this.ensureBuilt(),this.bottoms[t]-this.origin.top},getHeight:function(t){return this.ensureBuilt(),this.bottoms[t]-this.tops[t]}}),ae=At.DragListener=vt.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl},mousedown:function(t){w(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(t){var e;this.isListening||(t&&this.options.scroll&&((e=c(et(t.target))).is(window)||e.is(document)||(this.scrollEl=e,this.scrollHandlerProxy=st(K(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),et(document).on("mousemove",this.mousemoveProxy=K(this,"mousemove")).on("mouseup",this.mouseupProxy=K(this,"mouseup")).on("selectstart",this.preventDefault),t?(this.originX=t.pageX,this.originY=t.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(t))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,i=t.pageX-this.originX,n=t.pageY-this.originY;this.isDragging||(e=this.options.distance||1)*e<=i*i+n*n&&this.startDrag(t),this.isDragging&&this.drag(i,n,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,i){this.trigger("drag",t,e,i),this.updateScroll(i)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(t){this.stopDrag(t),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),et(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(t))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?d(t):null},updateScroll:function(t){var e,i,n,s,r=this.scrollSensitivity,o=this.scrollBounds,a=0,l=0;o&&(e=(r-(t.pageY-o.top))/r,i=(r-(o.bottom-t.pageY))/r,n=(r-(t.pageX-o.left))/r,s=(r-(o.right-t.pageX))/r,0<=e&&e<=1?a=e*this.scrollSpeed*-1:0<=i&&i<=1&&(a=i*this.scrollSpeed),0<=n&&n<=1?l=n*this.scrollSpeed*-1:0<=s&&s<=1&&(l=s*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(K(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):0<this.scrollTopVel&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),le=ae.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(t,e){ae.call(this,e),this.component=t},listenStart:function(t){var e,i,n,s=this.subjectEl;ae.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(n=i={left:t.pageX,top:t.pageY},s&&(n=b(n,e=d(s))),this.origHit=this.queryHit(n.left,n.top),s&&this.options.subjectCenter&&(this.origHit&&(e=y(this.origHit,e)||e),n=S(e)),this.coordAdjust=x(n,i)):(this.origHit=null,this.coordAdjust=null)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},dragStart:function(t){var e;ae.prototype.dragStart.apply(this,arguments),(e=this.queryHit(t.pageX,t.pageY))&&this.hitOver(e)},drag:function(t,e,i){var n;ae.prototype.drag.apply(this,arguments),yt(n=this.queryHit(i.pageX,i.pageY),this.hit)||(this.hit&&this.hitOut(),n&&this.hitOver(n))},dragStop:function(){this.hitDone(),ae.prototype.dragStop.apply(this,arguments)},hitOver:function(t){var e=yt(t,this.origHit);this.hit=t,this.trigger("hitOver",this.hit,e,this.origHit)},hitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.hitDone(),this.hit=null)},hitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},listenStop:function(){ae.prototype.listenStop.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},scrollStop:function(){ae.prototype.scrollStop.apply(this,arguments),this.computeCoords()},queryHit:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.component.queryHit(t,e)}}),de=vt.extend({options:null,
sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,e){this.options=e=e||{},this.sourceEl=t,this.parentEl=e.parentEl?et(e.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.mouseY0=t.pageY,this.mouseX0=t.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),et(document).on("mousemove",this.mousemoveProxy=K(this,"mousemove")))},stop:function(t,e){function i(){this.isAnimating=!1,n.removeElement(),this.top0=this.left0=null,e&&e()}var n=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,et(document).off("mousemove",this.mousemoveProxy),t&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),he=At.Grid=vt.extend({view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL"),this.elsByFill={},this.externalDragStartProxy=K(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){this.start=t.start.clone(),this.end=t.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,e,i=this.view;this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),null==(t=i.opt("displayEventTime"))&&(t=this.computeDisplayEventTime()),null==(e=i.opt("displayEventEnd"))&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},spanToSegs:function(){},diffDates:function(t,e){return this.largeUnit?W(t,e,this.largeUnit):O(t,e)},prepareHits:function(){},releaseHits:function(){},queryHit:function(){},getHitSpan:function(){},getHitEl:function(){},setElement:function(t){var e=this;(this.el=t).on("mousedown",function(t){et(t.target).is(".fc-event-container *, .fc-more")||et(t.target).closest(".fc-popover").length||e.dayMousedown(t)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){et(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){et(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var n,s,r=this,e=this.view,o=e.opt("selectable");new le(this,{scroll:e.opt("dragScroll"),dragStart:function(){e.unselect()},hitOver:function(t,e,i){i&&(n=e?t:null,o&&((s=r.computeSelection(r.getHitSpan(i),r.getHitSpan(t)))?r.renderSelection(s):!1===s&&p()))},hitOut:function(){s=n=null,r.unrenderSelection(),f()},listenStop:function(t){n&&e.triggerDayClick(r.getHitSpan(n),r.getHitEl(n),t),s&&e.reportSelection(s,t),f()}}).mousedown(t)},renderEventLocationHelper:function(t,e){var i=this.fabricateHelperEvent(t,e);this.renderHelper(i,e)},fabricateHelperEvent:function(t,e){var i=e?nt(e.event):{};return i.start=t.start.clone(),i.end=t.end?t.end.clone():null,i.allDay=null,this.view.calendar.normalizeEventDates(i),i.className=(i.className||[]).concat("fc-helper"),e||(i.editable=!1),i},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(t,e){var i=this.computeSelectionSpan(t,e);return!(i&&!this.view.calendar.isSelectionSpanAllowed(i))&&i},computeSelectionSpan:function(t,e){var i=[t.start,t.end,e.start,e.end];return i.sort(Q),{start:i[0].clone(),end:i[3].clone()}},renderHighlight:function(t){this.renderFill("highlight",this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},renderFill:function(){},unrenderFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(t,s){var e,r=this,o=this[t+"SegEl"],i="",a=[];if(s.length){for(e=0;e<s.length;e++)i+=this.fillSegHtml(t,s[e]);et(i).each(function(t,e){var i=s[t],n=et(e);o&&(n=o.call(r,i,n)),n&&(n=et(n)).is(r.fillSegTag)&&(i.el=n,a.push(i))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var i=this[t+"SegClasses"],n=this[t+"SegCss"],s=i?i.call(this,e):[],r=Z(n?n.call(this,e):{});return"<"+this.fillSegTag+(s.length?' class="'+s.join(" ")+'"':"")+(r?' style="'+r+'"':"")+" />"},getDayClasses:function(t){var e=this.view,i=e.calendar.getNow(),n=["fc-"+Vt[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&n.push("fc-other-month"),t.isSame(i,"day")?n.push("fc-today",e.highlightStateClass):t<i?n.push("fc-past"):n.push("fc-future"),n}});he.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)(St(t[e])?i:n).push(t[e]);this.segs=[].concat(this.renderBgEvents(i),this.renderFgEvents(n))},renderBgEvents:function(t){var e=this.eventsToSegs(t);return this.renderBgSegs(e)||e},renderFgEvents:function(t){var e=this.eventsToSegs(t);return this.renderFgSegs(e)||e},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(s,t){var e,r=this.view,i="",o=[];if(s.length){for(e=0;e<s.length;e++)i+=this.fgSegHtml(s[e],t);et(i).each(function(t,e){var i=s[t],n=r.resolveEventEl(i.event,et(e));n&&(n.data("fc-seg",i),i.el=n,o.push(i))})}return o},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,i=e.source||{};return["fc-bgevent"].concat(e.className,i.className||[])},bgEventSegCss:function(t){return{"background-color":this.getSegSkinCss(t)["background-color"]}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var n=this,i=this.view;et.each({mouseenter:function(t,e){n.triggerSegMouseover(t,e)},mouseleave:function(t,e){n.triggerSegMouseout(t,e)},click:function(t,e){return i.trigger("eventClick",this,t.event,e)},mousedown:function(t,e){et(e.target).is(".fc-resizer")&&i.isEventResizable(t.event)?n.segResizeMousedown(t,e,et(e.target).is(".fc-start-resizer")):i.isEventDraggable(t.event)&&n.segDragMousedown(t,e)}},function(t,i){n.el.on(t,".fc-event-container > *",function(t){var e=et(this).data("fc-seg");if(e&&!n.isDraggingSeg&&!n.isResizingSeg)return i.call(this,e,t)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(n,t){var s,r=this,o=this.view,a=o.calendar,e=n.el,l=n.event,d=new de(n.el,{parentEl:o.el,opacity:o.opt("dragOpacity"),revertDuration:o.opt("dragRevertDuration"),zIndex:2});new le(o,{distance:5,scroll:o.opt("dragScroll"),subjectEl:e,subjectCenter:!0,listenStart:function(t){d.hide(),d.start(t)},dragStart:function(t){r.triggerSegMouseout(n,t),r.segDragStart(n,t),o.hideEvent(l)},hitOver:function(t,e,i){n.hit&&(i=n.hit),(s=r.computeEventDrop(i.component.getHitSpan(i),t.component.getHitSpan(t),l))&&!a.isEventSpanAllowed(r.eventToSpan(s),l)&&(p(),s=null),s&&o.renderDrag(s,n)?d.hide():d.show(),e&&(s=null)},hitOut:function(){o.unrenderDrag(),d.show(),s=null},hitDone:function(){f()},dragStop:function(t){d.stop(!s,function(){o.unrenderDrag(),o.showEvent(l),r.segDragStop(n,t),s&&o.reportEventDrop(l,s,this.largeUnit,e,t)})},listenStop:function(){d.stop()}}).mousedown(t)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,i){var n,s,r=this.view.calendar,o=t.start,a=e.start;return o.hasTime()===a.hasTime()?(n=this.diffDates(a,o),i.allDay&&I(n)?(s={start:i.start.clone(),end:r.getEventEnd(i),allDay:!1},r.normalizeEventTimes(s)):s={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay},s.start.add(n),s.end&&s.end.add(n)):s={start:a.clone(),end:null,allDay:!a.hasTime()},s},applyDragOpacity:function(t){var i=this.view.opt("dragOpacity");null!=i&&t.each(function(t,e){e.style.opacity=i})},externalDragStart:function(t,e){var i,n,s=this.view;s.opt("droppable")&&(i=et((e?e.item:null)||t.target),n=s.opt("dropAccept"),(et.isFunction(n)?n.call(i[0],i):i.is(n))&&(this.isDraggingExternal||this.listenToExternalDrag(i,t,e)))},listenToExternalDrag:function(t,e,i){var n,s=this,r=this.view.calendar,o=Tt(t);new le(this,{listenStart:function(){s.isDraggingExternal=!0},hitOver:function(t){(n=s.computeExternalDrop(t.component.getHitSpan(t),o))&&!r.isExternalSpanAllowed(s.eventToSpan(n),n,o.eventProps)&&(p(),n=null),n&&s.renderDrag(n)},hitOut:function(){n=null},hitDone:function(){f(),s.unrenderDrag()},dragStop:function(){n&&s.view.reportExternalDrop(o,n,t,e,i)},listenStop:function(){s.isDraggingExternal=!1}}).startDrag(e)},computeExternalDrop:function(t,e){var i={start:this.view.calendar.applyTimezone(t.start),end:null};return e.startTime&&!i.start.hasTime()&&i.start.time(e.startTime),e.duration&&(i.end=i.start.clone().add(e.duration)),i},renderDrag:function(){},unrenderDrag:function(){},segResizeMousedown:function(r,t,o){var a,l=this,d=this.view,h=d.calendar,e=r.el,c=r.event,u=h.getEventEnd(c);new le(this,{distance:5,scroll:d.opt("dragScroll"),subjectEl:e,dragStart:function(t){l.triggerSegMouseout(r,t),l.segResizeStart(r,t)},hitOver:function(t,e,i){var n=l.getHitSpan(i),s=l.getHitSpan(t);(a=o?l.computeEventStartResize(n,s,c):l.computeEventEndResize(n,s,c))&&(h.isEventSpanAllowed(l.eventToSpan(a),c)?a.start.isSame(c.start)&&a.end.isSame(u)&&(a=null):(p(),a=null)),a&&(d.hideEvent(c),l.renderEventResize(a,r))},hitOut:function(){a=null},hitDone:function(){l.unrenderEventResize(),d.showEvent(c),f()},dragStop:function(t){l.segResizeStop(r,t),a&&d.reportEventResize(c,a,this.largeUnit,e,t)}}).mousedown(t)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,i){return this.computeEventResize("start",t,e,i)},computeEventEndResize:function(t,e,i){return this.computeEventResize("end",t,e,i)},computeEventResize:function(t,e,i,n){var s,r,o=this.view.calendar,a=this.diffDates(i[t],e[t]);return(s={start:n.start.clone(),end:o.getEventEnd(n),allDay:n.allDay}).allDay&&I(a)&&(s.allDay=!1,o.normalizeEventTimes(s)),s[t].add(a),s.start.isBefore(s.end)||(r=this.minResizeDuration||(n.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration),"start"==t?s.start=s.end.clone().subtract(r):s.end=s.start.clone().add(r)),s},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(t,e,i){return null==e&&(e=this.eventTimeFormat),null==i&&(i=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?i&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,i){var n=t.event,s=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);return e&&s.push("fc-draggable"),i&&s.push("fc-resizable"),s},getSegSkinCss:function(t){var e=t.event,i=this.view,n=e.source||{},s=e.color,r=n.color,o=i.opt("eventColor");return{"background-color":e.backgroundColor||s||n.backgroundColor||r||i.opt("eventBackgroundColor")||o,"border-color":e.borderColor||s||n.borderColor||r||i.opt("eventBorderColor")||o,color:e.textColor||n.textColor||i.opt("eventTextColor")}},eventToSegs:function(t){return this.eventsToSegs([t])},eventToSpan:function(t){return this.eventToSpans(t)[0]},eventToSpans:function(t){var e=this.eventToRange(t);return this.eventRangeToSpans(e,t)},eventsToSegs:function(t,s){var r=this,e=Dt(t),o=[];return et.each(e,function(t,e){var i,n=[];for(i=0;i<e.length;i++)n.push(r.eventToRange(e[i]));if(xt(e[0]))for(n=r.invertRanges(n),i=0;i<n.length;i++)o.push.apply(o,r.eventRangeToSegs(n[i],e[0],s));else for(i=0;i<n.length;i++)o.push.apply(o,r.eventRangeToSegs(n[i],e[i],s))}),o},eventToRange:function(t){return{start:t.start.clone().stripZone(),end:(t.end?t.end.clone():this.view.calendar.getDefaultEventEnd(null!=t.allDay?t.allDay:!t.start.hasTime(),t.start)).stripZone()}},eventRangeToSegs:function(t,e,i){var n,s=this.eventRangeToSpans(t,e),r=[];for(n=0;n<s.length;n++)r.push.apply(r,this.eventSpanToSegs(s[n],e,i));return r},eventRangeToSpans:function(t){return[et.extend({},t)]},eventSpanToSegs:function(t,e,i){var n,s,r=i?i(t):this.spanToSegs(t);for(n=0;n<r.length;n++)(s=r[n]).event=e,s.eventStartMS=+t.start,s.eventDurationMS=t.end-t.start;return r},invertRanges:function(t){var e,i,n=this.view,s=n.start.clone(),r=n.end.clone(),o=[],a=s;for(t.sort(Et),e=0;e<t.length;e++)(i=t[e]).start>a&&o.push({start:a,end:i.start}),a=i.end;return a<r&&o.push({start:a,end:r}),o},sortEventSegs:function(t){t.sort(K(this,"compareEventSegs"))},compareEventSegs:function(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||D(t.event,e.event,this.view.eventOrderSpecs)}}),At.isBgEvent=St,At.dataAttrPrefix="";var ce=At.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var t,e,i,n=this.view,s=this.start.clone(),r=-1,o=[],a=[];s.isBefore(this.end);)n.isHiddenDay(s)?o.push(r+.5):(r++,o.push(r),a.push(s.clone())),s.add(1,"days");if(this.breakOnWeeks){for(e=a[0].day(),t=1;t<a.length&&a[t].day()!=e;t++);i=Math.ceil(a.length/t)}else i=1,t=a.length;this.dayDates=a,this.dayIndices=o,this.daysPerRow=t,this.rowCnt=i,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(t,e){return this.dayDates[this.getCellDayIndex(t,e)].clone()},getCellRange:function(t,e){var i=this.getCellDate(t,e),n=i.clone().add(1,"days");return{start:i,end:n}},getCellDayIndex:function(t,e){return t*this.daysPerRow+this.getColDayIndex(e)},getColDayIndex:function(t){return this.isRTL?this.colCnt-1-t:t},getDateDayIndex:function(t){var e=this.dayIndices,i=t.diff(this.start,"days");return i<0?e[0]-1:i>=e.length?e[e.length-1]+1:e[i]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(t){var e,i,n,s,r,o=this.daysPerRow,a=this.view.computeDayRange(t),l=this.getDateDayIndex(a.start),d=this.getDateDayIndex(a.end.clone().subtract(1,"days")),h=[];for(e=0;e<this.rowCnt;e++)n=(i=e*o)+o-1,s=Math.max(l,i),r=Math.min(d,n),(s=Math.ceil(s))<=(r=Math.floor(r))&&h.push({row:e,firstRowDayIndex:s-i,lastRowDayIndex:r-i,isStart:s===l,isEnd:r===d});return h},sliceRangeByDay:function(t){var e,i,n,s,r,o,a=this.daysPerRow,l=this.view.computeDayRange(t),d=this.getDateDayIndex(l.start),h=this.getDateDayIndex(l.end.clone().subtract(1,"days")),c=[];for(e=0;e<this.rowCnt;e++)for(n=(i=e*a)+a-1,s=i;s<=n;s++)r=Math.max(d,s),o=Math.min(h,s),(r=Math.ceil(r))<=(o=Math.floor(o))&&c.push({row:e,firstRowDayIndex:r-i,lastRowDayIndex:o-i,isStart:r===d,isEnd:o===h});return c},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var t,e,i=[];for(t=0;t<this.colCnt;t++)e=this.getCellDate(0,t),i.push(this.renderHeadDateCellHtml(e));return i.join("")},renderHeadDateCellHtml:function(t,e,i){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Vt[t.day()]+'"'+(1==this.rowCnt?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(1<e?' colspan="'+e+'"':"")+(i?" "+i:"")+">"+q(t.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(t))+this.renderBgCellsHtml(t)+(this.isRTL?this.renderBgIntroHtml(t):"")+"</tr>"},renderBgIntroHtml:function(){return this.renderIntroHtml()},renderBgCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderBgCellHtml(i));return n.join("")},renderBgCellHtml:function(t,e){var i=this.view,n=this.getDayClasses(t);return n.unshift("fc-day",i.widgetContentClass),'<td class="'+n.join(" ")+'" data-date="'+t.format("YYYY-MM-DD")+'"'+(e?" "+e:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(t){var e=this.renderIntroHtml();e&&(this.isRTL?t.append(e):t.prepend(e))}},ue=At.DayGrid=he.extend(ce,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(t){var e,i,n=this.view,s=this.rowCnt,r=this.colCnt,o="";for(e=0;e<s;e++)o+=this.renderDayRowHtml(e,t);for(this.el.html(o),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new oe({els:this.rowEls,isVertical:!0}),this.colCoordCache=new oe({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),e=0;e<s;e++)for(i=0;i<r;i++)n.trigger("dayRender",null,this.getCellDate(e,i),this.getCellEl(e,i))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},renderDayRowHtml:function(t,e){var i=["fc-row","fc-week",this.view.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(t))+this.renderNumberCellsHtml(t)+(this.isRTL?this.renderNumberIntroHtml(t):"")+"</tr>"},renderNumberIntroHtml:function(){return this.renderIntroHtml()},renderNumberCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderNumberCellHtml(i));return n.join("")},renderNumberCellHtml:function(t){var e;return this.view.dayNumbersVisible?((e=this.getDayClasses(t)).unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+t.format()+'">'+t.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(t){var e,i,n=this.sliceRangeByRow(t);for(e=0;e<n.length;e++)i=n[e],this.isRTL?(i.leftCol=this.daysPerRow-1-i.lastRowDayIndex,i.rightCol=this.daysPerRow-1-i.firstRowDayIndex):(i.leftCol=i.firstRowDayIndex,i.rightCol=i.lastRowDayIndex);return n},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(t,e){var i=this.colCoordCache.getHorizontalIndex(t),n=this.rowCoordCache.getVerticalIndex(e);if(null!=n&&null!=i)return this.getCellHit(n,i)},getHitSpan:function(t){return this.getCellRange(t.row,t.col)},getHitEl:function(t){return this.getCellEl(t.row,t.col)},getCellHit:function(t,e){return{row:t,col:e,component:this,left:this.colCoordCache.getLeftOffset(e),right:this.colCoordCache.getRightOffset(e),top:this.rowCoordCache.getTopOffset(t),bottom:this.rowCoordCache.getBottomOffset(t)}},getCellEl:function(t,e){return this.cellEls.eq(t*this.colCnt+e)},renderDrag:function(t,e){if(this.renderHighlight(this.eventToSpan(t)),e&&!e.el.closest(this.el).length)return this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(t,e){this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,r){var o,a=[],e=this.eventToSegs(t);e=this.renderFgSegEls(e),o=this.renderSegRows(e),this.rowEls.each(function(t,e){var i,n=et(e),s=et('<div class="fc-helper-skeleton"><table/></div>');i=r&&r.row===t?r.el.position().top:n.find(".fc-content-skeleton tbody").position().top,s.css("top",i).find("table").append(o[t].tbodyEl),n.append(s),a.push(s[0])}),this.helperEls=et(a)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,e,i){var n,s,r,o=[];for(e=this.renderFillSegEls(t,e),n=0;n<e.length;n++)s=e[n],r=this.renderFillRow(t,s,i),this.rowEls.eq(s.row).append(r),o.push(r[0]);return this.elsByFill[t]=et(o),e},renderFillRow:function(t,e,i){var n,s,r=this.colCnt,o=e.leftCol,a=e.rightCol+1;return i=i||t.toLowerCase(),s=(n=et('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>')).find("tr"),0<o&&s.append('<td colspan="'+o+'"/>'),s.append(e.el.attr("colspan",a-o)),a<r&&s.append('<td colspan="'+(r-a)+'"/>'),this.bookendCells(s),n}});ue.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),he.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return he.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var e=et.grep(t,function(t){return t.event.allDay});return he.prototype.renderBgSegs.call(this,e)},renderFgSegs:function(t){var i;return t=this.renderFgSegEls(t),i=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,e){et(e).find(".fc-content-skeleton > table").append(i[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,i,n=[];for(e=this.groupSegRows(t),i=0;i<e.length;i++)n.push(this.renderSegRow(i,e[i]));return n},fgSegHtml:function(t,e){var i,n,s=this.view,r=t.event,o=s.isEventDraggable(r),a=!e&&r.allDay&&t.isStart&&s.isEventResizableFromStart(r),l=!e&&r.allDay&&t.isEnd&&s.isEventResizableFromEnd(r),d=this.getSegClasses(t,o,a||l),h=Z(this.getSegSkinCss(t)),c="";return d.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(i=this.getEventTimeText(r))&&(c='<span class="fc-time">'+q(i)+"</span>"),n='<span class="fc-title">'+(q(r.title||"")||"&nbsp;")+"</span>",'<a class="'+d.join(" ")+'"'+(r.url?' href="'+q(r.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(this.isRTL?n+" "+c:c+" "+n)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,e){function i(t){for(;r<t;)(d=(m[n-1]||[])[r])?d.attr("rowspan",parseInt(d.attr("rowspan")||1,10)+1):(d=et("<td/>"),o.append(d)),g[n][r]=d,m[n][r]=d,r++}var n,s,r,o,a,l,d,h=this.colCnt,c=this.buildSegLevels(e),u=Math.max(1,c.length),p=et("<tbody/>"),f=[],g=[],m=[];for(n=0;n<u;n++){if(s=c[n],r=0,o=et("<tr/>"),f.push([]),g.push([]),m.push([]),s)for(a=0;a<s.length;a++){for(i((l=s[a]).leftCol),d=et('<td class="fc-event-container"/>').append(l.el),l.leftCol!=l.rightCol?d.attr("colspan",l.rightCol-l.leftCol+1):m[n][r]=d;r<=l.rightCol;)g[n][r]=d,f[n][r]=l,r++;o.append(d)}i(h),this.bookendCells(o),p.append(o)}return{row:t,tbodyEl:p,cellMatrix:g,segMatrix:f,segLevels:c,segs:e}},buildSegLevels:function(t){var e,i,n,s=[];for(this.sortEventSegs(t),e=0;e<t.length;e++){for(i=t[e],n=0;n<s.length&&kt(i,s[n]);n++);(s[i.level=n]||(s[n]=[])).push(i)}for(n=0;n<s.length;n++)s[n].sort($t);return s},groupSegRows:function(t){var e,i=[];for(e=0;e<this.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i}}),ue.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,i,n=this.rowStructs||[];for(e=0;e<n.length;e++)this.unlimitRow(e),!1!==(i=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)))&&this.limitRow(e,i)},computeRowLevelLimit:function(t){function e(t,e){s=Math.max(s,et(e).outerHeight())}var i,n,s,r=this.rowEls.eq(t).height(),o=this.rowStructs[t].tbodyEl.children();for(i=0;i<o.length;i++)if(n=o.eq(i).removeClass("fc-limited"),s=0,n.find("> td > :first-child").each(e),n.position().top+s>r)return i;return!1},limitRow:function(e,i){function t(t){for(;b<t;)(l=_.getCellSegs(e,b,i)).length&&(c=s[i-1][b],v=_.renderMoreLink(e,b,l),m=et("<div/>").append(v),c.append(m),y.push(m[0])),b++}var n,s,r,o,a,l,d,h,c,u,p,f,g,m,v,_=this,w=this.rowStructs[e],y=[],b=0;if(i&&i<w.segLevels.length){for(n=w.segLevels[i-1],s=w.cellMatrix,r=w.tbodyEl.children().slice(i).addClass("fc-limited").get(),o=0;o<n.length;o++){for(t((a=n[o]).leftCol),h=[],d=0;b<=a.rightCol;)l=this.getCellSegs(e,b,i),h.push(l),d+=l.length,b++;if(d){for(u=(c=s[i-1][a.leftCol]).attr("rowspan")||1,p=[],f=0;f<h.length;f++)g=et('<td class="fc-more-cell"/>').attr("rowspan",u),l=h[f],v=this.renderMoreLink(e,a.leftCol+f,[a].concat(l)),m=et("<div/>").append(v),g.append(m),p.push(g[0]),y.push(g[0]);c.addClass("fc-limited").after(et(p)),r.push(c[0])}}t(this.colCnt),w.moreEls=et(y),w.limitedEls=et(r)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(l,d,h){var c=this,u=this.view;return et('<a class="fc-more"/>').text(this.getMoreLinkText(h.length)).on("click",function(t){var e=u.opt("eventLimitClick"),i=c.getCellDate(l,d),n=et(this),s=c.getCellEl(l,d),r=c.getCellSegs(l,d),o=c.resliceDaySegs(r,i),a=c.resliceDaySegs(h,i);"function"==typeof e&&(e=u.trigger("eventLimitClick",null,{date:i,dayEl:s,moreEl:n,segs:o,hiddenSegs:a},t)),"popover"===e?c.showSegPopover(l,d,n,o):"string"==typeof e&&u.calendar.zoomTo(i,e)})},showSegPopover:function(t,e,i,n){var s,r,o=this,a=this.view,l=i.parent();s=1==this.rowCnt?a.el:this.rowEls.eq(t),r={className:"fc-more-popover",content:this.renderSegPopoverContent(t,e,n),parentEl:this.el,top:s.offset().top,autoHide:!0,viewportConstrain:a.opt("popoverViewportConstrain"),hide:function(){o.segPopover.removeElement(),o.segPopover=null,o.popoverSegs=null}},this.isRTL?r.right=l.offset().left+l.outerWidth()+1:r.left=l.offset().left-1,this.segPopover=new re(r),this.segPopover.show()},renderSegPopoverContent:function(t,e,i){var n,s=this.view,r=s.opt("theme"),o=this.getCellDate(t,e).format(s.opt("dayPopoverFormat")),a=et('<div class="fc-header '+s.widgetHeaderClass+'"><span class="fc-close '+(r?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+q(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+s.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(i=this.renderFgSegEls(i,!0),this.popoverSegs=i,n=0;n<i.length;n++)this.prepareHits(),i[n].hit=this.getCellHit(t,e),this.releaseHits(),l.append(i[n].el);return a},resliceDaySegs:function(t,e){var i=et.map(t,function(t){return t.event}),n=e.clone(),s=n.clone().add(1,"days"),r={start:n,end:s};return t=this.eventsToSegs(i,function(t){var e=k(t,r);return e?[e]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e,i){for(var n,s=this.rowStructs[t].segMatrix,r=i||0,o=[];r<s.length;)(n=s[r][e])&&o.push(n),r++;return o}});var pe=At.TimeGrid=he.extend(ce,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){he.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.colCoordCache=new oe({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new oe({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var t,e,i,n=this.view,s=this.isRTL,r="",o=it.duration(+this.minTime);o<this.maxTime;)t=this.start.clone().time(o),e=J(M(o,this.labelInterval)),i='<td class="fc-axis fc-time '+n.widgetContentClass+'" '+n.axisStyleAttr()+">"+(e?"<span>"+q(t.format(this.labelFormat))+"</span>":"")+"</td>",r+='<tr data-time="'+t.format("HH:mm:ss")+'"'+(e?"":' class="fc-minor"')+">"+(s?"":i)+'<td class="'+n.widgetContentClass+'"/>'+(s?i:"")+"</tr>",o.add(this.slotDuration);return r},processOptions:function(){var t,e=this.view,i=e.opt("slotDuration"),n=e.opt("snapDuration");i=it.duration(i),n=n?it.duration(n):i,this.slotDuration=i,this.snapDuration=n,this.snapsPerSlot=i/n,this.minResizeDuration=n,this.minTime=it.duration(e.opt("minTime")),this.maxTime=it.duration(e.opt("maxTime")),t=e.opt("slotLabelFormat"),et.isArray(t)&&(t=t[t.length-1]),this.labelFormat=t||e.opt("axisFormat")||e.opt("smallTimeFormat"),t=e.opt("slotLabelInterval"),this.labelInterval=t?it.duration(t):this.computeLabelInterval(i)},computeLabelInterval:function(t){var e,i,n;for(e=$e.length-1;0<=e;e--)if(J(n=M(i=it.duration($e[e]),t))&&1<n)return i;return it.duration(t)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(t,e){var i=this.snapsPerSlot,n=this.colCoordCache,s=this.slatCoordCache,r=n.getHorizontalIndex(t),o=s.getVerticalIndex(e);if(null!=r&&null!=o){var a=s.getTopOffset(o),l=s.getHeight(o),d=(e-a)/l,h=Math.floor(d*i),c=a+h/i*l,u=a+(h+1)/i*l;return{col:r,snap:o*i+h,component:this,left:n.getLeftOffset(r),right:n.getRightOffset(r),top:c,bottom:u}}},getHitSpan:function(t){var e,i=this.getCellDate(0,t.col),n=this.computeSnapTime(t.snap);return i.time(n),e=i.clone().add(this.snapDuration),{start:i,end:e}},getHitEl:function(t){return this.colEls.eq(t.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(t){return it.duration(this.minTime+this.snapDuration*t)},spanToSegs:function(t){var e,i=this.sliceRangeByTimes(t);for(e=0;e<i.length;e++)this.isRTL?i[e].col=this.daysPerRow-1-i[e].dayIndex:i[e].col=i[e].dayIndex;return i},sliceRangeByTimes:function(t){var e,i,n,s=[];for(i=0;i<this.daysPerRow;i++)(e=k(t,{start:(n=this.dayDates[i].clone()).clone().time(this.minTime),end:n.clone().time(this.maxTime)}))&&(e.dayIndex=i,s.push(e));return s},updateSize:function(t){
this.slatCoordCache.build(),t&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},computeDateTop:function(t,e){return this.computeTimeTop(it.duration(t-e.clone().stripTime()))},computeTimeTop:function(t){var e,i,n=this.slatEls.length,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(n,s),e=Math.floor(s),i=s-(e=Math.min(e,n-1)),this.slatCoordCache.getTopPosition(e)+this.slatCoordCache.getHeight(e)*i},renderDrag:function(t,e){if(e){this.renderEventLocationHelper(t,e);for(var i=0;i<this.helperSegs.length;i++)this.applyDragOpacity(this.helperSegs[i].el);return!0}this.renderHighlight(this.eventToSpan(t))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(t,e){this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(t,e){this.renderHelperSegs(this.eventToSegs(t),e)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(),e=this.eventsToSegs(t);this.renderBusinessSegs(e)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){var e,i=this.spanToSegs({start:t,end:t}),n=this.computeDateTop(t,t),s=[];for(e=0;e<i.length;e++)s.push(et('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",n).appendTo(this.colContainerEls.eq(i[e].col))[0]);0<i.length&&s.push(et('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",n).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=et(s)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderEventLocationHelper(t):this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(t){this.renderHighlightSegs(this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});pe.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var t,e,i="";for(t=0;t<this.colCnt;t++)i+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';e=et('<div class="fc-content-skeleton"><table><tr>'+i+"</tr></table></div>"),this.colContainerEls=e.find(".fc-content-col"),this.helperContainerEls=e.find(".fc-helper-container"),this.fgContainerEls=e.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=e.find(".fc-bgevent-container"),this.highlightContainerEls=e.find(".fc-highlight-container"),this.businessContainerEls=e.find(".fc-business-container"),this.bookendCells(e.find("tr")),this.el.append(e)},renderFgSegs:function(t){return t=this.renderFgSegsIntoContainers(t,this.fgContainerEls),this.fgSegs=t},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,e){var i,n,s;for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),i=0;i<t.length;i++)n=t[i],e&&e.col===n.col&&(s=e.el,n.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")}));this.helperSegs=t},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(t){return t=this.renderFillSegEls("bgEvent",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.bgContainerEls),this.bgSegs=t},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(t){t=this.renderFillSegEls("highlight",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.highlightContainerEls),this.highlightSegs=t},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(t){t=this.renderFillSegEls("businessHours",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.businessContainerEls),this.businessSegs=t},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(t){var e,i=[];for(e=0;e<this.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i},attachSegsByCol:function(t,e){var i,n,s;for(i=0;i<this.colCnt;i++)for(n=t[i],s=0;s<n.length;s++)e.eq(i).append(n[s].el)},unrenderNamedSegs:function(t){var e,i=this[t];if(i){for(e=0;e<i.length;e++)i[e].el.remove();this[t]=null}},renderFgSegsIntoContainers:function(t,e){var i,n;for(t=this.renderFgSegEls(t),i=this.groupSegsByCol(t),n=0;n<this.colCnt;n++)this.updateFgSegCoords(i[n]);return this.attachSegsByCol(i,e),t},fgSegHtml:function(t,e){var i,n,s,r=this.view,o=t.event,a=r.isEventDraggable(o),l=!e&&t.isStart&&r.isEventResizableFromStart(o),d=!e&&t.isEnd&&r.isEventResizableFromEnd(o),h=this.getSegClasses(t,a,l||d),c=Z(this.getSegSkinCss(t));return h.unshift("fc-time-grid-event","fc-v-event"),r.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),s=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(o),n=this.getEventTimeText(o,"LT"),s=this.getEventTimeText(o,null,!1)),'<a class="'+h.join(" ")+'"'+(o.url?' href="'+q(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+q(s)+'" data-full="'+q(n)+'"><span>'+q(i)+"</span></div>":"")+(o.title?'<div class="fc-title">'+q(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(t){this.computeSegVerticals(t),this.assignSegVerticals(t)},computeSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start)},assignSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateSegVerticalCss(i))},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},updateFgSegCoords:function(t){this.computeSegVerticals(t),this.computeFgSegHorizontals(t),this.assignSegVerticals(t),this.assignFgSegHorizontals(t)},computeFgSegHorizontals:function(t){var e,i,n;if(this.sortEventSegs(t),Ht(e=Rt(t)),i=e[0]){for(n=0;n<i.length;n++)Mt(i[n]);for(n=0;n<i.length;n++)this.computeFgSegForwardBack(i[n],0,0)}},computeFgSegForwardBack:function(t,e,i){var n,s=t.forwardSegs;if(t.forwardCoord===undefined)for(s.length?(this.sortForwardSegs(s),this.computeFgSegForwardBack(s[0],e+1,i),t.forwardCoord=s[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),n=0;n<s.length;n++)this.computeFgSegForwardBack(s[n],0,t.forwardCoord)},sortForwardSegs:function(t){t.sort(K(this,"compareForwardSegs"))},compareForwardSegs:function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareEventSegs(t,e)},assignFgSegHorizontals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateFgSegHorizontalCss(i)),i.bottom-i.top<30&&i.el.addClass("fc-short")},generateFgSegHorizontalCss:function(t){var e,i,n=this.view.opt("slotEventOverlap"),s=t.backwardCoord,r=t.forwardCoord,o=this.generateSegVerticalCss(t);return n&&(r=Math.min(1,s+2*(r-s))),this.isRTL?(e=1-r,i=s):(e=s,i=1-r),o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*i+"%",n&&t.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o}});var fe=At.View=vt.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(t,e,i,n){this.calendar=t,this.type=this.name=e,this.options=i,this.intervalDuration=n||it.duration(1,"day"),this.nextDayThreshold=it.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=C(this.opt("eventOrder")),this.documentMousedownProxy=K(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var i=this.calendar;return i.trigger.apply(i,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(t){et.extend(this,t),this.updateTitle()},computeRange:function(t){var e,i,n=$(this.intervalDuration),s=t.clone().startOf(n),r=s.clone().add(this.intervalDuration);return/year|month|week|day/.test(n)?(s.stripTime(),r.stripTime()):(s.hasTime()||(s=this.calendar.time(0)),r.hasTime()||(r=this.calendar.time(0))),e=s.clone(),e=this.skipHiddenDays(e),i=r.clone(),{intervalUnit:n,intervalStart:s,intervalEnd:r,start:e,end:i=this.skipHiddenDays(i,-1,!0)}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e)).startOf("day"),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(t,e,i){var n=t.end;return n.hasTime()||(n=n.clone().subtract(1)),ut(t.start,n,e,i,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t){var e=this,i=null;return this.displaying&&(i=this.queryScroll()),this.calendar.freezeContentHeight(),this.clear().then(function(){return e.displaying=et.when(e.displayView(t)).then(function(){e.forceScroll(e.computeInitialScroll(i)),e.calendar.unfreezeContentHeight(),e.triggerRender()})})},clear:function(){var t=this,e=this.displaying;return e?e.then(function(){return t.displaying=null,t.clearEvents(),t.clearView()}):et.when()},displayView:function(t){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),t&&this.setDate(t),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){et(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){et(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var t,e,i,n=this;this.opt("nowIndicator")&&(t=this.getNowIndicatorUnit())&&(e=K(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,i=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){n.nowIndicatorTimeoutID=null,e(),i=+it.duration(1,t),i=Math.max(100,i),n.nowIndicatorIntervalID=setInterval(e,i)},i))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(t),this.updateWidth(t),this.updateNowIndicator(),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e,i,n=this.scrollerEl;return(e=this.el.add(n)).css({position:"relative",left:-1}),i=this.el.outerHeight()-n.height(),e.css({position:"",left:""}),t-i},computeInitialScroll:function(){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(t){if(this.scrollerEl)return this.scrollerEl.scrollTop(t)},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){var t;this.isEventsRendered&&(t=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(t),this.isEventsRendered=!1)},renderEvents:function(){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(t,e){var i=this.trigger("eventRender",t,t,e);return!1===i?e=null:i&&!0!==i&&(e=et(i)),e},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var i,n=this.getEventSegs();for(i=0;i<n.length;i++)e&&n[i].event._id!==e._id||n[i].el&&t.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return j(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,i,n,s){var r=this.calendar,o=r.mutateEvent(t,e,i),a=function(){o.undo(),r.reportEventChange()};this.triggerEventDrop(t,o.dateDelta,a,n,s),r.reportEventChange()},triggerEventDrop:function(t,e,i,n,s){this.trigger("eventDrop",n[0],t,e,i,s,{})},reportExternalDrop:function(t,e,i,n,s){var r,o,a=t.eventProps;a&&(r=et.extend({},a,e),o=this.calendar.renderEvent(r,t.stick)[0]),this.triggerExternalDrop(o,e,i,n,s)},triggerExternalDrop:function(t,e,i,n,s){this.trigger("drop",i[0],e.start,n,s),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return j(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,i,n,s){var r=this.calendar,o=r.mutateEvent(t,e,i),a=function(){o.undo(),r.reportEventChange()};this.triggerEventResize(t,o.durationDelta,a,n,s),r.reportEventChange()},triggerEventResize:function(t,e,i,n,s){this.trigger("eventResize",n[0],t,e,i,s,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},triggerSelect:function(t,e){this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,t))},unrenderSelection:function(){},documentMousedown:function(t){var e;this.isSelected&&this.opt("unselectAuto")&&w(t)&&((e=this.opt("unselectCancel"))&&et(t.target).closest(e).length||this.unselect(t))},triggerDayClick:function(t,e,i){this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i)},initHiddenDays:function(){var t,e=this.opt("hiddenDays")||[],i=[],n=0;for(!1===this.opt("weekends")&&e.push(0,6),t=0;t<7;t++)(i[t]=-1!==et.inArray(t,e))||n++;if(!n)throw"invalid hiddenDays";this.isHiddenDayHash=i},isHiddenDay:function(t){return it.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,i){var n=t.clone();for(e=e||1;this.isHiddenDayHash[(n.day()+(i?e:0)+7)%7];)n.add(e,"days");return n},computeDayRange:function(t){var e,i=t.start.clone().stripTime(),n=t.end,s=null;return n&&(s=n.clone().stripTime(),(e=+n.time())&&e>=this.nextDayThreshold&&s.add(1,"days")),(!n||s<=i)&&(s=i.clone().add(1,"days")),{start:i,end:s}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return 1<e.end.diff(e.start,"days")}}),ge=At.Calendar=vt.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Ft,initialize:function(){},initOptions:function(t){var e,i,n;e=(t=s(t)).lang,(i=me[e])||(e=ge.defaults.lang,i=me[e]||{}),n=j(t.isRTL,i.isRTL,ge.defaults.isRTL)?ge.rtlDefaults:{},this.dirDefaults=n,this.langDefaults=i,this.overrides=t,this.options=h([ge.defaults,n,i,t]),Gt(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(t){var e,i,n;if(-1!=et.inArray(t,jt))for(e=this.header.getViewsWithButtons(),et.each(At.views,function(t){e.push(t)}),i=0;i<e.length;i++)if((n=this.getViewSpec(e[i]))&&n.singleUnit==t)return n},buildViewSpec:function(t){for(var e,i,n,s,r=this.overrides.views||{},o=[],a=[],l=[],d=t;d;)e=Wt[d],i=r[d],d=null,"function"==typeof e&&(e={"class":e}),e&&(o.unshift(e),a.unshift(e.defaults||{}),n=n||e.duration,d=d||e.type),i&&(l.unshift(i),n=n||i.duration,d=d||i.type);return(e=G(o)).type=t,!!e["class"]&&(n&&(n=it.duration(n)).valueOf()&&(s=$(e.duration=n),1===n.as(s)&&(e.singleUnit=s,l.unshift(r[s]||{}))),e.defaults=h(a),e.overrides=h(l),this.buildViewSpecOptions(e),this.buildViewSpecButtonText(e,t),e)},buildViewSpecOptions:function(t){t.options=h([ge.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides]),Gt(t.options)},buildViewSpecButtonText:function(i,n){function t(t){var e=t.buttonText||{};return e[n]||(i.singleUnit?e[i.singleUnit]:null)}i.buttonTextOverride=t(this.overrides)||i.overrides.buttonText,i.buttonTextDefault=t(this.langDefaults)||t(this.dirDefaults)||i.defaults.buttonText||t(ge.defaults)||(i.duration?this.humanizeDuration(i.duration):null)||n},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(t,e){var i,n=this.moment(t).stripZone();return i=e?this.moment(e).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration),{start:n,end:i}}});ge.mixin(se),ge.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},ge.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},ge.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var me=At.langs={};At.datepickerLang=function(t,e,i){var n=me[t]||(me[t]={});n.isRTL=i.isRTL,n.weekNumberTitle=i.weekHeader,et.each(ve,function(t,e){n[t]=e(i)}),et.datepicker&&(et.datepicker.regional[e]=et.datepicker.regional[t]=i,et.datepicker.regional.en=et.datepicker.regional[""],et.datepicker.setDefaults(i))},At.lang=function(t,e){var i,n;i=me[t]||(me[t]={}),e&&(i=me[t]=h([i,e])),n=Pt(t),et.each(_e,function(t,e){null==i[t]&&(i[t]=e(n,i))}),ge.defaults.lang=t};var ve={buttonText:function(t){return{prev:U(t.prevText),next:U(t.nextText),today:U(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},_e={dayOfMonthFormat:function(t,e){var i=t.longDateFormat("l");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?i+=" ddd":i="ddd "+i,i},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},we={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};At.lang("en",ge.englishDefaults),At.sourceNormalizers=[];var ye={dataType:"json",cache:!(At.sourceFetchers=[])},be=1;ge.prototype.getPeerEvents=function(t,e){var i,n,s=this.getEventCache(),r=[];for(i=0;i<s.length;i++)n=s[i],e&&e._id===n._id||r.push(n);return r};var Se=At.BasicView=fe.extend({dayGridClass:ue,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){return new(this.dayGridClass.extend(xe))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=fe.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=t(this.el.find(".fc-week-number")))},setHeight:function(t,e){var i,n=this.opt("eventLimit");l(this.scrollerEl),o(this.headRowEl),this.dayGrid.removeSegPopover(),n&&"number"==typeof n&&this.dayGrid.limitRows(n),i=this.computeScrollerHeight(t),this.setGridHeight(i,e),n&&"number"!=typeof n&&this.dayGrid.limitRows(n),!e&&a(this.scrollerEl,i)&&(r(this.headRowEl,g(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i))},setGridHeight:function(t,e){e?n(this.dayGrid.rowEls):i(this.dayGrid.rowEls,t,!0)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(t,e){return this.dayGrid.queryHit(t,e)},getHitSpan:function(t){return this.dayGrid.getHitSpan(t)},getHitEl:function(t){return this.dayGrid.getHitEl(t)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),xe={renderHeadIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<th class="fc-week-number '+t.widgetHeaderClass+'" '+t.weekNumberStyleAttr()+"><span>"+q(t.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(t){var e=this.view;return e.weekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"><span>"+this.getCellDate(t,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number '+t.widgetContentClass+'" '+t.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""}},Ce=At.MonthView=Se.extend({computeRange:function(t){var e,i=Se.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(i.end.diff(i.start,"weeks",!0)),i.end.add(6-e,"weeks")),i},setGridHeight:function(t,e){(e=e||"variable"===this.opt("weekMode"))&&(t*=this.rowCnt/6),i(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});Wt.basic={"class":Se},Wt.basicDay={type:"basic",duration:{days:1}},Wt.basicWeek={type:"basic",duration:{weeks:1}},Wt.month={"class":Ce,duration:{months:1},defaults:{fixedWeekCount:!0}};var De=At.AgendaView=fe.extend({timeGridClass:pe,timeGrid:null,dayGridClass:ue,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid())},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(Ee))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Te))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=et('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(t){this.timeGrid.renderNowIndicator(t)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(t){this.timeGrid.updateSize(t),fe.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=t(this.el.find(".fc-axis"))},setHeight:function(t,e){var i,n;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),l(this.scrollerEl),o(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(i=this.opt("eventLimit"))&&"number"!=typeof i&&(i=ke),i&&this.dayGrid.limitRows(i)),e||(n=this.computeScrollerHeight(t),a(this.scrollerEl,n)?(r(this.noScrollRowEls,g(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n)):(this.scrollerEl.height(n).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=it.duration(this.opt("scrollTime")),e=this.timeGrid.computeTimeTop(t);return(e=Math.ceil(e))&&e++,e},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(t,e){var i=this.timeGrid.queryHit(t,e);return!i&&this.dayGrid&&(i=this.dayGrid.queryHit(t,e)),i},getHitSpan:function(t){return t.component.getHitSpan(t)},getHitEl:function(t){return t.component.getHitEl(t)},renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)t[e].allDay?i.push(t[e]):n.push(t[e]);this.timeGrid.renderEvents(n),this.dayGrid&&this.dayGrid.renderEvents(i),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e
):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Ee={renderHeadIntroHtml:function(){var t,e=this.view;return e.opt("weekNumbers")?(t=this.start.format(e.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"><span>"+q(t)+"</span></th>"):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},Te={renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"><span>"+(t.opt("allDayHtml")||q(t.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},ke=5,$e=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Wt.agenda={"class":De,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Wt.agendaDay={type:"agenda",duration:{days:1}},Wt.agendaWeek={type:"agenda",duration:{weeks:1}},At}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(c){function s(n,t,e,i,s){function r(t,e){var i=e||[{message:t}];(n.googleCalendarError||c.noop).apply(s,i),(s.options.googleCalendarError||c.noop).apply(s,i),f.warn.apply(null,[t].concat(e||[]))}var o,a,l=p+"/"+encodeURIComponent(n.googleCalendarId)+"/events?callback=?",d=n.googleCalendarApiKey||s.options.googleCalendarApiKey,h=n.success;return d?(t.hasZone()||(t=t.clone().utc().add(-1,"day")),e.hasZone()||(e=e.clone().utc().add(1,"day")),i&&"local"!=i&&(a=i.replace(" ","_")),o=c.extend({},n.data||{},{key:d,timeMin:t.format(),timeMax:e.format(),timeZone:a,singleEvents:!0,maxResults:9999}),c.extend({},n,{googleCalendarId:null,url:l,data:o,startParam:!1,endParam:!1,timezoneParam:!1,success:function(t){var e,i,n=[];if(t.error)r("Google Calendar API: "+t.error.message,t.error.errors);else if(t.items&&(c.each(t.items,function(t,e){var i=e.htmlLink;a&&(i=u(i,"ctz="+a)),n.push({id:e.id,title:e.summary,start:e.start.dateTime||e.start.date,end:e.end.dateTime||e.end.date,url:i,location:e.location,description:e.description})}),e=[n].concat(Array.prototype.slice.call(arguments,1)),i=g(h,this,e),c.isArray(i)))return i;return n}})):(r("Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/"),{})}function u(t,n){return t.replace(/(\?.*?)?(#|$)/,function(t,e,i){return(e?e+"&":"?")+n+i})}var p="https://www.googleapis.com/calendar/v3/calendars",f=c.fullCalendar,g=f.applyAll;f.sourceNormalizers.push(function(t){var e,i=t.googleCalendarId,n=t.url;!i&&n&&(/^[^\/]+@([^\/\.]+\.)*(google|googlemail|gmail)\.com$/.test(n)?i=n:((e=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^\/]*)/.exec(n))||(e=/^https?:\/\/www.google.com\/calendar\/feeds\/([^\/]*)/.exec(n)))&&(i=decodeURIComponent(e[1])),i&&(t.googleCalendarId=i)),i&&(null==t.editable&&(t.editable=!1),t.url=i)}),f.sourceFetchers.push(function(t,e,i,n){if(t.googleCalendarId)return s(t,e,i,n,this)})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){!function(){"use strict";(e.defineLocale||e.lang).call(e,"ja",{months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"Ah\u6642m\u5206",LTS:"Ah\u6642m\u5206s\u79d2",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206 dddd"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(t){return"\u5348\u5f8c"===t},meridiem:function(t){return t<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:"[\u6765\u9031]dddd LT",lastDay:"[\u6628\u65e5] LT",lastWeek:"[\u524d\u9031]dddd LT",sameElse:"L"},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}(),t.fullCalendar.datepickerLang("ja","ja",{closeText:"\u9589\u3058\u308b",prevText:"&#x3C;\u524d",nextText:"\u6b21&#x3E;",currentText:"\u4eca\u65e5",monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayNames:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayNamesMin:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],weekHeader:"\u9031",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"\u5e74"}),t.fullCalendar.lang("ja",{buttonText:{month:"\u6708",week:"\u9031",day:"\u65e5",list:"\u4e88\u5b9a\u30ea\u30b9\u30c8"},allDayText:"\u7d42\u65e5",eventLimitText:function(t){return"\u4ed6 "+t+" \u4ef6"}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(w,d){var a,t,e,i,r,o,l,s,h,c,n,f,u,p,g,m,v,_,y,b,S,x,C,D,E,T,k,$,R,H,M,z,I,F,G,P,Y,L,O,A,W,N,B,V,j,q,U,Z,X,Q,J,K,tt,et,it,nt,st,rt,ot,at,lt,dt,ht,ct,ut,pt,ft,gt,mt,vt,_t,wt,yt,bt,St,xt,Ct,Dt,Et,Tt,kt,$t,Rt,Ht,Mt,zt,It,Ft,Gt=[].slice,Pt=function(t,e){function i(){this.constructor=t}for(var n in e)Yt.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},Yt={}.hasOwnProperty;return(c=w.fullCalendar).schedulerVersion="1.2.1",3!==c.internalApiVersion?void c.warn("v"+c.schedulerVersion+" of FullCalendar Scheduler is incompatible with v"+c.version+" of the core.\nPlease see http://fullcalendar.io/support/ for more information."):(t=c.Calendar,i=c.Class,V=c.View,n=c.Grid,ft=c.intersectRanges,K=c.debounce,vt=c.isInt,ht=c.getScrollbarWidths,l=c.DragListener,pt=c.htmlEscape,U=c.computeIntervalUnit,kt=c.proxy,j=c.capitaliseFirstLetter,c.applyAll,s=c.Emitter,st=c.durationHasTime,nt=c.divideRangeByDuration,it=c.divideDurationByDuration,yt=c.multiplyDuration,Et=c.parseFieldSpecs,q=c.compareByFieldSpecs,rt=c.flexibleCompare,gt=c.intersectRects,r=c.CoordCache,ot=function(t){return t.find("> td").filter(function(t,e){return e.rowSpan<=1})},Rt=null,bt=function(t,e){var i,n;if(i=t.css("direction"),n=t[0],null!=e){if("rtl"===i)switch(Rt){case"positive":e=e-n.clientWidth+n.scrollWidth;break;case"reverse":e=-e}return n.scrollLeft=e,t}if(e=n.scrollLeft,"rtl"===i)switch(Rt){case"positive":e=e+n.clientWidth-n.scrollWidth;break;case"reverse":e=-e}return e},dt=function(t){var e,i,n;if(e=t.css("direction"),n=(i=t[0]).scrollLeft,"rtl"===e)switch(Rt){case"negative":n=n-i.clientWidth+i.scrollWidth;break;case"reverse":n=-n-i.clientWidth+i.scrollWidth}return n},tt=function(){var t,e,i;return i=0<(e=(t=w('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"))[0]).scrollLeft?"positive":(e.scrollLeft=1,0<t.scrollLeft?"reverse":"negative"),t.remove(),i},w(function(){return Rt=tt()}),L=function(){function t(t,e){this.overflowX=null!=t?t:"auto",this.overflowY=null!=e?e:"auto",this.el=w('<div class="fc-scrollpane"> <div> <div class="fc-scrollpane-inner"> <div class="fc-content"/> <div class="fc-bg"/> </div> </div> </div>'),this.scrollEl=this.el.children(),this.innerEl=this.scrollEl.children(),this.contentEl=this.innerEl.find(".fc-content"),this.bgEl=this.innerEl.find(".fc-bg"),this.scrollEl.on("scroll",kt(this,"handleScroll")).on("scroll",K(kt(this,"handleScrollStop"),100)),this.handlers={},this.gutters={}}return t.prototype.el=null,t.prototype.innerEl=null,t.prototype.contentEl=null,t.prototype.bgEl=null,t.prototype.overflowX=null,t.prototype.overflowY=null,t.prototype.isScrolling=!1,t.prototype.handlers=null,t.prototype.height=null,t.prototype.contentWidth=null,t.prototype.contentMinWidth=null,t.prototype.gutters=null,t.prototype.update=function(){var t,e,i,n,s,r,o;return r=this.scrollEl,e="invisible-scroll"===(n=this.overflowX),i="invisible-scroll"===(s=this.overflowY),r.toggleClass("fc-no-scrollbars",(e||"hidden"===n)&&(i||"hidden"===s)&&!ut(r)),r.css({overflowX:e?"scroll":n,overflowY:i?"scroll":s}),t={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},(e||i)&&(o=ht(r),e&&(t.marginTop=-o.top,t.marginBottom=-o.bottom),i&&(t.marginLeft=-o.left,t.marginRight=-o.right)),r.css(t)},t.prototype.getScrollbarWidths=function(){var t;return t=ht(this.scrollEl),"invisible-scroll"===this.overflowX&&(t.top=0,t.bottom=0),"invisible-scroll"===this.overflowY&&(t.left=0,t.right=0),t},t.prototype.handleScroll=function(){return this.isScrolling||(this.isScrolling=!0,this.trigger("scrollStart")),this.trigger("scroll",this.scrollEl.scrollTop(),this.scrollEl.scrollLeft())},t.prototype.handleScrollStop=function(){return this.isScrolling=!1,this.trigger("scrollStop")},t.prototype.setHeight=function(t){return this.height=t,this.updateCss()},t.prototype.getHeight=function(){var t;return null!=(t=this.height)?t:this.scrollEl.height()},t.prototype.setContentWidth=function(t){return this.contentWidth=t,this.updateCss()},t.prototype.setContentMinWidth=function(t){return this.contentMinWidth=t,this.updateCss()},t.prototype.setGutters=function(t){return t?w.extend(this.gutters,t):this.gutters={},this.updateCss()},t.prototype.updateCss=function(){var t;return this.scrollEl.height(this.height),t=this.gutters,this.innerEl.css({width:this.contentWidth?this.contentWidth+(t.left||0)+(t.right||0):"",minWidth:this.contentMinWidth?this.contentMinWidth+(t.left||0)+(t.right||0):void 0,paddingLeft:t.left||"",paddingRight:t.right||"",paddingTop:t.top||"",paddingBottom:t.bottom||""}),this.bgEl.css({left:t.left||"",right:t.right||"",top:t.top||"",bottom:t.bottom||""})},t.prototype.append=function(t){return this.contentEl.append(t)},t.prototype.scrollTop=function(t){return this.scrollEl.scrollTop(t)},t.prototype.scrollLeft=function(t){return this.scrollEl.scrollLeft(t)},t.prototype.on=function(t,e){var i;return((i=this.handlers)[t]||(i[t]=[])).push(e),this},t.prototype.trigger=function(t){var e,i,n,s,r;for(i=t,e=2<=arguments.length?Gt.call(arguments,1):[],n=0,s=(r=this.handlers[i]||[]).length;n<s;n++)r[n].apply(this,e)},t}(),ut=function(t){var e;return(e=ht(t)).left||e.right||e.top||e.bottom},Y=function(){function t(t,e){var i,n,s,r;for(this.axis=t,this.scrollers=e,i=0,n=(s=this.scrollers).length;i<n;i++)r=s[i],this.initScroller(r)}return t.prototype.axis=null,t.prototype.scrollers=null,t.prototype.masterScroller=null,t.prototype.enabled=!0,t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.initScroller=function(o){return o.on("scrollStart",(e=this,function(){e.masterScroller||(e.masterScroller=o)})).on("scroll",(a=this,function(t,e){var i,n,s,r;if(o===a.masterScroller)for(i=0,n=(r=a.scrollers).length;i<n;i++)if((s=r[i])!==a.masterScroller)switch(a.axis){case"horizontal":s.scrollLeft(e);break;case"vertical":s.scrollTop(t)}})).on("scrollStop",(t=this,function(){o===t.masterScroller&&(t.masterScroller=null)}));var t,a,e},t.prototype.update=function(){var t,e,i,n,s,r,o,a,l,d,h,c,u;for(a=l=d=o=0,i=0,s=(t=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.scrollers).length;t<e;t++)c=i[t],n.push(c.getScrollbarWidths());return n}.call(this)).length;i<s;i++)u=t[i],a=Math.max(a,u.left),l=Math.max(l,u.right),d=Math.max(d,u.top),o=Math.max(o,u.bottom);for(e=n=0,r=(h=this.scrollers).length;n<r;e=++n)c=h[e],u=t[e],c.setGutters("horizontal"===this.axis?{left:a-u.left,right:l-u.right}:{top:d-u.top,bottom:o-u.bottom})},t}(),G=function(){function t(t){var n,e;this.scroller=t,this.sprites=[],this.scroller.on("scrollStart",(e=this,function(){return e.shouldRequeryDimensions?e.cacheDimensions():void 0})),this.scroller.on("scroll",(n=this,function(){var t,e,i;return e=n.scroller.scrollEl,t=dt(e),i=e.scrollTop(),n.viewportRect={left:t,right:t+e[0].clientWidth,top:i,bottom:i+e[0].clientHeight},n.updatePositions()}))}return t.prototype.scroller=null,t.prototype.scrollbarWidths=null,t.prototype.sprites=null,t.prototype.viewportRect=null,t.prototype.contentOffset=null,t.prototype.isHFollowing=!0,t.prototype.isVFollowing=!1,t.prototype.containOnNaturalLeft=!1,t.prototype.containOnNaturalRight=!1,t.prototype.shouldRequeryDimensions=!1,t.prototype.minTravel=0,t.prototype.isForcedAbsolute=!1,t.prototype.isForcedRelative=!1,t.prototype.setSprites=function(n){var t,e,s;if(this.clearSprites(),n instanceof w)return this.sprites=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)s=n[t],i.push(new P(w(s),this));return i}.call(this);for(t=0,e=n.length;t<e;t++)(s=n[t]).follower=this;return this.sprites=n},t.prototype.clearSprites=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;t<e;t++)i[t].clear();return this.sprites=[]},t.prototype.cacheDimensions=function(){var t,e,i,n,s,r;for(s=this.scroller.scrollEl,e=dt(s),r=s.scrollTop(),this.viewportRect={left:e,right:e+s[0].clientWidth,top:r,bottom:r+s[0].clientHeight},this.scrollbarWidths=this.scroller.getScrollbarWidths(),this.contentOffset=this.scroller.innerEl.offset(),t=0,i=(n=this.sprites).length;t<i;t++)n[t].cacheDimensions()},t.prototype.forceAbsolute=function(){var t,e,i,n,s;for(this.isForcedAbsolute=!0,n=[],t=0,e=(i=this.sprites).length;t<e;t++)s=i[t],n.push(s.doAbsolute?void 0:s.assignPosition());return n},t.prototype.forceRelative=function(){var t,e,i,n,s;for(this.isForcedRelative=!0,n=[],t=0,e=(i=this.sprites).length;t<e;t++)s=i[t],n.push(s.doAbsolute?s.assignPosition():void 0);return n},t.prototype.clearForce=function(){var t,e,i,n,s;for(this.isForcedRelative=!1,this.isForcedAbsolute=!1,n=[],t=0,e=(i=this.sprites).length;t<e;t++)s=i[t],n.push(s.assignPosition());return n},t.prototype.update=function(){return this.cacheDimensions(),this.updatePositions()},t.prototype.updatePositions=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;t<e;t++)i[t].updatePosition()},t.prototype.getContentRect=function(t){var e,i,n;return e=(i=t.offset()).left+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.left,n=i.top+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.top,{left:e,right:e+t.width(),top:n,bottom:n+t.height()}},t.prototype.getBoundingRect=function(t){var e,i,n;return e=(i=t.offset()).left-this.contentOffset.left,n=i.top-this.contentOffset.top,{left:e,right:e+t.outerWidth(),top:n,bottom:n+t.outerHeight()}},t}(),P=function(){function t(t,e){this.el=t,this.follower=null!=e?e:null,this.isBlock="block"===this.el.css("display"),this.el.css("position","relative")}return t.prototype.follower=null,t.prototype.el=null,t.prototype.absoluteEl=null,t.prototype.naturalRect=null,t.prototype.parentRect=null,t.prototype.containerRect=null,t.prototype.isEnabled=!0,t.prototype.isHFollowing=!1,t.prototype.isVFollowing=!1,t.prototype.doAbsolute=!1,t.prototype.isAbsolute=!1,t.prototype.isCentered=!1,t.prototype.rect=null,t.prototype.isBlock=!1,t.prototype.naturalWidth=null,t.prototype.disable=function(){return this.isEnabled?(this.isEnabled=!1,this.resetPosition(),this.unabsolutize()):void 0},t.prototype.enable=function(){return this.isEnabled?void 0:(this.isEnabled=!0,this.assignPosition())},t.prototype.clear=function(){return this.disable(),this.follower=null,this.absoluteEl=null},t.prototype.cacheDimensions=function(){var t,e,i,n,s,r,o,a;return i=s=n=!1,this.naturalWidth=this.el.width(),this.resetPosition(),e=this.follower,o=this.naturalRect=e.getBoundingRect(this.el),a=this.el.parent(),this.parentRect=e.getBoundingRect(a),t=this.containerRect=wt(e.getContentRect(a),o),r=e.minTravel,e.containOnNaturalLeft&&(t.left=o.left),e.containOnNaturalRight&&(t.right=o.right),e.isHFollowing&&lt(t)-lt(o)>=r&&(i="center"===this.el.css("text-align"),n=!0),e.isVFollowing&&at(t)-at(o)>=r&&(s=!0),this.isHFollowing=n,this.isVFollowing=s,this.isCentered=i},t.prototype.updatePosition=function(){return this.computePosition(),this.assignPosition()},t.prototype.resetPosition=function(){return this.el.css({top:"",left:""})},t.prototype.computePosition=function(){var t,e,i,n,s,r,o,a;return o=this.follower.viewportRect,i=this.parentRect,t=this.containerRect,n=null,e=!1,(a=gt(o,i))&&(n=Q(this.naturalRect),r=gt(n,i),(this.isCentered&&!Ht(o,i)||r&&!Ht(o,r))&&(e=!0,this.isHFollowing&&(this.isCentered?(s=lt(n),n.left=(a.left+a.right)/2-s/2,n.right=n.left+s):ct(n,o)||(e=!1),ct(n,t)&&(e=!1)),this.isVFollowing&&(Ft(n,o)||(e=!1),Ft(n,t)&&(e=!1)),Ht(o,n)||(e=!1))),this.rect=n,this.doAbsolute=e},t.prototype.assignPosition=function(){var t,e;return this.isEnabled?this.rect?!this.doAbsolute&&!this.follower.isForcedAbsolute||this.follower.isForcedRelative?(e=this.rect.top-this.naturalRect.top,t=this.rect.left-this.naturalRect.left,this.unabsolutize(),this.el.toggleClass("fc-following",Boolean(e||t)).css({top:e,left:t})):(this.absolutize(),this.absoluteEl.css({top:this.rect.top-this.follower.viewportRect.top+this.follower.scrollbarWidths.top,left:this.rect.left-this.follower.viewportRect.left+this.follower.scrollbarWidths.left,width:this.isBlock?this.naturalWidth:""})):this.unabsolutize():void 0},t.prototype.absolutize=function(){return this.isAbsolute?void 0:(this.absoluteEl||(this.absoluteEl=this.buildAbsoluteEl()),this.absoluteEl.appendTo(this.follower.scroller.el),this.el.css("visibility","hidden"),this.isAbsolute=!0)},t.prototype.unabsolutize=function(){return this.isAbsolute?(this.absoluteEl.detach(),this.el.css("visibility",""),this.isAbsolute=!1):void 0},t.prototype.buildAbsoluteEl=function(){return this.el.clone().addClass("fc-following").css({position:"absolute","z-index":1e3,"font-weight":this.el.css("font-weight"),"font-size":this.el.css("font-size"),"font-family":this.el.css("font-family"),color:this.el.css("color"),"padding-top":this.el.css("padding-top"),"padding-bottom":this.el.css("padding-bottom"),"padding-left":this.el.css("padding-left"),"padding-right":this.el.css("padding-right"),"pointer-events":"none"})},t}(),Q=function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}},lt=function(t){return t.right-t.left},at=function(t){return t.bottom-t.top},Ht=function(t,e){return Mt(t,e)&&zt(t,e)},Mt=function(t,e){return e.left>=t.left&&e.right<=t.right},zt=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom},ct=function(t,e){return t.left<e.left?(t.right=e.left+lt(t),t.left=e.left,!0):t.right>e.right&&(t.left=e.right-lt(t),t.right=e.right,!0)},Ft=function(t,e){return t.top<e.top?(t.bottom=e.top+at(t),t.top=e.top,!0):t.bottom>e.bottom&&(t.top=e.bottom-at(t),t.bottom=e.bottom,!0)},wt=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}},e=function(){function g(){return g.__super__.constructor.apply(this,arguments)}return Pt(g,t),g.prototype.resourceManager=null,g.prototype.initialize=function(){return this.resourceManager=new E(this)},g.prototype.instantiateView=function(t){var e,i;return i=(e=this.getViewSpec(t))["class"],this.options.resources&&!1!==e.options.resources&&(e.queryResourceClass?i=e.queryResourceClass(e)||i:e.resourceClass&&(i=e.resourceClass)),new i(this,t,e.options,e.duration)},g.prototype.getResources=function(){return this.resourceManager.topLevelResources},g.prototype.addResource=function(t,e){var i,n;null==e&&(e=!1),i=this.resourceManager.addResource(t),e&&this.view.scrollToResource&&i.done((n=this,function(t){return n.view.scrollToResource(t)}))},g.prototype.removeResource=function(t){return this.resourceManager.removeResource(t)},g.prototype.refetchResources=function(){this.resourceManager.fetchResources()},g.prototype.rerenderResources=function(){this.resourceManager.resetResources()},g.prototype.getPeerEvents=function(t,e){var i,n,s,r,o,a,l,d,h,c,u,p,f;for(u=g.__super__.getPeerEvents.apply(this,arguments),h=t.resourceId?[t.resourceId]:e?this.getEventResourceIds(e):[],i=[],s=0,a=u.length;s<a;s++){if(c=u[s],n=!1,(f=this.getEventResourceIds(c)).length&&h.length){for(r=0,l=f.length;r<l;r++)for(p=f[r],o=0,d=h.length;o<d;o++)if(h[o]===p){n=!0;break}}else n=!0;n&&i.push(c)}return i},g.prototype.buildSelectSpan=function(t,e,i){var n;return n=g.__super__.buildSelectSpan.apply(this,arguments),i&&(n.resourceId=i),n},g.prototype.getResourceById=function(t){return this.resourceManager.getResourceById(t)},g.prototype.getEventResourceId=function(t){return this.getEventResourceIds(t)[0]},g.prototype.getEventResourceIds=function(t){var e,i,n,s,r,o,a,l;if(l=String(null!=(r=null!=(o=t[this.getEventResourceField()])?o:t.resourceId)?r:""))return[l];if(t.resourceIds){for(s=[],e=0,i=(a=t.resourceIds).length;e<i;e++)l=a[e],(n=String(null!=l?l:""))&&s.push(n);return s}return[]},g.prototype.setEventResourceId=function(t,e){return t[this.getEventResourceField()]=String(null!=e?e:"")},g.prototype.getEventResourceField=function(){return this.options.eventResourceField||"resourceId"},g.prototype.getResourceEvents=function(t){var e,i;return(e="object"==typeof t?t:this.getResourceById(t))?this.clientEvents((i=this,function(t){return-1!==w.inArray(e.id,i.getEventResourceIds(t))})):[]},g.prototype.getEventResource=function(t){return this.getEventResources(t)[0]},g.prototype.getEventResources=function(t){var e,i,n,s,r,o,a;if(a=[],e="object"==typeof t?t:this.clientEvents(t)[0])for(i=0,n=(s=this.getEventResourceIds(e)).length;i<n;i++)o=s[i],(r=this.getResourceById(o))&&a.push(r);return a},g}(),t.prototype=e.prototype,xt=V.prototype.displayView,V.prototype.renderSkeleton,Dt=V.prototype.unrenderSkeleton,St=V.prototype.displayEvents,V.prototype.isResourcesBound=!1,V.prototype.settingResources=null,V.prototype.displayView=function(){return xt.apply(this,arguments),Tt(this.calendar.options.schedulerLicenseKey,this.el),this.bindResources(),this.whenResources()},V.prototype.unrenderSkeleton=function(){return Dt.apply(this,arguments),this.unbindResources()},V.prototype.displayEvents=function(t){return this.whenResources((e=this,function(){return St.call(e,t)}));var e},V.prototype.bindResources=function(){var t,e;return this.isResourcesBound?void 0:(this.isResourcesBound=!0,this.settingResources=w.Deferred(),t=function(t){return e.setResources(t),e.settingResources.resolve()},(e=this).calendar.resourceManager.on("set",this._setResources=t).on("unset",this._unsetResources=kt(this,"unsetResources")).on("reset",this._resetResources=kt(this,"resetResources")).on("add",this._addResource=kt(this,"addResource")).on("remove",this._removeResource=kt(this,"removeResource")),this.calendar.resourceManager.hasFetched()?t(this.calendar.resourceManager.topLevelResources):this.calendar.resourceManager.getResources())},V.prototype.unbindResources=function(){return this.isResourcesBound?(this.calendar.resourceManager.off("set",this._setResources).off("unset",this._unsetResources).off("reset",this._resetResources).off("add",this._addResource).off("remove",this._removeResource),"resolved"===this.settingResources.state()&&this.unsetResources(),this.settingResources=null,this.isResourcesBound=!1):void 0},V.prototype.whenResources=function(t){return"resolved"===this.settingResources.state()?w.when(t?t():void 0):t?this.settingResources.then(t):this.settingResources.promise()},V.prototype.setResources=function(){},V.prototype.unsetResources=function(){},V.prototype.resetResources=function(){return this.calendar.rerenderEvents()},V.prototype.addResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},V.prototype.removeResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},Ct=n.prototype.getSegClasses,n.prototype.getSegClasses=function(t){var e,i,n,s,r;for(e=Ct.apply(this,arguments),i=0,n=(s=this.getSegResources(t)).length;i<n;i++)r=s[i],e=e.concat(r.eventClassName||[]);return e},n.prototype.getSegSkinCss=function(t){var e,i,n,s,r,o,a,l,d,h;return h=this.view,l=(e=t.event).source||{},i=e.color,d=l.color,o=h.opt("eventColor"),a=this.getSegResources(t),n=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventBackgroundColor||t.eventColor,t=t._parent;return n},s=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventBorderColor||t.eventColor,t=t._parent;return n},r=function(){var t,e,i,n;for(n=null,e=0,i=a.length;e<i;e++)for(t=a[e];t&&!n;)n=t.eventTextColor,t=t._parent;return n},{"background-color":e.backgroundColor||i||n()||l.backgroundColor||d||h.opt("eventBackgroundColor")||o,"border-color":e.borderColor||i||s()||l.borderColor||d||h.opt("eventBorderColor")||o,color:e.textColor||r()||l.textColor||h.opt("eventTextColor")}},n.prototype.getSegResources=function(t){return t.resource?[t.resource]:this.view.calendar.getEventResources(t.event)},E=function(){function n(t){this.calendar=t,this.initializeCache()}return Pt(n,i),n.mixin(s),n.resourceGuid=1,n.ajaxDefaults={dataType:"json",cache:!1},n.prototype.calendar=null,n.prototype.topLevelResources=null,n.prototype.resourcesById=null,n.prototype.fetching=null,n.prototype.hasFetched=function(){return this.fetching&&"resolved"===this.fetching.state()},n.prototype.getResources=function(){var e;return this.fetching?w.Deferred().resolve(this.topLevelResources).promise():(e=w.Deferred(),this.fetchResources().done(function(t){return e.resolve(t)}).fail(function(){return e.resolve([])}),e)},n.prototype.fetchResources=function(){var e,i;return e=this.fetching,w.when(e).then((i=this,function(){return i.fetching=i.fetchResourceInputs().then(function(t){return i.setResources(t,Boolean(e)),i.topLevelResources})}))},n.prototype.fetchResourceInputs=function(){var e,t,i;switch(e=w.Deferred(),i=this.calendar.options.resources,"string"===w.type(i)&&(i={url:i}),w.type(i)){case"function":i(function(t){return e.resolve(t)});break;case"object":t=w.ajax(w.extend({},n.ajaxDefaults,i));break;case"array":e.resolve(i);break;default:e.resolve([])}return t||(t=e.promise()),"pending"===!t.state()&&(this.calendar.pushLoading(),t.always(function(){return this.calendar.popLoading()})),t},n.prototype.resetResources=function(){return this.getResources().then((t=this,function(){return t.trigger("reset",t.topLevelResources)}));var t},n.prototype.getResourceById=function(t){return this.resourcesById[t]},n.prototype.initializeCache=function(){return this.topLevelResources=[],this.resourcesById={}},n.prototype.setResources=function(n,t){var e,i,s,r,o,a;for(this.initializeCache(),o=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)r=n[t],i.push(this.buildResource(r));return i}.call(this),e=0,i=(a=function(){var t,e,i;for(i=[],t=0,e=o.length;t<e;t++)s=o[t],this.addResourceToIndex(s)&&i.push(s);return i}.call(this)).length;e<i;e++)s=a[e],this.addResourceToTree(s);return t?this.trigger("reset",this.topLevelResources):this.trigger("set",this.topLevelResources),this.calendar.trigger("resourcesSet",null,this.topLevelResources)},n.prototype.addResource=function(e){return w.when(this.fetching).then((i=this,function(){var t;return t=i.buildResource(e),!!i.addResourceToIndex(t)&&(i.addResourceToTree(t),i.trigger("add",t),t)}));var i},n.prototype.addResourceToIndex=function(t){var e,i,n,s;if(this.resourcesById[t.id])return!1;for(i=0,n=(s=(this.resourcesById[t.id]=t).children).length;i<n;i++)e=s[i],this.addResourceToIndex(e);return!0},n.prototype.addResourceToTree=function(t){var e,i,n,s;if(!t.parent){if(i=String(null!=(n=t.parentId)?n:"")){if(!(e=this.resourcesById[i]))return!1;s=(t.parent=e).children}else s=this.topLevelResources;s.push(t)}return!0},n.prototype.removeResource=function(t){var e,i;return e="object"==typeof t?t.id:t,w.when(this.fetching).then((i=this,function(){var t;return(t=i.removeResourceFromIndex(e))&&(i.removeResourceFromTree(t),i.trigger("remove",t)),t}))},n.prototype.removeResourceFromIndex=function(t){var e,i,n,s,r;if(r=this.resourcesById[t]){for(delete this.resourcesById[t],i=0,n=(s=r.children).length;i<n;i++)e=s[i],this.removeResourceFromIndex(e.id);return r}return!1},n.prototype.removeResourceFromTree=function(t,e){var i,n,s,r;for(null==e&&(e=this.topLevelResources),i=n=0,s=e.length;n<s;i=++n){if((r=e[i])===t)return t.parent=null,e.splice(i,1),!0;if(this.removeResourceFromTree(t,r.children))return!0}return!1},n.prototype.buildResource=function(r){var o,a,t,e,l;return(l=w.extend({},r)).id=String(null!=(e=r.id)?e:"_fc"+n.resourceGuid++),t=r.eventClassName,l.eventClassName=function(){switch(w.type(t)){case"string":return t.split(/\s+/);case"array":return t;default:return[]}}(),l.children=function(){var t,e,i,n,s;for(s=[],t=0,e=(n=null!=(i=r.children)?i:[]).length;t<e;t++)a=n[t],(o=this.buildResource(a)).parent=l,s.push(o);return s}.call(this),l},n}(),M=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Pt(r,V),r.prototype.resourceTextFunc=null,r.prototype.unsetResources=function(){return this.clearEvents()},r.prototype.resetResources=function(t){var e;return e=this.queryScroll(),this.unsetResources(),this.setResources(t),this.setScroll(e),this.calendar.rerenderEvents()},r.prototype.getResourceText=function(t){return this.getResourceTextFunc()(t)},r.prototype.getResourceTextFunc=function(){var t;return this.resourceTextFunc?this.resourceTextFunc:("function"!=typeof(t=this.opt("resourceText"))&&(t=function(t){return t.title||t.id}),this.resourceTextFunc=t)},r.prototype.triggerDayClick=function(t,e,i){var n;return n=this.calendar.resourceManager,this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i,this,n.getResourceById(t.resourceId))},r.prototype.triggerSelect=function(t,e){var i;return i=this.calendar.resourceManager,this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e,this,i.getResourceById(t.resourceId))},r.prototype.triggerExternalDrop=function(t,e,i,n,s){return this.trigger("drop",i[0],e.start,n,s,e.resourceId),t?this.trigger("eventReceive",null,t):void 0},r.prototype.reportEventDrop=function(t,e){var i,n,s;return n=t,i=e,s=3<=arguments.length?Gt.call(arguments,2):[],(i=this.normalizeDropLocation(i)).resourceId&&n.resourceIds&&(i.resourceIds=null),r.__super__.reportEventDrop.apply(this,[n,i].concat(Gt.call(s)))},r.prototype.reportExternalDrop=function(t,e){var i,n,s;return n=t,i=e,s=3<=arguments.length?Gt.call(arguments,2):[],i=this.normalizeDropLocation(i),r.__super__.reportExternalDrop.apply(this,[n,i].concat(Gt.call(s)))},r.prototype.normalizeDropLocation=function(t){var e;return delete(e=w.extend({},t)).resourceId,this.calendar.setEventResourceId(e,t.resourceId),e},r}(),D=function(){function a(){return a.__super__.constructor.apply(this,arguments)}return Pt(a,n),a.prototype.allowCrossResource=!0,a.prototype.eventRangeToSpans=function(t,e){var i,n,s,r,o;if((r=this.view.calendar.getEventResourceIds(e)).length){for(o=[],i=0,n=r.length;i<n;i++)s=r[i],o.push(w.extend({},t,{resourceId:s}));return o}return c.isBgEvent(e)?a.__super__.eventRangeToSpans.apply(this,arguments):[]},a.prototype.fabricateHelperEvent=function(t,e){var i;return i=a.__super__.fabricateHelperEvent.apply(this,arguments),this.view.calendar.setEventResourceId(i,t.resourceId),i},a.prototype.computeEventDrop=function(t,e,i){var n;return!0||t.resourceId===e.resourceId?((n=a.__super__.computeEventDrop.apply(this,arguments))&&(n.resourceId=e.resourceId),n):null},a.prototype.computeExternalDrop=function(t,e){var i;return(i=a.__super__.computeExternalDrop.apply(this,arguments))&&(i.resourceId=t.resourceId),i},a.prototype.computeEventResize=function(t,e,i,n){var s;if(
this.allowCrossResource||e.resourceId===i.resourceId)return(s=a.__super__.computeEventResize.apply(this,arguments))&&(s.resourceId=e.resourceId),s},a.prototype.computeSelectionSpan=function(t,e){var i;if(this.allowCrossResource||t.resourceId===e.resourceId)return(i=a.__super__.computeSelectionSpan.apply(this,arguments))&&(i.resourceId=t.resourceId),i},a}(),C={flattenedResources:null,resourceCnt:0,datesAboveResources:!1,allowCrossResource:!1,setResources:function(t){return this.flattenedResources=this.flattenResources(t),this.resourceCnt=this.flattenedResources.length,this.updateDayTableCols()},unsetResources:function(){return this.flattenedResources=null,this.resourceCnt=0,this.updateDayTableCols()},flattenResources:function(t){var i,e,n,s;return(e=this.view.opt("resourceOrder"))?(i=Et(e),s=function(t,e){return q(t,e,i)}):s=null,n=[],this.accumulateResources(t,s,n),n},accumulateResources:function(t,e,i){var n,s,r,o,a;for(e?(a=t.slice(0)).sort(e):a=t,o=[],n=0,s=a.length;n<s;n++)r=a[n],i.push(r),o.push(this.accumulateResources(r.children,e,i));return o},updateDayTableCols:function(){return this.datesAboveResources=this.view.opt("groupByDateAndResource"),c.DayTableMixin.updateDayTableCols.call(this)},computeColCnt:function(){return(this.resourceCnt||1)*this.daysPerRow},getColDayIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),this.datesAboveResources?Math.floor(t/(this.resourceCnt||1)):t%this.daysPerRow},getColResource:function(t){return this.flattenedResources[this.getColResourceIndex(t)]},getColResourceIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),this.datesAboveResources?t%(this.resourceCnt||1):Math.floor(t/this.daysPerRow)},indicesToCol:function(t,e){var i;return i=this.datesAboveResources?e*(this.resourceCnt||1)+t:t*this.daysPerRow+e,this.isRTL&&(i=this.colCnt-1-i),i},renderHeadTrHtml:function(){return this.resourceCnt?1<this.daysPerRow?this.datesAboveResources?this.renderHeadDateAndResourceHtml():this.renderHeadResourceAndDateHtml():this.renderHeadResourceHtml():c.DayTableMixin.renderHeadTrHtml.call(this)},renderHeadResourceHtml:function(){var t,e,i,n,s;for(s=[],t=0,e=(i=this.flattenedResources).length;t<e;t++)n=i[t],s.push(this.renderHeadResourceCellHtml(n));return this.wrapTr(s,"renderHeadIntroHtml")},renderHeadResourceAndDateHtml:function(){var t,e,i,n,s,r,o,a,l,d;for(d=[],e=[],n=0,r=(o=this.flattenedResources).length;n<r;n++)for(l=o[n],d.push(this.renderHeadResourceCellHtml(l,null,this.daysPerRow)),i=s=0,a=this.daysPerRow;s<a;i=s+=1)t=this.dayDates[i].clone(),e.push(this.renderHeadResourceDateCellHtml(t,l));return this.wrapTr(d,"renderHeadIntroHtml")+this.wrapTr(e,"renderHeadIntroHtml")},renderHeadDateAndResourceHtml:function(){var t,e,i,n,s,r,o,a,l,d;for(e=[],d=[],i=n=0,o=this.daysPerRow;n<o;i=n+=1)for(t=this.dayDates[i].clone(),e.push(this.renderHeadDateCellHtml(t,this.resourceCnt)),s=0,r=(a=this.flattenedResources).length;s<r;s++)l=a[s],d.push(this.renderHeadResourceCellHtml(l,t));return this.wrapTr(e,"renderHeadIntroHtml")+this.wrapTr(d,"renderHeadIntroHtml")},renderHeadResourceCellHtml:function(t,e,i){return'<th class="fc-resource-cell" data-resource-id="'+t.id+'"'+(e?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(1<i?' colspan="'+i+'"':"")+">"+pt(this.view.getResourceText(t))+"</th>"},renderHeadResourceDateCellHtml:function(t,e,i){return this.renderHeadDateCellHtml(t,i,'data-resource-id="'+e.id+'"')},processHeadResourceEls:function(t){return t.find(".fc-resource-cell").each((n=this,function(t,e){var i;return i=n.datesAboveResources?n.getColResource(t):n.flattenedResources[n.isRTL?n.flattenedResources.length-1-t:t],n.view.trigger("resourceRender",i,i,w(e),w())}));var n},renderBgCellsHtml:function(t){var e,i,n,s,r,o;if(this.resourceCnt){for(n=[],e=s=0,r=this.colCnt;s<r;e=s+=1)i=this.getCellDate(t,e),o=this.getColResource(e),n.push(this.renderResourceBgCellHtml(i,o));return n.join("")}return c.DayTableMixin.renderBgCellsHtml.call(this,t)},renderResourceBgCellHtml:function(t,e){return this.renderBgCellHtml(t,'data-resource-id="'+e.id+'"')},wrapTr:function(t,e){return this.isRTL?(t.reverse(),"<tr>"+t.join("")+this[e]()+"</tr>"):"<tr>"+this[e]()+t.join("")+"</tr>"}},x=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return Pt(i,t),i.mixin(D),i.mixin(C),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(t){var e,i,n,s,r,o,a,l,d,h,c,u,p;if(d=this.resourceCnt,i=this.datesAboveResources?this.sliceRangeByDay(t):this.sliceRangeByRow(t),d){for(u=[],s=0,a=i.length;s<a;s++)for(p=i[s],h=r=0,l=d;r<l;h=r+=1)c=this.flattenedResources[h],t.resourceId&&t.resourceId!==c.id||((e=w.extend({},p)).resource=c,this.isRTL?(e.leftCol=this.indicesToCol(h,p.lastRowDayIndex),e.rightCol=this.indicesToCol(h,p.firstRowDayIndex)):(e.leftCol=this.indicesToCol(h,p.firstRowDayIndex),e.rightCol=this.indicesToCol(h,p.lastRowDayIndex)),u.push(e));return u}for(n=0,o=i.length;n<o;n++)p=i[n],this.isRTL?(p.leftCol=p.lastRowDayIndex,p.rightCol=p.firstRowDayIndex):(p.leftCol=p.firstRowDayIndex,p.rightCol=p.lastRowDayIndex);return i},i}(c.DayGrid),$=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return Pt(i,t),i.mixin(D),i.mixin(C),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(t){var e,i,n,s,r,o,a,l,d,h,c,u,p;if(d=this.resourceCnt,i=this.sliceRangeByTimes(t),d){for(u=[],s=0,a=i.length;s<a;s++)for(p=i[s],h=r=0,l=d;r<l;h=r+=1)c=this.flattenedResources[h],t.resourceId&&t.resourceId!==c.id||((e=w.extend({},p)).resource=c,e.col=this.indicesToCol(h,p.dayIndex),u.push(e));return u}for(n=0,o=i.length;n<o;n++)(p=i[n]).col=p.dayIndex;return i},i}(c.TimeGrid),W=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,V),e.prototype.timeGrid=null,e.prototype.isScrolled=!1,e.prototype.initialize=function(){return this.timeGrid=this.instantiateGrid(),this.intervalDuration=this.timeGrid.duration},e.prototype.instantiateGrid=function(){return new A(this)},e.prototype.setRange=function(t){return e.__super__.setRange.apply(this,arguments),this.timeGrid.setRange(t)},e.prototype.renderSkeleton=function(){return this.el.addClass("fc-timeline"),!1===this.opt("eventOverlap")&&this.el.addClass("fc-no-overlap"),this.el.html(this.renderSkeletonHtml()),this.renderTimeGridSkeleton()},e.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderTimeGridSkeleton=function(){return this.timeGrid.setElement(this.el.find("tbody .fc-time-area")),this.timeGrid.headEl=this.el.find("thead .fc-time-area"),this.timeGrid.renderSkeleton(),this.isScrolled=!1,this.timeGrid.bodyScroller.on("scroll",kt(this,"handleBodyScroll"))},e.prototype.handleBodyScroll=function(t){if(t){if(!this.isScrolled)return this.isScrolled=!0,this.el.addClass("fc-scrolled")}else if(this.isScrolled)return this.isScrolled=!1,this.el.removeClass("fc-scrolled")},e.prototype.unrenderSkeleton=function(){return this.timeGrid.removeElement(),this.handleBodyScroll(0),e.__super__.unrenderSkeleton.apply(this,arguments)},e.prototype.renderDates=function(){return this.timeGrid.renderDates()},e.prototype.unrenderDates=function(){return this.timeGrid.unrenderDates()},e.prototype.renderBusinessHours=function(){return this.timeGrid.renderBusinessHours()},e.prototype.unrenderBusinessHours=function(){return this.timeGrid.unrenderBusinessHours()},e.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},e.prototype.renderNowIndicator=function(t){return this.timeGrid.renderNowIndicator(t)},e.prototype.unrenderNowIndicator=function(){return this.timeGrid.unrenderNowIndicator()},e.prototype.prepareHits=function(){return this.timeGrid.prepareHits()},e.prototype.releaseHits=function(){return this.timeGrid.releaseHits()},e.prototype.queryHit=function(t,e){return this.timeGrid.queryHit(t,e)},e.prototype.getHitSpan=function(t){return this.timeGrid.getHitSpan(t)},e.prototype.getHitEl=function(t){return this.timeGrid.getHitEl(t)},e.prototype.updateWidth=function(){return this.timeGrid.updateWidth()},e.prototype.setHeight=function(t,e){var i;return i=e?"auto":t-this.timeGrid.headHeight()-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-this.timeGrid.headScroller.el.outerHeight()-this.timeGrid.bodyScroller.el.outerHeight()},e.prototype.computeInitialScroll=function(t){return this.timeGrid.computeInitialScroll(t)},e.prototype.queryScroll=function(){return this.timeGrid.queryScroll()},e.prototype.setScroll=function(t){return this.timeGrid.setScroll(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.updateWidth()},e.prototype.renderDrag=function(t,e){return this.timeGrid.renderDrag(t,e)},e.prototype.unrenderDrag=function(){return this.timeGrid.unrenderDrag()},e.prototype.getEventSegs=function(){return this.timeGrid.getEventSegs()},e.prototype.renderSelection=function(t){return this.timeGrid.renderSelection(t)},e.prototype.unrenderSelection=function(){return this.timeGrid.unrenderSelection()},e}(),J=c.cssToStr,A=function(){function e(){var t;e.__super__.constructor.apply(this,arguments),this.initScaleProps(),this.minTime=d.duration(this.opt("minTime")||"00:00"),this.maxTime=d.duration(this.opt("maxTime")||"24:00"),this.timeWindowMs=this.maxTime-this.minTime,this.snapDuration=(t=this.opt("snapDuration"))?d.duration(t):this.slotDuration,this.minResizeDuration=this.snapDuration,this.snapsPerSlot=it(this.slotDuration,this.snapDuration),this.slotWidth=this.opt("slotWidth")}return Pt(e,n),e.prototype.slotDates=null,e.prototype.slotCnt=null,e.prototype.snapCnt=null,e.prototype.snapsPerSlot=null,e.prototype.snapDiffToIndex=null,e.prototype.snapIndexToDiff=null,e.prototype.headEl=null,e.prototype.slatContainerEl=null,e.prototype.slatEls=null,e.prototype.containerCoordCache=null,e.prototype.slatCoordCache=null,e.prototype.slatInnerCoordCache=null,e.prototype.headScroller=null,e.prototype.bodyScroller=null,e.prototype.joiner=null,e.prototype.follower=null,e.prototype.eventTitleFollower=null,e.prototype.minTime=null,e.prototype.maxTime=null,e.prototype.timeWindowMs=null,e.prototype.slotDuration=null,e.prototype.snapDuration=null,e.prototype.duration=null,e.prototype.labelInterval=null,e.prototype.headerFormats=null,e.prototype.isTimeScale=null,e.prototype.largeUnit=null,e.prototype.emphasizeWeeks=!1,e.prototype.titleFollower=null,e.prototype.segContainerEl=null,e.prototype.segContainerHeight=null,e.prototype.bgSegContainerEl=null,e.prototype.helperEls=null,e.prototype.innerEl=null,e.prototype.opt=function(t){return this.view.opt(t)},e.prototype.isValidDate=function(t){return!this.view.isHiddenDay(t)&&(!this.isTimeScale||((t.time()-this.minTime)%864e5+864e5)%864e5<this.timeWindowMs)},e.prototype.computeDisplayEventTime=function(){return!this.isTimeScale},e.prototype.computeDisplayEventEnd=function(){return!1},e.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},e.prototype.normalizeGridDate=function(t){var e;return this.isTimeScale?(e=t.clone()).hasTime()||e.time(0):(e=t.clone().stripTime(),this.largeUnit&&e.startOf(this.largeUnit)),e},e.prototype.normalizeGridRange=function(t){var e,i;return this.isTimeScale?i={start:this.normalizeGridDate(t.start),end:this.normalizeGridDate(t.end)}:(i=this.view.computeDayRange(t),this.largeUnit&&(i.start.startOf(this.largeUnit),(e=i.end.clone().startOf(this.largeUnit)).isSame(i.end)&&e.isAfter(i.start)||e.add(this.slotDuration),i.end=e)),i},e.prototype.rangeUpdated=function(){var t,e;for(this.start=this.normalizeGridDate(this.start).add(this.minTime),this.end=this.normalizeGridDate(this.end).subtract(1,"day").add(this.maxTime),e=[],t=this.start.clone();t<this.end;)this.isValidDate(t)&&e.push(t.clone()),t.add(this.slotDuration);return this.slotDates=e,this.updateGridDates()},e.prototype.updateGridDates=function(){var t,e,i,n,s;for(n=-1,e=0,i=[],s=[],t=this.start.clone();t<this.end;)this.isValidDate(t)?(n++,i.push(n),s.push(e)):i.push(n+.5),t.add(this.snapDuration),e++;return this.snapDiffToIndex=i,this.snapIndexToDiff=s,this.snapCnt=n+1,this.slotCnt=this.snapCnt/this.snapsPerSlot},e.prototype.spanToSegs=function(t){var e,i;return e=this.normalizeGridRange(t),this.computeDateSnapCoverage(t.start)<this.computeDateSnapCoverage(t.end)&&(i=ft(e,this))?(i.isStart&&!this.isValidDate(i.start)&&(i.isStart=!1),i.isEnd&&i.end&&!this.isValidDate(i.end.clone().subtract(1))&&(i.isEnd=!1),[i]):[]},e.prototype.prepareHits=function(){return this.buildCoords()},e.prototype.queryHit=function(t,e){var i,n,s,r,o,a,l,d,h,c,u,p;return p=this.snapsPerSlot,r=this.slatCoordCache,null!=(i=this.containerCoordCache).getVerticalIndex(e)&&null!=(o=r.getHorizontalIndex(t))?(d=r.getWidth(o),this.isRTL?(s=((l=r.getRightOffset(o))-t)/d,h=o*p+(n=Math.floor(s*p)),c=(u=l-n/p*d)-(n+1)/p*d):(s=(t-(a=r.getLeftOffset(o)))/d,h=o*p+(n=Math.floor(s*p)),c=a+n/p*d,u=a+(n+1)/p*d),{snap:h,component:this,left:c,right:u,top:i.getTopOffset(0),bottom:i.getBottomOffset(0)}):void 0},e.prototype.getHitSpan=function(t){return this.getSnapRange(t.snap)},e.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},e.prototype.getSnapRange=function(t){var e,i;return(i=this.start.clone()).add(yt(this.snapDuration,this.snapIndexToDiff[t])),e=i.clone().add(this.snapDuration),{start:i,end:e}},e.prototype.getSnapEl=function(t){return this.slatEls.eq(Math.floor(t/this.snapsPerSlot))},e.prototype.renderSkeleton=function(){return this.headScroller=new L("invisible-scroll","hidden"),this.headEl.append(this.headScroller.el),this.bodyScroller=new L,this.el.append(this.bodyScroller.el),this.innerEl=this.bodyScroller.contentEl,this.slatContainerEl=w('<div class="fc-slats"/>').appendTo(this.bodyScroller.bgEl),this.segContainerEl=w('<div class="fc-event-container"/>').appendTo(this.bodyScroller.contentEl),this.bgSegContainerEl=this.bodyScroller.bgEl,this.containerCoordCache=new r({els:this.bodyScroller.innerEl,isHorizontal:!0,isVertical:!0}),this.joiner=new Y("horizontal",[this.headScroller,this.bodyScroller]),this.follower=new G(this.headScroller),this.eventTitleFollower=new G(this.bodyScroller),this.eventTitleFollower.minTravel=50,this.isRTL?this.eventTitleFollower.containOnNaturalRight=!0:this.eventTitleFollower.containOnNaturalLeft=!0,e.__super__.renderSkeleton.apply(this,arguments)},e.prototype.headColEls=null,e.prototype.slatColEls=null,e.prototype.renderDates=function(){var t,e,i,n,s;for(this.headScroller.contentEl.html(this.renderHeadHtml()),this.headColEls=this.headScroller.contentEl.find("col"),this.slatContainerEl.html(this.renderSlatHtml()),this.slatColEls=this.slatContainerEl.find("col"),this.slatEls=this.slatContainerEl.find("td"),this.slatCoordCache=new r({els:this.slatEls,isHorizontal:!0}),this.slatInnerCoordCache=new r({els:this.slatEls.find("> div"),isHorizontal:!0,offsetParent:this.bodyScroller.innerEl}),e=i=0,n=(s=this.slotDates).length;i<n;e=++i)t=s[e],this.view.trigger("dayRender",null,t,this.slatEls.eq(e));return this.follower?this.follower.setSprites(this.headEl.find("tr:not(:last-child) span")):void 0},e.prototype.unrenderDates=function(){return this.follower&&this.follower.clearSprites(),this.headScroller.contentEl.empty(),this.slatContainerEl.empty(),this.headScroller.contentEl.add(this.bodyScroller.contentEl).css({minWidth:"",width:""})},e.prototype.renderHeadHtml=function(){var t,e,i,n,s,r,o,a,l,d,h,c,u,p,f,g,m,v,_,w,y,b,S,x,C,D,E,T,k,$,R,H,M,z,I,F;for(f=this.labelInterval,r=this.headerFormats,e=function(){var t,e,i;for(i=[],t=0,e=r.length;t<e;t++)s=r[t],i.push([]);return i}(),T=g=null,M=[],c=0,m=(z=this.slotDates).length;c<m;c++){for(F=(i=z[c]).week(),h=this.emphasizeWeeks&&null!==T&&T!==F,$=u=0,v=r.length;u<v;$=++u)s=r[$],g=(R=e[$])[R.length-1],D=null,1<r.length&&$<r.length-1?(I=i.format(s),n=i.format(),g&&g.text===I?g.colspan+=1:D={text:I,dateData:n,colspan:1}):!g||vt(nt(this.start,i,f))?D={text:I=i.format(s),dateData:n=i.format(),colspan:1}:g.colspan+=1,D&&(D.weekStart=h,R.push(D));M.push({weekStart:h}),T=F}for(l=f>this.slotDuration,o="<table>",o+="<colgroup>",p=0,_=z.length;p<_;p++)i=z[p],o+="<col/>";for(o+="</colgroup>",o+="<tbody>",a=x=0,w=e.length;x<w;a=++x){for(R=e[a],d=a===e.length-1,o+="<tr"+(l&&d?' class="fc-chrono"':"")+">",C=0,y=R.length;C<y;C++)t=R[C],o+='<th class="'+this.view.widgetHeaderClass+" "+(t.weekStart?"fc-em-cell":"")+'" data-date="'+t.dateData+'"'+(1<t.colspan?' colspan="'+t.colspan+'"':"")+'><div class="fc-cell-content"><span class="fc-cell-text">'+pt(t.text)+"</span></div></th>";o+="</tr>"}for(o+="</tbody></table>",H="<table>",H+="<colgroup>",E=0,b=M.length;E<b;E++)t=M[E],H+="<col/>";for(H+="</colgroup>",H+="<tbody><tr>",a=k=0,S=M.length;k<S;a=++k)t=M[a],i=z[a],H+=this.slatCellHtml(i,t.weekStart);return H+="</tr></tbody></table>",this._slatHtml=H,o},e.prototype.renderSlatHtml=function(){return this._slatHtml},e.prototype.slatCellHtml=function(t,e){var i;return this.isTimeScale?(i=[]).push(vt(nt(this.start,t,this.labelInterval))?"fc-major":"fc-minor"):(i=this.getDayClasses(t)).push("fc-day"),i.unshift(this.view.widgetContentClass),e&&i.push("fc-em-cell"),'<td class="'+i.join(" ")+'" data-date="'+t.format()+'"><div /></td>'},e.prototype.businessHourSegs=null,e.prototype.renderBusinessHours=function(){var t,e;return this.largeUnit?void 0:(t=this.view.calendar.getBusinessHoursEvents(!this.isTimeScale),e=this.businessHourSegs=this.eventsToSegs(t),this.renderFill("businessHours",e,"bgevent"))},e.prototype.unrenderBusinessHours=function(){return this.unrenderFill("businessHours")},e.prototype.nowIndicatorEls=null,e.prototype.getNowIndicatorUnit=function(){return this.isTimeScale?U(this.slotDuration):void 0},e.prototype.renderNowIndicator=function(t){var e,i,n;return n=[],(t=this.normalizeGridDate(t))>=this.start&&t<this.end&&(e=this.dateToCoord(t),i=this.isRTL?{right:-e}:{left:e},n.push(w("<div class='fc-now-indicator fc-now-indicator-arrow'></div>").css(i).appendTo(this.headScroller.innerEl)[0]),n.push(w("<div class='fc-now-indicator fc-now-indicator-line'></div>").css(i).appendTo(this.bodyScroller.innerEl)[0])),this.nowIndicatorEls=w(n)},e.prototype.unrenderNowIndicator=function(){return this.nowIndicatorEls?(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null):void 0},e.prototype.explicitSlotWidth=null,e.prototype.defaultSlotWidth=null,e.prototype.updateWidth=function(){var t,e,i,n,s;return e="",n=s=Math.round(this.slotWidth||(this.slotWidth=this.computeSlotWidth())),(i=s*this.slotDates.length)<(t=this.bodyScroller.scrollEl[0].clientWidth)&&(e=t,i="",n=Math.floor(t/this.slotDates.length)),this.headScroller.setContentWidth(i),this.headScroller.setContentMinWidth(e),this.bodyScroller.setContentWidth(i),this.bodyScroller.setContentMinWidth(e),this.headColEls.slice(0,-1).add(this.slatColEls.slice(0,-1)).width(n),this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.buildCoords(),this.updateSegPositions(),this.follower&&this.follower.update(),this.eventTitleFollower?this.eventTitleFollower.update():void 0},e.prototype.computeSlotWidth=function(){var t,n,e,i,s;return n=0,this.headEl.find("tr:last-child th span").each(function(t,e){var i;return i=w(e).outerWidth(),n=Math.max(n,i)}),t=n+1,s=it(this.labelInterval,this.slotDuration),i=Math.ceil(t/s),(e=this.headColEls.eq(0).css("min-width"))&&((e=parseInt(e,10))&&(i=Math.max(i,e))),i},e.prototype.buildCoords=function(){return this.containerCoordCache.build(),this.slatCoordCache.build(),this.slatInnerCoordCache.build()},e.prototype.computeDateSnapCoverage=function(t){var e,i,n;return(i=nt(this.start,t,this.snapDuration))<0?0:i>=this.snapDiffToIndex.length?this.snapCnt:(n=Math.floor(i),e=this.snapDiffToIndex[n],vt(e)?e+=i-n:e=Math.ceil(e),e)},e.prototype.dateToCoord=function(t){var e,i,n,s;return n=this.computeDateSnapCoverage(t)/this.snapsPerSlot,s=Math.floor(n),i=n-(s=Math.min(s,this.slotCnt-1)),e=this.slatInnerCoordCache,this.isRTL?e.getRightPosition(s)-e.getWidth(s)*i-this.containerCoordCache.getWidth(0):e.getLeftPosition(s)+e.getWidth(s)*i},e.prototype.rangeToCoords=function(t){return this.isRTL?{right:this.dateToCoord(t.start),left:this.dateToCoord(t.end)}:{left:this.dateToCoord(t.start),right:this.dateToCoord(t.end)}},e.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},e.prototype.updateSegPositions=function(){var t,e,i,n,s;for(e=0,i=(s=(this.segs||[]).concat(this.businessHourSegs||[])).length;e<i;e++)n=s[e],t=this.rangeToCoords(n),n.el.css({left:n.left=t.left,right:-(n.right=t.right)})},e.prototype.computeInitialScroll=function(){var t,e;return t=0,this.isTimeScale&&((e=this.opt("scrollTime"))&&(e=d.duration(e),t=this.dateToCoord(this.start.clone().time(e)))),{left:t,top:0}},e.prototype.queryScroll=function(){return{left:bt(this.bodyScroller.scrollEl),top:this.bodyScroller.scrollEl.scrollTop()}},e.prototype.setScroll=function(t){return bt(this.headScroller.scrollEl,t.left),bt(this.bodyScroller.scrollEl,t.left),this.bodyScroller.scrollEl.scrollTop(t.top)},e.prototype.renderFgSegs=function(t){return t=this.renderFgSegEls(t),this.renderFgSegsInContainers([[this,t]]),this.updateSegFollowers(t),t},e.prototype.unrenderFgSegs=function(){return this.clearSegFollowers(),this.unrenderFgContainers([this])},e.prototype.renderFgSegsInContainers=function(t){var e,i,n,s,r,o,a,l,d,h,c,u,p,f,g,m,v,_,w,y,b,S,x,C,D;for(n=0,o=t.length;n<o;n++)for(e=(w=t[n])[0],s=0,a=(D=w[1]).length;s<a;s++)C=D[s],i=this.rangeToCoords(C),C.el.css({left:C.left=i.left,right:-(C.right=i.right)});for(r=0,l=t.length;r<l;r++)for(e=(y=t[r])[0],f=0,d=(D=y[1]).length;f<d;f++)(C=D[f]).el.appendTo(e.segContainerEl);for(g=0,h=t.length;g<h;g++){for(e=(b=t[g])[0],m=0,c=(D=b[1]).length;m<c;m++)(C=D[m]).height=C.el.outerHeight(!0);this.buildSegLevels(D),e.segContainerHeight=X(D)}for(x=[],v=0,u=t.length;v<u;v++){for(e=(S=t[v])[0],_=0,p=(D=S[1]).length;_<p;_++)(C=D[_]).el.css("top",C.top);x.push(e.segContainerEl.height(e.segContainerHeight))}return x},e.prototype.buildSegLevels=function(t){var e,i,n,s,r,o,a,l,d,h,c,u,p,f;for(p=[],this.sortEventSegs(t),n=0,o=t.length;n<o;n++){for((f=t[n]).above=[],d=0;d<p.length;){for(i=!1,s=0,a=(c=p[d]).length;s<a;s++)h=c[s],It(f,h)&&(f.above.push(h),i=!0);if(!i)break;d+=1}for((p[d]||(p[d]=[])).push(f),d+=1;d<p.length;){for(r=0,l=(u=p[d]).length;r<l;r++)e=u[r],It(f,e)&&e.above.push(f);d+=1}}return p},e.prototype.unrenderFgContainers=function(t){var e,i,n,s;for(s=[],i=0,n=t.length;i<n;i++)(e=t[i]).segContainerEl.empty(),e.segContainerEl.height(""),s.push(e.segContainerHeight=null);return s},e.prototype.fgSegHtml=function(t){var e,i,n,s,r,o;return i=t.event,n=this.view.isEventDraggable(i),r=t.isStart&&this.view.isEventResizableFromStart(i),s=t.isEnd&&this.view.isEventResizableFromEnd(i),(e=this.getSegClasses(t,n,r||s)).unshift("fc-timeline-event","fc-h-event"),o=this.getEventTimeText(i),'<a class="'+e.join(" ")+'" style="'+J(this.getSegSkinCss(t))+'"'+(i.url?' href="'+pt(i.url)+'"':"")+'><div class="fc-content">'+(o?'<span class="fc-time">'+pt(o)+"</span>":"")+'<span class="fc-title">'+(i.title?pt(i.title):"&nbsp;")+'</span></div><div class="fc-bg" />'+(r?'<div class="fc-resizer fc-start-resizer"></div>':"")+(s?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},e.prototype.updateSegFollowers=function(t){var e,i,n,s;if(this.eventTitleFollower){for(n=[],e=0,i=t.length;e<i;e++)(s=t[e].el.find(".fc-title")).length&&n.push(new P(s));return this.eventTitleFollower.setSprites(n)}},e.prototype.clearSegFollowers=function(){return this.eventTitleFollower?this.eventTitleFollower.clearSprites():void 0},e.prototype.segDragStart=function(){return e.__super__.segDragStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},e.prototype.segDragEnd=function(){return e.__super__.segDragEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},e.prototype.segResizeStart=function(){return e.__super__.segResizeStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},e.prototype.segResizeEnd=function(){return e.__super__.segResizeEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},e.prototype.renderHelper=function(t,e){var i;return i=this.eventToSegs(t),i=this.renderFgSegEls(i),this.renderHelperSegsInContainers([[this,i]],e)},e.prototype.renderHelperSegsInContainers=function(t,e){var i,n,s,r,o,a,l,d,h,c,u,p,f,g,m,v,_;for(r=[],o=0,d=t.length;o<d;o++)for(i=(f=t[o])[0],a=0,h=(_=f[1]).length;a<h;a++)v=_[a],n=this.rangeToCoords(v),v.el.css({left:v.left=n.left,right:-(v.right=n.right)}),e&&e.resourceId===(null!=(g=i.resource)?g.id:void 0)?v.el.css("top",e.el.css("top")):v.el.css("top",0);for(l=0,c=t.length;l<c;l++)for(i=(m=t[l])[0],_=m[1],s=w('<div class="fc-event-container fc-helper-container"/>').appendTo(i.innerEl),r.push(s[0]),p=0,u=_.length;p<u;p++)v=_[p],s.append(v.el);return this.helperEls=this.helperEls?this.helperEls.add(w(r)):w(r)},e.prototype.unrenderHelper=function(){return this.helperEls?(this.helperEls.remove(),this.helperEls=null):void 0},e.prototype.renderEventResize=function(t,e){return this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},e.prototype.unrenderEventResize=function(){return this.unrenderHighlight(),this.unrenderHelper()},e.prototype.renderFill=function(t,e,i){return e=this.renderFillSegEls(t,e),this.renderFillInContainers(t,[[this,e]],i),e},e.prototype.renderFillInContainers=function(t,e,i){var n,s,r,o,a,l;for(a=[],s=0,r=e.length;s<r;s++)n=(o=e[s])[0],l=o[1],a.push(this.renderFillInContainer(t,n,l,i));return a},e.prototype.renderFillInContainer=function(t,e,i,n){var s,r,o,a,l;if(i.length){for(n||(n=t.toLowerCase()),s=w('<div class="fc-'+n+'-container" />').appendTo(e.bgSegContainerEl),o=0,a=i.length;o<a;o++)l=i[o],r=this.rangeToCoords(l),l.el.css({left:l.left=r.left,right:-(l.right=r.right)}),l.el.appendTo(s);return this.elsByFill[t]=this.elsByFill[t]?this.elsByFill[t].add(s):s}},e.prototype.renderDrag=function(t,e){return e?(this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0):(this.renderHighlight(this.eventToSpan(t)),!1)},e.prototype.unrenderDrag=function(){return this.unrenderHelper(),this.unrenderHighlight()},e}(),X=function(t){var e,i,n,s;for(e=n=0,i=t.length;e<i;e++)s=t[e],n=Math.max(n,Z(s));return n},Z=function(t){return null==t.top&&(t.top=X(t.above)),t.top+t.height},It=function(t,e){return t.left<e.right&&t.right>e.left},v=18,g=6,p=200,m=1e3,o={months:1},F=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}],A.prototype.initScaleProps=function(){var t,e,i;return this.labelInterval=this.queryDurationOption("slotLabelInterval"),this.slotDuration=this.queryDurationOption("slotDuration"),this.ensureGridDuration(),this.validateLabelAndSlot(),this.ensureLabelInterval(),this.ensureSlotDuration(),t=this.opt("slotLabelFormat"),i=w.type(t),this.headerFormats="array"===i?t:"string"===i?[t]:this.computeHeaderFormats(),this.isTimeScale=st(this.slotDuration),this.largeUnit=this.isTimeScale?void 0:(e=U(this.slotDuration),/year|month|week/.test(e)?e:void 0),this.emphasizeWeeks=1===this.slotDuration.as("days")&&2<=this.duration.as("weeks")&&!this.opt("businessHours")},A.prototype.queryDurationOption=function(t){var e,i;return null!=(i=this.opt(t))&&+(e=d.duration(i))?e:void 0},A.prototype.validateLabelAndSlot=function(){var t,e,i;return this.labelInterval&&(t=it(this.duration,this.labelInterval),m<t&&(c.warn("slotLabelInterval results in too many cells"),this.labelInterval=null)),this.slotDuration&&(e=it(this.duration,this.slotDuration),m<e&&(c.warn("slotDuration results in too many cells"),this.slotDuration=null)),this.labelInterval&&this.slotDuration&&(i=it(this.labelInterval,this.slotDuration),!vt(i)||i<1)?(c.warn("slotLabelInterval must be a multiple of slotDuration"),this.slotDuration=null):void 0},A.prototype.ensureGridDuration=function(){var t,e,i,n,s;if(!(t=this.duration)){if(!(t=this.view.intervalDuration))if(this.labelInterval||this.slotDuration)for(s=this.ensureLabelInterval(),i=F.length-1;0<=i&&(e=F[i],t=d.duration(e),n=it(t,s),!(v<=n));i+=-1);else t=d.duration(o);this.duration=t}return t},A.prototype.ensureLabelInterval=function(){var t,e,i,n,s,r,o,a,l;if(!(s=this.labelInterval)){if(this.duration||this.slotDuration||this.ensureGridDuration(),this.slotDuration){for(e=0,r=F.length;e<r;e++)if(t=F[e],l=d.duration(t),a=it(l,this.slotDuration),vt(a)&&a<=g){s=l;break}s||(s=this.slotDuration)}else for(i=0,o=F.length;i<o&&(t=F[i],s=d.duration(t),n=it(this.duration,s),!(v<=n));i++);this.labelInterval=s}return s},A.prototype.ensureSlotDuration=function(){var t,e,i,n,s,r,o,a;if(!(r=this.slotDuration)){for(i=this.ensureLabelInterval(),e=0,n=F.length;e<n;e++)if(t=F[e],a=d.duration(t),o=it(i,a),vt(o)&&1<o&&o<=g){r=a;break}r&&this.duration&&(s=it(this.duration,r),p<s&&(r=null)),r||(r=i),this.slotDuration=r}return r},A.prototype.computeHeaderFormats=function(){var t,e,i,n,s,r,o;switch(this.view,n=this.duration,s=this.labelInterval,r=U(s),o=this.opt("weekNumbers"),t=e=i=null,"week"!==r||o||(r="day"),r){case"year":t="YYYY";break;case"month":1<n.asYears()&&(t="YYYY"),e="MMM";break;case"week":1<n.asYears()&&(t="YYYY"),e=this.opt("shortWeekFormat");break;case"day":1<n.asYears()?t=this.opt("monthYearFormat"):1<n.asMonths()&&(t="MMMM"),o&&(e=this.opt("weekFormat")),i="dd D";break;case"hour":o&&(t=this.opt("weekFormat")),1<n.asDays()&&(e=this.opt("dayOfMonthFormat")),i=this.opt("smallTimeFormat");break;case"minute":s.asMinutes()/60>=g?(t=this.opt("hourFormat"),e="[:]mm"):t=this.opt("mediumTimeFormat");break;case"second":s.asSeconds()/60>=g?(t="LT",e="[:]ss"):t="LTS";break;case"millisecond":t="LTS",e="[.]SSS"}return[].concat(t||[],e||[],i||[])},c.views.timeline={"class":W,defaults:{eventResizableFromStart:!0}},c.views.timelineDay={type:"timeline",duration:{days:1}},c.views.timelineWeek={type:"timeline",duration:{weeks:1}},c.views.timelineMonth={type:"timeline",duration:{months:1}},c.views.timelineYear={type:"timeline",duration:{years:1}},H=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,W),e.mixin(M),e.prototype.resourceGrid=null,e.prototype.tbodyHash=null,e.prototype.joiner=null,e.prototype.dividerEls=null,e.prototype.superHeaderText=null,e.prototype.isVGrouping=null,e.prototype.isHGrouping=null,e.prototype.groupSpecs=null,e.prototype.colSpecs=null,e.prototype.orderSpecs=null,e.prototype.rowHierarchy=null,e.prototype.resourceRowHash=null,e.prototype.nestingCnt=0,e.prototype.isNesting=null,e.prototype.dividerWidth=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.processResourceOptions(),this.resourceGrid=new O(this),this.rowHierarchy=new I(this),this.resourceRowHash={}},e.prototype.instantiateGrid=function(){return new R(this)},e.prototype.processResourceOptions=function(){var t,e,i,n,s,r,o,a,l,d,h,c,u,p,f,g,m,v,_,w,y,b;for(t=this.opt("resourceColumns")||[],f=this.opt("resourceLabelText"),n="Resources",b=null,t.length?b=f:t.push({labelText:f||n,text:this.getResourceTextFunc()}),w=[],s=[],d=h=!(o=[]),c=0,g=t.length;c<g;c++)(i=t[c]).group?s.push(i):w.push(i);for(w[0].isMain=!0,s.length?(o=s,h=!0):(a=this.opt("resourceGroupField"))&&(d=!0,o.push({field:a,text:this.opt("resourceGroupText"),render:this.opt("resourceGroupRender")})),y=[],u=0,m=(e=Et(this.opt("resourceOrder"))).length;u<m;u++){for(_=e[u],l=!1,p=0,v=o.length;p<v;p++)if((r=o[p]).field===_.field){r.order=_.order,l=!0;break}l||y.push(_)}return this.superHeaderText=b,this.isVGrouping=h,this.isHGrouping=d,this.groupSpecs=o,this.colSpecs=s.concat(w),this.orderSpecs=y},e.prototype.renderSkeleton=function(){return e.__super__.renderSkeleton.apply(this,arguments),this.renderResourceGridSkeleton(),this.tbodyHash={spreadsheet:this.resourceGrid.tbodyEl,event:this.timeGrid.tbodyEl},this.joiner=new Y("vertical",[this.resourceGrid.bodyScroller,this.timeGrid.bodyScroller]),this.initDividerMoving()},e.prototype.renderSkeletonHtml=function(){
return'<table> <thead class="fc-head"> <tr> <td class="fc-resource-area '+this.widgetHeaderClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area '+this.widgetContentClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderResourceGridSkeleton=function(){return this.resourceGrid.el=this.el.find("tbody .fc-resource-area"),this.resourceGrid.headEl=this.el.find("thead .fc-resource-area"),this.resourceGrid.renderSkeleton()},e.prototype.initDividerMoving=function(){var t,e;return this.dividerEls=this.el.find(".fc-divider"),this.dividerWidth=null!=(t=this.opt("resourceAreaWidth"))?t:this.resourceGrid.tableWidth,null!=this.dividerWidth&&this.positionDivider(this.dividerWidth),this.dividerEls.on("mousedown",(e=this,function(t){return e.dividerMousedown(t)}))},e.prototype.dividerMousedown=function(t){var i,n,s,r,e,o,a;return i=this.opt("isRTL"),s=30,n=this.el.width()-30,r=this.getNaturalDividerWidth(),new l({dragStart:(a=this,function(){return a.dividerEls.addClass("fc-active")}),drag:(o=this,function(t){var e;return e=i?r-t:r+t,e=Math.max(e,s),e=Math.min(e,n),o.dividerWidth=e,o.positionDivider(e),o.updateWidth()}),dragStop:(e=this,function(){return e.dividerEls.removeClass("fc-active")})}).mousedown(t)},e.prototype.getNaturalDividerWidth=function(){return this.el.find(".fc-resource-area").width()},e.prototype.positionDivider=function(t){return this.el.find(".fc-resource-area").width(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.syncRowHeights(),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.syncRowHeights(),this.updateWidth()},e.prototype.updateWidth=function(){return e.__super__.updateWidth.apply(this,arguments),this.resourceGrid.updateWidth(),this.joiner.update(),this.cellFollower?this.cellFollower.update():void 0},e.prototype.updateHeight=function(t){return e.__super__.updateHeight.apply(this,arguments),t?this.syncRowHeights():void 0},e.prototype.setHeight=function(t,e){var i,n;return n=this.syncHeadHeights(),i=e?"auto":t-n-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i),this.resourceGrid.bodyScroller.setHeight(i)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-Math.max(this.resourceGrid.headScroller.el.outerHeight(),this.timeGrid.headScroller.el.outerHeight())-Math.max(this.resourceGrid.bodyScroller.el.outerHeight(),this.timeGrid.bodyScroller.el.outerHeight())},e.prototype.syncHeadHeights=function(){var t;return this.resourceGrid.headHeight("auto"),this.timeGrid.headHeight("auto"),t=Math.max(this.resourceGrid.headHeight(),this.timeGrid.headHeight()),this.resourceGrid.headHeight(t),this.timeGrid.headHeight(t),t},e.prototype.scrollToResource=function(t){return this.timeGrid.scrollToResource(t)},e.prototype.setResources=function(t){var e,i,n;for(this.batchRows(),e=0,i=t.length;e<i;e++)n=t[e],this.insertResource(n);return this.rowHierarchy.show(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.unsetResources=function(){return this.clearEvents(),this.batchRows(),this.rowHierarchy.removeChildren(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.addResource=function(t){return this.insertResource(t),this.reinitializeCellFollowers()},e.prototype.removeResource=function(t){var e;return(e=this.getResourceRow(t.id))?(this.batchRows(),e.remove(),this.unbatchRows(),this.reinitializeCellFollowers()):void 0},e.prototype.cellFollower=null,e.prototype.reinitializeCellFollowers=function(){var t,e,i,n,s,r;for(this.cellFollower&&this.cellFollower.clearSprites(),this.cellFollower=new G(this.resourceGrid.bodyScroller),this.cellFollower.isHFollowing=!1,this.cellFollower.isVFollowing=!0,n=[],e=0,i=(s=this.rowHierarchy.getNodes()).length;e<i;e++)(r=s[e])instanceof B&&r.groupTd&&((t=r.groupTd.find(".fc-cell-content")).length&&n.push(t[0]));return this.cellFollower.setSprites(w(n))},e.prototype.insertResource=function(t,e){var i,n,s,r,o,a,l;for(l=new k(this,t),null==e&&((r=t.parentId)&&(e=this.getResourceRow(r))),e?this.insertRowAsChild(l,e):this.insertRow(l),a=[],n=0,s=(o=t.children).length;n<s;n++)i=o[n],a.push(this.insertResource(i,l));return a},e.prototype.insertRow=function(t,e,i){var n;return null==e&&(e=this.rowHierarchy),null==i&&(i=this.groupSpecs),i.length?(n=this.ensureResourceGroup(t,e,i[0]))instanceof f?this.insertRowAsChild(t,n):this.insertRow(t,n,i.slice(1)):this.insertRowAsChild(t,e)},e.prototype.insertRowAsChild=function(t,e){return e.addChild(t,this.computeChildRowPosition(t,e))},e.prototype.computeChildRowPosition=function(t,e){var i,n,s,r,o;if(this.orderSpecs.length)for(i=n=0,s=(r=e.children).length;n<s;i=++n)if(o=r[i],0<this.compareResources(o.resource||{},t.resource||{}))return i;return null},e.prototype.compareResources=function(t,e){return q(t,e,this.orderSpecs)},e.prototype.ensureResourceGroup=function(t,e,i){var n,s,r,o,a,l,d,h,c,u,p;if(r=(t.resource||{})[i.field],s=null,i.order)for(o=a=0,d=(c=e.children).length;a<d;o=++a){if(p=c[o],0===(n=rt(p.groupValue,r)*i.order)){s=p;break}if(0<n)break}else for(o=l=0,h=(u=e.children).length;l<h;o=++l)if((p=u[o]).groupValue===r){s=p;break}return s||(s=this.isVGrouping?new B(this,i,r):new f(this,i,r),e.addChild(s,o)),s},e.prototype.pairSegsWithRows=function(t){var e,i,n,s,r,o,a,l;for(s=[],r={},e=0,i=t.length;e<i;e++)(o=(l=t[e]).resourceId)&&((a=this.getResourceRow(o))&&((n=r[o])||(n=[a,[]],s.push(n),r[o]=n),n[1].push(l)));return s},e.prototype.rowAdded=function(t){var e;return t instanceof k&&(this.resourceRowHash[t.resource.id]=t),this.isNesting!==(e=Boolean(this.nestingCnt+=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.rowRemoved=function(t){var e;return t instanceof k&&delete this.resourceRowHash[t.resource.id],this.isNesting!==(e=Boolean(this.nestingCnt-=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.batchRowDepth=0,e.prototype.shownRowBatch=null,e.prototype.hiddenRowBatch=null,e.prototype.batchRows=function(){return this.batchRowDepth++?void 0:(this.shownRowBatch=[],this.hiddenRowBatch=[])},e.prototype.unbatchRows=function(){return--this.batchRowDepth?void 0:(this.hiddenRowBatch.length&&this.rowsHidden(this.hiddenRowBatch),this.shownRowBatch.length&&this.rowsShown(this.shownRowBatch),this.hiddenRowBatch=null,this.shownRowBatch=null)},e.prototype.rowShown=function(t){return this.shownRowBatch?this.shownRowBatch.push(t):this.rowsShown([t])},e.prototype.rowHidden=function(t){return this.hiddenRowBatch?this.hiddenRowBatch.push(t):this.rowsHidden([t])},e.prototype.rowsShown=function(t){return this.syncRowHeights(t),this.updateWidth()},e.prototype.rowsHidden=function(){return this.updateWidth()},e.prototype.syncRowHeights=function(n,s){var r,t,e,i,o,a,l,d,h,c;for(null==s&&(s=!1),null==n&&(n=this.getVisibleRows()),a=0,d=n.length;a<d;a++)(c=n[a]).setTrInnerHeight("");for(o=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)c=n[t],r=c.getMaxTrInnerHeight(),s&&(r+=r%2),i.push(r);return i}(),i=l=0,h=n.length;l<h;i=++l)(c=n[i]).setTrInnerHeight(o[i]);return!s&&(t=this.resourceGrid.tbodyEl.height(),e=this.timeGrid.tbodyEl.height(),1<Math.abs(t-e))?this.syncRowHeights(n,!0):void 0},e.prototype.getVisibleRows=function(){var t,e,i,n,s;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;t<e;t++)(s=i[t]).isShown&&n.push(s);return n},e.prototype.getEventRows=function(){var t,e,i,n,s;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;t<e;t++)(s=i[t])instanceof h&&n.push(s);return n},e.prototype.getResourceRow=function(t){return this.resourceRowHash[t]},e.prototype.setScroll=function(t){return e.__super__.setScroll.apply(this,arguments),this.resourceGrid.bodyScroller.scrollTop(t.top)},e}(),R=function(){function l(){return l.__super__.constructor.apply(this,arguments)}return Pt(l,A),l.mixin(D),l.prototype.eventRows=null,l.prototype.shownEventRows=null,l.prototype.tbodyEl=null,l.prototype.rowCoordCache=null,l.prototype.spanToSegs=function(t){var e,i,n,s,r,o;if(o=l.__super__.spanToSegs.apply(this,arguments),e=this.view.calendar,s=t.resourceId)for(i=0,n=o.length;i<n;i++)(r=o[i]).resource=e.getResourceById(s),r.resourceId=s;return o},l.prototype.prepareHits=function(){var s,t;return l.__super__.prepareHits.apply(this,arguments),this.eventRows=this.view.getEventRows(),this.shownEventRows=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.eventRows).length;t<e;t++)(s=i[t]).isShown&&n.push(s);return n}.call(this),t=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.shownEventRows).length;t<e;t++)s=i[t],n.push(s.getTr("event")[0]);return n}.call(this),this.rowCoordCache=new r({els:t,isVertical:!0}),this.rowCoordCache.build()},l.prototype.releaseHits=function(){return l.__super__.releaseHits.apply(this,arguments),this.eventRows=null,this.shownEventRows=null,this.rowCoordCache.clear()},l.prototype.queryHit=function(t,e){var i,n;return(n=l.__super__.queryHit.apply(this,arguments))&&null!=(i=this.rowCoordCache.getVerticalIndex(e))?{resourceId:this.shownEventRows[i].resource.id,snap:n.snap,component:this,left:n.left,right:n.right,top:this.rowCoordCache.getTopOffset(i),bottom:this.rowCoordCache.getBottomOffset(i)}:void 0},l.prototype.getHitSpan=function(t){var e;return(e=this.getSnapRange(t.snap)).resourceId=t.resourceId,e},l.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},l.prototype.renderSkeleton=function(){var t;return l.__super__.renderSkeleton.apply(this,arguments),this.segContainerEl.remove(),this.segContainerEl=null,t=w('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.contentEl),this.tbodyEl=t.find("tbody")},l.prototype.renderFgSegs=function(t){var e,i,n,s,r,o,a;for(t=this.renderFgSegEls(t),a=[],n=0,s=(o=this.view.pairSegsWithRows(t)).length;n<s;n++)e=(r=o[n])[0],i=r[1],e.fgSegs=i,e.isShown&&(e.isSegsRendered=!0,a.push(r));return this.renderFgSegsInContainers(a),this.updateSegFollowers(t),t},l.prototype.unrenderFgSegs=function(){var t,e,i,n;for(this.clearSegFollowers(),i=0,n=(e=this.view.getEventRows()).length;i<n;i++)(t=e[i]).fgSegs=null,t.isSegsRendered=!1;return this.unrenderFgContainers(e)},l.prototype.renderFill=function(t,e,i){var n,s,r,o,a,l,d,h,c,u,p,f;for(h=[],a=[],n=0,r=(e=this.renderFillSegEls(t,e)).length;n<r;n++)(p=e[n]).resourceId?h.push(p):a.push(p);for(f=[],s=0,o=(d=this.view.pairSegsWithRows(h)).length;s<o;s++)c=(l=d[s])[0],u=l[1],"bgEvent"===t&&(c.bgSegs=u),c.isShown&&f.push(l);return a.length&&f.unshift([this,a]),this.renderFillInContainers(t,f,i),e},l.prototype.renderHelper=function(t,e){var i,n;return n=this.eventToSegs(t),n=this.renderFgSegEls(n),i=this.view.pairSegsWithRows(n),this.renderHelperSegsInContainers(i,e)},l.prototype.computeInitialScroll=function(t){var e;return e=l.__super__.computeInitialScroll.apply(this,arguments),t&&(e.resourceId=t.resourceId,e.bottom=t.bottom),e},l.prototype.queryScroll=function(){var t,e,i,n,s,r,o,a;for(a=l.__super__.queryScroll.apply(this,arguments),o=this.bodyScroller.scrollEl.offset().top,i=0,n=(s=this.view.getVisibleRows()).length;i<n;i++)if((r=s[i]).resource&&o<(e=(t=r.getTr("event")).offset().top+t.outerHeight())){a.resourceId=r.resource.id,a.bottom=e-o;break}return a},l.prototype.setScroll=function(t){var e,i,n,s;return t.resourceId&&((s=this.view.getResourceRow(t.resourceId))&&((e=s.getTr("event"))&&(n=this.bodyScroller.innerEl.offset().top,i=e.offset().top+e.outerHeight(),t.top=i-t.bottom-n))),l.__super__.setScroll.call(this,t)},l.prototype.scrollToResource=function(t){var e,i,n,s;return(n=this.view.getResourceRow(t.id))&&(e=n.getTr("event"))?(i=this.bodyScroller.innerEl.offset().top,s=e.offset().top-i,this.bodyScroller.scrollEl.scrollTop(s)):void 0},l}(),a=30,O=function(){function t(t){var s;this.view=t,this.isRTL=this.view.opt("isRTL"),this.givenColWidths=this.colWidths=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.view.colSpecs).length;t<e;t++)s=i[t],n.push(s.width);return n}.call(this)}return t.prototype.view=null,t.prototype.headEl=null,t.prototype.el=null,t.prototype.tbodyEl=null,t.prototype.headScroller=null,t.prototype.bodyScroller=null,t.prototype.joiner=null,t.prototype.colGroupHtml="",t.prototype.headTable=null,t.prototype.headColEls=null,t.prototype.headCellEls=null,t.prototype.bodyColEls=null,t.prototype.bodyTable=null,t.prototype.renderSkeleton=function(){return this.headScroller=new L("invisible-scroll","hidden"),this.headScroller.contentEl.html(this.renderHeadHtml()),this.headEl.append(this.headScroller.el),this.bodyScroller=new L("auto","invisible-scroll"),this.bodyScroller.contentEl.html("<table>"+this.colGroupHtml+"<tbody/></table>"),this.tbodyEl=this.bodyScroller.contentEl.find("tbody"),this.el.append(this.bodyScroller.el),this.joiner=new Y("horizontal",[this.headScroller,this.bodyScroller]),this.headTable=this.headEl.find("table"),this.headColEls=this.headEl.find("col"),this.headCellEls=this.headScroller.contentEl.find("tr:last-child th"),this.bodyColEls=this.el.find("col"),this.bodyTable=this.el.find("table"),this.colMinWidths=this.computeColMinWidths(),this.applyColWidths(),this.initColResizing()},t.prototype.renderHeadHtml=function(){var t,e,i,n,s,r,o,a,l,d;for(i="<table>",t="<colgroup>",r=0,a=(e=this.view.colSpecs).length;r<a;r++)t+=(d=e[r]).isMain?'<col class="fc-main-col"/>':"<col/>";for(t+="</colgroup>",i+=this.colGroupHtml=t,i+="<tbody>",this.view.superHeaderText&&(i+='<tr class="fc-super"><th class="'+this.view.widgetHeaderClass+'" colspan="'+e.length+'"><div class="fc-cell-content"><span class="fc-cell-text">'+pt(this.view.superHeaderText)+"</span></div></th></tr>"),i+="<tr>",!0,n=o=0,l=e.length;o<l;n=++o)d=e[n],s=n===e.length-1,i+='<th class="'+this.view.widgetHeaderClass+'"><div><div class="fc-cell-content">'+(d.isMain?'<div class="fc-icon fc-expander-space" />':"")+'<span class="fc-cell-text">'+pt(d.labelText||"")+"</span></div>"+(s?"":'<div class="fc-col-resizer"></div>')+"</div></th>";return(i+="</tr>")+"</tbody></table>"},t.prototype.givenColWidths=null,t.prototype.colWidths=null,t.prototype.colMinWidths=null,t.prototype.tableWidth=null,t.prototype.tableMinWidth=null,t.prototype.initColResizing=function(){return this.headEl.find("th .fc-col-resizer").each((n=this,function(e,i){return(i=w(i)).on("mousedown",function(t){return n.colResizeMousedown(e,t,i)})}));var n},t.prototype.colResizeMousedown=function(i,t,e){var n,s,r,o;return(n=this.colWidths=this.queryColWidths()).pop(),n.push(null),r=n[i],s=Math.min(this.colMinWidths[i],a),new l({dragStart:function(){return e.addClass("fc-active")},drag:(o=this,function(t){var e;return e=r+(o.isRTL?-t:t),e=Math.max(e,s),n[i]=e,o.applyColWidths()}),dragStop:function(){return e.removeClass("fc-active")}}).mousedown(t)},t.prototype.applyColWidths=function(){var t,e,i,n,s,r,o,a,l,d,h,c,u,p,f,g,m;for(i=this.colMinWidths,e=!(t=!0),d=m=0,u=(s=this.colWidths).length;d<u;d++)"number"==typeof(n=s[d])?m+=n:(t=!1,n&&(e=!0));for(a=e&&!this.view.isHGrouping?"auto":"",o=function(){var t,e,i;for(i=[],l=t=0,e=s.length;t<e;l=++t)n=s[l],i.push(null!=n?n:a);return i}(),l=h=g=0,p=o.length;h<p;l=++h)g+="number"==typeof(r=o[l])?r:i[l];for(l=c=0,f=o.length;c<f;l=++c)r=o[l],this.headColEls.eq(l).width(r),this.bodyColEls.eq(l).width(r);return this.headScroller.setContentMinWidth(g),this.bodyScroller.setContentMinWidth(g),this.tableMinWidth=g,this.tableWidth=t?m:void 0},t.prototype.computeColMinWidths=function(){var t,e,i,n,s,r;for(s=[],t=e=0,i=(n=this.givenColWidths).length;e<i;t=++e)r=n[t],s.push("number"==typeof r?r:parseInt(this.headColEls.eq(t).css("min-width"))||a);return s},t.prototype.queryColWidths=function(){var t,e,i,n,s;for(s=[],t=0,e=(n=this.headCellEls).length;t<e;t++)i=n[t],s.push(w(i).outerWidth());return s},t.prototype.updateWidth=function(){return this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.follower?this.follower.update():void 0},t.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},t}(),I=function(){function t(t){this.view=t,this.children=[],this.trHash={},this.trs=w()}return t.prototype.view=null,t.prototype.parent=null,t.prototype.prevSibling=null,t.prototype.children=null,t.prototype.depth=0,t.prototype.hasOwnRow=!1,t.prototype.trHash=null,t.prototype.trs=null,t.prototype.isRendered=!1,t.prototype.isExpanded=!0,t.prototype.isShown=!1,t.prototype.addChild=function(t,e){var i,n,s,r;for(t.remove(),i=this.children,null!=e?i.splice(e,0,t):(e=i.length,i.push(t)),t.prevSibling=0<e?i[e-1]:null,e<i.length-1&&(i[e+1].prevSibling=t),t.parent=this,t.depth=this.depth+(this.hasOwnRow?1:0),n=0,s=(r=t.getNodes()).length;n<s;n++)r[n].added();return this.isShown&&this.isExpanded?t.show():void 0},t.prototype.removeChild=function(t){var e,i,n,s,r,o,a,l;for(n=!1,i=s=0,o=(e=this.children).length;s<o;i=++s)if(e[i]===t){n=!0;break}if(n){for(i<e.length-1&&(e[i+1].prevSibling=t.prevSibling),e.splice(i,1),t.recursivelyUnrender(),r=0,a=(l=t.getNodes()).length;r<a;r++)l[r].removed();return t.parent=null,t.prevSibling=null,t}return!1},t.prototype.removeChildren=function(){var t,e,i,n,s,r;for(t=0,i=(s=this.children).length;t<i;t++)s[t].recursivelyUnrender();for(e=0,n=(r=this.getDescendants()).length;e<n;e++)r[e].removed();return this.children=[]},t.prototype.remove=function(){return this.parent?this.parent.removeChild(this):void 0},t.prototype.getLastChild=function(){var t;return(t=this.children)[t.length-1]},t.prototype.getPrevRow=function(){var t,e;for(e=this;e;){if(e.prevSibling)for(e=e.prevSibling;t=e.getLastChild();)e=t;else e=e.parent;if(e&&e.hasOwnRow&&e.isShown)return e}return null},t.prototype.getLeadingRow=function(){return this.hasOwnRow?this:this.isExpanded&&this.children.length?this.children[0].getLeadingRow():void 0},t.prototype.getRows=function(t){var e,i,n;for(null==t&&(t=[]),this.hasOwnRow&&t.push(this),e=0,i=(n=this.children).length;e<i;e++)n[e].getRows(t);return t},t.prototype.getNodes=function(t){var e,i,n;for(null==t&&(t=[]),t.push(this),e=0,i=(n=this.children).length;e<i;e++)n[e].getNodes(t);return t},t.prototype.getDescendants=function(){var t,e,i,n;for(t=[],e=0,i=(n=this.children).length;e<i;e++)n[e].getNodes(t);return t},t.prototype.render=function(){var t,e,i,n,s,r,o;if(this.trHash={},r=[],this.hasOwnRow)for(o in t=this.getPrevRow(),e=this.view.tbodyHash)n=e[o],s=w("<tr/>"),this.trHash[o]=s,r.push(s[0]),this[i="render"+j(o)+"Content"]&&this[i](s),t?t.trHash[o].after(s):n.prepend(s);return this.trs=w(r).on("click",".fc-expander",kt(this,"toggleExpanded")),this.isRendered=!0},t.prototype.unrender=function(){var t,e,i,n;if(this.isRendered){for(i in t=this.trHash)e=t[i],this[n="unrender"+j(i)+"Content"]&&this[n](e);return this.trHash={},this.trs.remove(),this.trs=w(),this.isRendered=!1,this.isShown=!1,this.hidden()}},t.prototype.recursivelyUnrender=function(){var t,e,i,n,s;for(this.unrender(),s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.recursivelyUnrender());return s},t.prototype.getTr=function(t){return this.trHash[t]},t.prototype.show=function(){var t,e,i,n,s;if(!this.isShown&&(this.isRendered?this.trs.css("display",""):this.render(),this.ensureSegsRendered&&this.ensureSegsRendered(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed(),this.isShown=!0,this.shown(),this.isExpanded)){for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.show());return s}},t.prototype.hide=function(){var t,e,i,n,s;if(this.isShown&&(this.isRendered&&this.trs.hide(),this.isShown=!1,this.hidden(),this.isExpanded)){for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.hide());return s}},t.prototype.expand=function(){var t,e,i;if(!this.isExpanded){for(this.isExpanded=!0,this.indicateExpanded(),this.view.batchRows(),t=0,e=(i=this.children).length;t<e;t++)i[t].show();return this.view.unbatchRows(),this.animateExpand()}},t.prototype.collapse=function(){var t,e,i;if(this.isExpanded){for(this.isExpanded=!1,this.indicateCollapsed(),this.view.batchRows(),t=0,e=(i=this.children).length;t<e;t++)i[t].hide();return this.view.unbatchRows()}},t.prototype.toggleExpanded=function(){return this.isExpanded?this.collapse():this.expand()},t.prototype.indicateExpanded=function(){return this.trs.find(".fc-expander").removeClass(this.getCollapsedIcon()).addClass(this.getExpandedIcon())},t.prototype.indicateCollapsed=function(){return this.trs.find(".fc-expander").removeClass(this.getExpandedIcon()).addClass(this.getCollapsedIcon())},t.prototype.enableExpanding=function(){return this.trs.find(".fc-expander-space").addClass("fc-expander")},t.prototype.disableExpanding=function(){return this.trs.find(".fc-expander-space").removeClass("fc-expander").removeClass(this.getExpandedIcon()).removeClass(this.getCollapsedIcon())},t.prototype.getExpandedIcon=function(){return"fc-icon-down-triangle"},t.prototype.getCollapsedIcon=function(){return"fc-icon-"+(this.view.isRTL?"left":"right")+"-triangle"},t.prototype.animateExpand=function(){var t,e,i;return(i=null!=(t=this.children[0])&&null!=(e=t.getLeadingRow())?e.trs:void 0)?(i.addClass("fc-collapsed"),setTimeout(function(){return i.addClass("fc-transitioning"),i.removeClass("fc-collapsed")}),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return i.removeClass("fc-transitioning")})):void 0},t.prototype.getMaxTrInnerHeight=function(){var n;return n=0,w.each(this.trHash,function(t,e){var i;return i=ot(e).find("> div:not(.fc-cell-content):first"),n=Math.max(i.height(),n)}),n},t.prototype.setTrInnerHeight=function(i){return w.each(this.trHash,function(t,e){return ot(e).find("> div:not(.fc-cell-content):first").height(i)})},t.prototype.shown=function(){return this.hasOwnRow?this.rowShown(this):void 0},t.prototype.hidden=function(){return this.hasOwnRow?this.rowHidden(this):void 0},t.prototype.rowShown=function(t){return(this.parent||this.view).rowShown(t)},t.prototype.rowHidden=function(t){return(this.parent||this.view).rowHidden(t)},t.prototype.added=function(){return this.hasOwnRow?this.rowAdded(this):void 0},t.prototype.removed=function(){return this.hasOwnRow?this.rowRemoved(this):void 0},t.prototype.rowAdded=function(t){return(this.parent||this.view).rowAdded(t)},t.prototype.rowRemoved=function(t){return(this.parent||this.view).rowRemoved(t)},t}(),z=function(){function n(t,e,i){this.groupSpec=e,this.groupValue=i,n.__super__.constructor.apply(this,arguments)}return Pt(n,I),n.prototype.groupSpec=null,n.prototype.groupValue=null,n.prototype.rowRemoved=function(t){return n.__super__.rowRemoved.apply(this,arguments),t===this||this.children.length?void 0:this.remove()},n.prototype.renderGroupContentEl=function(){var t,e;return t=w('<div class="fc-cell-content" />').append(this.renderGroupTextEl()),"function"==typeof(e=this.groupSpec.render)&&(t=e(t,this.groupValue)||t),t},n.prototype.renderGroupTextEl=function(){var t,e;return e=this.groupValue||"","function"==typeof(t=this.groupSpec.text)&&(e=t(e)||e),w('<span class="fc-cell-text" />').text(e)},n}(),f=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pt(t,z),t.prototype.hasOwnRow=!0,t.prototype.renderSpreadsheetContent=function(t){var e;return(e=this.renderGroupContentEl()).prepend('<span class="fc-icon fc-expander" />'),w('<td class="fc-divider" />').attr("colspan",this.view.colSpecs.length).append(w("<div/>").append(e)).appendTo(t)},t.prototype.renderEventContent=function(t){return t.append('<td class="fc-divider"> <div/> </td>')},t}(),B=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,z),e.prototype.rowspan=0,e.prototype.leadingTr=null,e.prototype.groupTd=null,e.prototype.rowShown=function(t){return this.rowspan+=1,this.renderRowspan(),e.__super__.rowShown.apply(this,arguments)},e.prototype.rowHidden=function(t){return this.rowspan-=1,this.renderRowspan(),e.__super__.rowHidden.apply(this,arguments)},e.prototype.renderRowspan=function(){var t;return this.rowspan?(this.groupTd||(this.groupTd=w('<td class="'+this.view.widgetContentClass+'"/>').append(this.renderGroupContentEl())),this.groupTd.attr("rowspan",this.rowspan),(t=this.getLeadingRow().getTr("spreadsheet"))!==this.leadingTr?(t&&t.prepend(this.groupTd),this.leadingTr=t):void 0):(this.groupTd&&(this.groupTd.remove(),this.groupTd=null),this.leadingTr=null)},e}(),h=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Pt(t,I),t.prototype.hasOwnRow=!0,t.prototype.segContainerEl=null,t.prototype.segContainerHeight=null,t.prototype.innerEl=null,t.prototype.bgSegContainerEl=null,t.prototype.isSegsRendered=!1,t.prototype.bgSegs=null,t.prototype.fgSegs=null,t.prototype.renderEventContent=function(t){return t.html('<td class="'+this.view.widgetContentClass+'"> <div> <div class="fc-event-container" /> </div> </td>'),this.segContainerEl=t.find(".fc-event-container"),this.innerEl=this.bgSegContainerEl=t.find("td > div"),this.ensureSegsRendered()},t.prototype.ensureSegsRendered=function(){return this.isSegsRendered?void 0:(this.bgSegs&&this.view.timeGrid.renderFillInContainer("bgEvent",this,this.bgSegs),this.fgSegs&&this.view.timeGrid.renderFgSegsInContainers([[this,this.fgSegs]]),this.isSegsRendered=!0)},t.prototype.unrenderEventContent=function(){return this.bgSegs=null,this.fgSegs=null,this.isSegsRendered=!1},t}(),k=function(){function i(t,e){this.resource=e,i.__super__.constructor.apply(this,arguments)}return Pt(i,h),i.prototype.resource=null,i.prototype.rowAdded=function(t){return i.__super__.rowAdded.apply(this,arguments),t!==this&&this.isRendered&&1===this.children.length?(this.enableExpanding(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed()):void 0},i.prototype.rowRemoved=function(t){return i.__super__.rowRemoved.apply(this,arguments),t!==this&&this.isRendered&&!this.children.length?this.disableExpanding():void 0},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),0<this.children.length?this.enableExpanding():this.disableExpanding(),this.view.trigger("resourceRender",this.resource,this.resource,this.getTr("spreadsheet").find("> td"),this.getTr("event").find("> td"))},i.prototype.renderEventContent=function(t){return i.__super__.renderEventContent.apply(this,arguments),t.attr("data-resource-id",this.resource.id)},i.prototype.renderSpreadsheetContent=function(t){var e,i,n,s,r,o,a,l,d;for(a=this.resource,s=0,r=(o=this.view.colSpecs).length;s<r;s++)(e=o[s]).group||(n=e.field?a[e.field]||null:a,d="function"==typeof e.text?e.text(a,n):n,i=w('<div class="fc-cell-content">'+(e.isMain?this.renderGutterHtml():"")+'<span class="fc-cell-text">'+(d?pt(d):"&nbsp;")+"</span></div>"),"function"==typeof e.render&&(i=e.render(a,i,n)||i),l=w('<td class="'+this.view.widgetContentClass+'"/>').append(i),e.isMain&&l.wrapInner("<div/>"),t.append(l));return t.attr("data-resource-id",a.id)},i.prototype.renderGutterHtml=function(){var t,e,i;for(t="",e=0,i=this.depth;e<i;e+=1)t+='<span class="fc-icon"/>';return t+'<span class="fc-icon fc-expander-space"/>'},i}(),c.views.timeline.resourceClass=H,b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,t),e.mixin(M),e.prototype.timeGridClass=$,e.prototype.dayGridClass=x,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.timeGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.timeGrid.setResources(t),this.dayGrid&&this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.timeGrid.unsetResources(),this.dayGrid&&this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.AgendaView),c.views.agenda.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?b:void 0},S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,t),e.mixin(M),e.prototype.dayGridClass=x,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.BasicView),T=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pt(e,t),e.mixin(M),e.prototype.dayGridClass=x,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.MonthView),c.views.basic.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?S:void 0},c.views.month.queryResourceClass=function(t){return t.options.groupByResource||t.options.groupByDateAndResource?T:void 0},y="2016-02-18",N={years:1,weeks:1},u="http://fullcalendar.io/scheduler/license/",_=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],Tt=function(t,e){return mt(window.location.href)||_t(t)||et(e)?void 0:$t('Please use a valid license key. <a href="'+u+'">More Info</a>',e)},_t=function(t){var e,i,n,s;return-1!==w.inArray(t,_)||!!((i=(t||"").match(/^(\d+)\-fcs\-(\d+)$/))&&10===i[1].length&&(n=d.utc(1e3*parseInt(i[2])),(s=d.utc(c.mockSchedulerReleaseDate||y)).isValid()&&(e=s.clone().subtract(N),n.isAfter(e))))},mt=function(t){return Boolean(t.match(/\w+\:\/\/fullcalendar\.io\/|\/demos\/[\w-]+\.html$/))},$t=function(t,e){return e.append(w('<div class="fc-license-message" />').html(t))},void(et=function(t){return 1<=t.find(".fc-license-message").length}))}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-coords",["jquery"],e):t.GridsterCoords=e(t.$||t.jQuery)}(this,function(i){"use strict";function e(t){return t[0]&&i.isPlainObject(t[0])?this.data=t[0]:this.el=t,this.isCoords=!0,this.coords={},this.init(),this}var t=e.prototype;return t.init=function(){this.set(),this.original_coords=this.get()},t.set=function(t,e){var i=this.el;if(i&&!t&&(this.data=i.offset(),this.data.width=i[0].scrollWidth,this.data.height=i[0].scrollHeight),i&&t&&!e){var n=i.offset();this.data.top=n.top,this.data.left=n.left}var s=this.data;return void 0===s.left&&(s.left=s.x1),void 0===s.top&&(s.top=s.y1),this.coords.x1=s.left,this.coords.y1=s.top,this.coords.x2=s.left+s.width,this.coords.y2=s.top+s.height,this.coords.cx=s.left+s.width/2,this.coords.cy=s.top+s.height/2,this.coords.width=s.width,this.coords.height=s.height,this.coords.el=i||!1,this},t.update=function(t){if(!t&&!this.el)return this;if(t){var e=i.extend({},this.data,t);return this.data=e,this.set(!0,!0)}return this.set(!0),this},t.get=function(){return this.coords},t.destroy=function(){this.el.removeData("coords"),delete this.el},i.fn.coords=function(){if(this.data("coords"))return this.data("coords");var t=new e(this);return this.data("coords",t),t},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-collision",["jquery","gridster-coords"],e):t.GridsterCollision=e(t.$||t.jQuery,t.GridsterCoords)}(this,function(g){"use strict";function i(t,e,i){this.options=g.extend(n,i),this.$element=t,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(e),this.init()}var n={colliders_context:document.body,overlapping_region:"C"};i.defaults=n;var t=i.prototype;return t.init=function(){this.find_collisions()},t.overlaps=function(t,e){var i=!1,n=!1;return(e.x1>=t.x1&&e.x1<=t.x2||e.x2>=t.x1&&e.x2<=t.x2||t.x1>=e.x1&&t.x2<=e.x2)&&(i=!0),(e.y1>=t.y1&&e.y1<=t.y2||e.y2>=t.y1&&e.y2<=t.y2||t.y1>=e.y1&&t.y2<=e.y2)&&(n=!0),i&&n},t.detect_overlapping_region=function(t,e){var i="",n="";return t.y1>e.cy&&t.y1<e.y2&&(i="N"),t.y2>e.y1&&t.y2<e.cy&&(i="S"),t.x1>e.cx&&t.x1<e.x2&&(n="W"),t.x2>e.x1&&t.x2<e.cx&&(n="E"),i+n||"C"},t.calculate_overlapped_area_coords=function(t,e){var i=Math.max(t.x1,e.x1),n=Math.max(t.y1,e.y1);return g({left:i,top:n,width:Math.min(t.x2,e.x2)-i,height:Math.min(t.y2,e.y2)-n}).coords(
).get()},t.calculate_overlapped_area=function(t){return t.width*t.height},t.manage_colliders_start_stop=function(t,e,i){for(var n=this.last_colliders_coords,s=0,r=n.length;s<r;s++)-1===g.inArray(n[s],t)&&e.call(this,n[s]);for(var o=0,a=t.length;o<a;o++)-1===g.inArray(t[o],n)&&i.call(this,t[o])},t.find_collisions=function(t){for(var e=this,i=this.options.overlapping_region,n=[],s=[],r=this.colliders||this.$colliders,o=r.length,a=e.$element.coords().update(t||!1).get();o--;){var l=e.$colliders?g(r[o]):r[o],d=l.isCoords?l:l.coords(),h=d.get();if(e.overlaps(a,h)){var c=e.detect_overlapping_region(a,h);if(c===i||"all"===i){var u=e.calculate_overlapped_area_coords(a,h),p=e.calculate_overlapped_area(u);if(0!==p){var f={area:p,area_coords:u,region:c,coords:h,player_coords:a,el:l};e.options.on_overlap&&e.options.on_overlap.call(this,f),n.push(d),s.push(f)}}}}return(e.options.on_overlap_stop||e.options.on_overlap_start)&&this.manage_colliders_start_stop(n,e.options.on_overlap_start,e.options.on_overlap_stop),this.last_colliders_coords=n,s},t.get_closest_colliders=function(t){var e=this.find_collisions(t);return e.sort(function(t,e){return"C"===t.region&&"C"===e.region?t.coords.y1<e.coords.y1||t.coords.x1<e.coords.x1?-1:1:(t.area,e.area,1)}),e},t.set_colliders=function(t){"string"==typeof t||t instanceof g?this.$colliders=g(t,this.options.colliders_context).not(this.$element):this.colliders=g(t)},g.fn.collision=function(t,e){return new i(this,t,e)},i}),function(t){"use strict";t.delay=function(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},t.debounce=function(n,s,r){var o;return function(){var t=this,e=arguments,i=function(){o=null,r||n.apply(t,e)};r&&!o&&n.apply(t,e),clearTimeout(o),o=setTimeout(i,s)}},t.throttle=function(e,i){var n,s,r,o,a,l,d=debounce(function(){a=o=!1},i);return function(){n=this,s=arguments;var t=function(){r=null,a&&e.apply(n,s),d()};return r||(r=setTimeout(t,i)),o?a=!0:l=e.apply(n,s),d(),o=!0,l}}}(window),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-draggable",["jquery"],e):t.GridsterDraggable=e(t.$||t.jQuery)}(this,function(i){"use strict";function e(t,e){this.options=i.extend({},n,e),this.$document=i(document),this.$container=i(t),this.$scroll_container=this.options.scroll_container===window?i(window):this.$container.closest(this.options.scroll_container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.player_min_top=0+this.options.offset_top,this.id=r(),this.ns=".gridster-draggable-"+this.id,this.init()}var n={items:"li",distance:1,limit:{width:!0,height:!1},offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},s=i(window),g={x:"left",y:"top"},o=!!("ontouchstart"in window),m=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t=0,r=function(){return++t+""};e.defaults=n;var a=e.prototype;return a.init=function(){var t=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===t?"relative":t),this.disabled=!1,this.events(),s.bind(this.nsEvent("resize"),throttle(i.proxy(this.calculate_dimensions,this),200))},a.nsEvent=function(t){return(t||"")+this.ns},a.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),i.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,i.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,i.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(t))},this))},a.get_actual_pos=function(t){return t.position()},a.get_mouse_pos=function(t){if(t.originalEvent&&t.originalEvent.touches){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches[0]}return{left:t.clientX,top:t.clientY}},a.get_offset=function(t){t.preventDefault();var e=this.get_mouse_pos(t),i=Math.round(e.left-this.mouse_init_pos.left),n=Math.round(e.top-this.mouse_init_pos.top),s=Math.round(this.el_init_offset.left+i-this.baseX+this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),r=Math.round(this.el_init_offset.top+n-this.baseY+this.$scroll_container.scrollTop()-this.scroll_container_offset_y);return this.options.limit.width&&(s>this.player_max_left?s=this.player_max_left:s<this.player_min_left&&(s=this.player_min_left)),this.options.limit.height&&(r>this.player_max_top?r=this.player_max_top:r<this.player_min_top&&(r=this.player_min_top)),{position:{left:s,top:r},pointer:{left:e.left,top:e.top,diff_left:i+(this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),diff_top:n+(this.$scroll_container.scrollTop()-this.scroll_container_offset_y)}}},a.get_drag_data=function(t){var e=this.get_offset(t);return e.$player=this.$player,e.$helper=this.helper?this.$helper:this.$player,e},a.set_limits=function(t){return t||(t=this.$container.width()),this.player_max_left=t-this.player_width-this.options.offset_left,this.player_max_top=this.options.container_height-this.player_height-this.options.offset_top,this.options.container_width=t,this},a.scroll_in=function(t,e){var i,n=g[t],s=50,r=30,o="scroll"+m(n),a="x"===t,l=a?this.scroller_width:this.scroller_height;i=this.$scroll_container===window?a?this.$scroll_container.width():this.$scroll_container.height():a?this.$scroll_container[0].scrollWidth:this.$scroll_container[0].scrollHeight;var d,h=a?this.$player.width():this.$player.height(),c=this.$scroll_container[o](),u=c+l-s,p=c+s,f=c+e.pointer[n];return u<=f&&(d=c+r)<i-l+h&&(this.$scroll_container[o](d),this["scroll_offset_"+t]+=r),f<=p&&0<(d=c-r)&&(this.$scroll_container[o](d),this["scroll_offset_"+t]-=r),this},a.manage_scroll=function(t){this.scroll_in("x",t),this.scroll_in("y",t)},a.calculate_dimensions=function(){this.scroller_height=this.$scroll_container.height(),this.scroller_width=this.$scroll_container.width()},a.drag_handler=function(t){if(!this.disabled&&(1===t.which||o)&&!this.ignore_drag(t)){var s=this,r=!0;return this.$player=i(t.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(t),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(t){var e=s.get_mouse_pos(t),i=Math.abs(e.left-s.mouse_init_pos.left),n=Math.abs(e.top-s.mouse_init_pos.top);return(i>s.options.distance||n>s.options.distance)&&(r?(r=!1,s.on_dragstart.call(s,t)):!0===s.is_dragging&&s.on_dragmove.call(s,t),!1)}),!!o&&void 0}},a.on_dragstart=function(t){if(t.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var e=this.$container.offset();return this.baseX=Math.round(e.left),this.baseY=Math.round(e.top),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scroll_container_offset_y=this.$scroll_container.scrollTop(),this.scroll_container_offset_x=this.$scroll_container.scrollLeft(),this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,t,this.get_drag_data(t)),!1},a.on_dragmove=function(t){var e=this.get_drag_data(t);this.options.autoscroll&&this.manage_scroll(e),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:e.position.left,top:e.position.top});var i=this.last_position||e.position;return e.prev_position=i,this.options.drag&&this.options.drag.call(this.$player,t,e),this.last_position=e.position,!1},a.on_dragstop=function(t){var e=this.get_drag_data(t);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,t,e),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},a.on_select_start=function(t){if(!this.disabled&&!this.ignore_drag(t))return!1},a.enable=function(){this.disabled=!1},a.disable=function(){this.disabled=!0},a.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),s.off(this.ns),i.removeData(this.$container,"drag")},a.ignore_drag=function(t){return this.options.handle?!i(t.target).is(this.options.handle):i.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(t):this.options.resize?!i(t.target).is(this.options.items):i(t.target).is(this.options.ignore_dragging.join(", "))},i.fn.gridDraggable=function(t){return new e(this,t)},i.fn.dragg=function(t){return this.each(function(){i.data(this,"drag")||i.data(this,"drag",new e(this,t))})},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery"),require("./jquery.draggable.js"),require("./jquery.collision.js"),require("./jquery.coords.js"),require("./utils.js")):"function"==typeof define&&define.amd?define(["jquery","gridster-draggable","gridster-collision"],e):t.Gridster=e(t.$||t.jQuery,t.GridsterDraggable,t.GridsterCollision)}(this,function(_,t){"use strict";function l(t,e){this.options=_.extend(!0,{},n,e),this.options.draggable=this.options.draggable||{},this.options.draggable=_.extend(!0,{},this.options.draggable,{scroll_container:this.options.scroll_container}),this.$el=_(t),this.$scroll_container=this.options.scroll_container===window?_(window):this.$el.closest(this.options.scroll_container),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.$changed=_([]),this.w_queue={},this.is_responsive()?this.min_widget_width=this.get_responsive_col_width():this.min_widget_width=this.options.widget_base_dimensions[0],this.min_widget_height=this.options.widget_base_dimensions[1],this.is_resizing=!1,this.min_col_count=this.options.min_cols,this.prev_col_count=this.min_col_count,this.generated_stylesheets=[],this.$style_tags=_([]),typeof this.options.limit==typeof!0&&(console.log("limit: bool is deprecated, consider using limit: { width: boolean, height: boolean} instead"),this.options.limit={width:this.options.limit,height:this.options.limit}),this.options.auto_init&&this.init()}function i(t){for(var e=["col","row","size_x","size_y"],i={},n=0,s=e.length;n<s;n++){var r=e[n];if(!(r in t))throw new Error("Not exists property `"+r+"`");var o=t[r];if(!o||isNaN(o))throw new Error("Invalid value of `"+r+"` property");i[r]=+o}return i}var e=_(window),n={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,limit:{width:!0,height:!1},min_rows:1,max_rows:15,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,center_widgets:!1,responsive_breakpoint:!1,scroll_container:window,shift_larger_widgets_down:!0,move_widgets_down_only:!1,shift_widgets_up:!0,show_element:function(t,e){e?t.fadeIn(e):t.fadeIn()},hide_element:function(t,e){e?t.fadeOut(e):t.fadeOut()},serialize_params:function(t,e){return{col:e.col,row:e.row,size_x:e.size_x,size_y:e.size_y}},collision:{wait_for_mouseup:!1},draggable:{items:".gs-w:not(.static)",distance:4,ignore_dragging:t.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]},ignore_self_occupied:!1};l.defaults=n,l.generated_stylesheets=[],l.sort_by_row_asc=function(t){return t.sort(function(t,e){return t.row||(t=_(t).coords().grid,e=_(e).coords().grid),t=i(t),e=i(e),t.row>e.row?1:-1})},l.sort_by_row_and_col_asc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.row>e.row||t.row===e.row&&t.col>e.col?1:-1})},l.sort_by_col_asc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.col>e.col?1:-1})},l.sort_by_row_desc=function(t){return t.sort(function(t,e){return t=i(t),e=i(e),t.row+t.size_y<e.row+e.size_y?1:-1})};var s=l.prototype;return s.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),this.options.center_widgets&&setTimeout(_.proxy(function(){this.center_widgets()},this),0),e.bind("resize.gridster",throttle(_.proxy(this.recalculate_faux_grid,this),200))},s.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},s.enable=function(){return this.drag_api.enable(),this},s.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},s.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},s.add_widget=function(t,e,i,n,s,r,o,a){var l;if(e||(e=1),i||(i=1),n||s)l={col:n,row:s,size_x:e,size_y:i},this.options.avoid_overlapped_widgets&&this.empty_cells(n,s,e,i);else if(!1===(l=this.next_position(e,i)))return!1;var d=_(t).attr({"data-col":l.col,"data-row":l.row,"data-sizex":e,"data-sizey":i}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(d),this.$changed=this.$changed.add(d),this.register_widget(d);var h=parseInt(l.row)+(parseInt(l.size_y)-1);return this.rows<h&&this.add_faux_rows(h-this.rows),r&&this.set_widget_max_size(d,r),o&&this.set_widget_min_size(d,o),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this.options.center_widgets&&setTimeout(_.proxy(function(){this.center_widgets()},this),0),this.options.show_element.call(this,d,a),d},s.set_widget_min_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.min_size_x=e[0],i.min_size_y=e[1],this},s.set_widget_max_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.max_size_x=e[0],i.max_size_y=e[1],this},s.add_resize_handle=function(t){var e=this.options.resize.handle_append_to?_(this.options.resize.handle_append_to,t):t;return 0===e.children("span[class~='"+this.resize_handle_class+"']").length&&_(this.resize_handle_tpl).appendTo(e),this},s.resize_widget=function(t,e,i,n){var s=t.coords().grid;this.is_resizing=!0,e||(e=s.size_x),i||(i=s.size_y),this.is_valid_row(s.row,i)||this.add_faux_rows(Math.max(this.calculate_highest_row(s.row,i)-this.rows,0)),this.is_valid_col(s.col,i)||this.add_faux_cols(Math.max(this.calculate_highest_row(s.col,e)-this.cols,0));var r={col:s.col,row:s.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,s,r),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,r.size_x,r.size_y),this.is_resizing=!1,t},s.expand_widget=function(t,e,i,n,s){var r=t.coords().grid,o=Math.floor((_(window).width()-2*this.options.widget_margins[0])/this.min_widget_width);e=e||Math.min(o,this.cols),i||(i=r.size_y);var a=r.size_y;t.attr("pre_expand_col",r.col),t.attr("pre_expand_sizex",r.size_x),t.attr("pre_expand_sizey",r.size_y);var l=n||1;a<i&&this.add_faux_rows(Math.max(i-a,0));var d={col:l,row:r.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,r,d),this.set_dom_grid_height(),this.set_dom_grid_width(),s&&s.call(this,d.size_x,d.size_y),t},s.collapse_widget=function(t,e){var i=t.coords().grid,n=parseInt(t.attr("pre_expand_sizex")),s=parseInt(t.attr("pre_expand_sizey")),r={col:parseInt(t.attr("pre_expand_col")),row:i.row,size_x:n,size_y:s};return this.mutate_widget_in_gridmap(t,i,r),this.set_dom_grid_height(),this.set_dom_grid_width(),e&&e.call(this,r.size_x,r.size_y),t},s.fit_to_content=function(t,e,i,n){var s=t.coords().grid,r=this.$wrapper.width(),o=this.$wrapper.height(),a=this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0],l=this.options.widget_base_dimensions[1]+2*this.options.widget_margins[1],d=Math.ceil((r+2*this.options.widget_margins[0])/a),h=Math.ceil((o+2*this.options.widget_margins[1])/l),c={col:s.col,row:s.row,size_x:Math.min(e,d),size_y:Math.min(i,h)};return this.mutate_widget_in_gridmap(t,s,c),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,c.size_x,c.size_y),t},s.center_widgets=debounce(function(){var t,e=this.$wrapper.width();t=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0];var i=2*Math.floor(Math.max(Math.floor(e/t),this.min_col_count)/2);this.options.min_cols=i,this.options.max_cols=i,this.options.extra_cols=0,this.set_dom_grid_width(i);var n=((this.cols=i)-this.prev_col_count)/2;return n<0?(this.get_min_col()>-1*n?this.shift_cols(n):this.resize_widget_dimensions(this.options),setTimeout(_.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)):0<n?(this.resize_widget_dimensions(this.options),setTimeout(_.proxy(function(){this.shift_cols(n)},this),0)):(this.resize_widget_dimensions(this.options),setTimeout(_.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)),this.prev_col_count=i,this},200),s.get_min_col=function(){return Math.min.apply(Math,this.$widgets.map(_.proxy(function(t,e){return this.get_cells_occupied(_(e).coords().grid).cols},this)).get())},s.shift_cols=function(o){var t=this.$widgets.map(_.proxy(function(t,e){var i=_(e);return this.dom_to_coords(i)},this));(t=l.sort_by_row_and_col_asc(t)).each(_.proxy(function(t,e){var i=_(e.el),n=i.coords().grid,s=parseInt(i.attr("data-col")),r={col:Math.max(Math.round(s+o),1),row:n.row,size_x:n.size_x,size_y:n.size_y};setTimeout(_.proxy(function(){this.mutate_widget_in_gridmap(i,n,r)},this),0)},this))},s.mutate_widget_in_gridmap=function(t,e,i){var n=e.size_y,s=this.get_cells_occupied(e),r=this.get_cells_occupied(i),o=[];_.each(s.cols,function(t,e){-1===_.inArray(e,r.cols)&&o.push(e)});var a=[];_.each(r.cols,function(t,e){-1===_.inArray(e,s.cols)&&a.push(e)});var l=[];_.each(s.rows,function(t,e){-1===_.inArray(e,r.rows)&&l.push(e)});var d=[];if(_.each(r.rows,function(t,e){-1===_.inArray(e,s.rows)&&d.push(e)}),this.remove_from_gridmap(e),a.length){var h=[i.col,i.row,i.size_x,Math.min(n,i.size_y),t];this.empty_cells.apply(this,h)}if(d.length){var c=[i.col,i.row,i.size_x,i.size_y,t];this.empty_cells.apply(this,c)}if(e.col=i.col,e.row=i.row,e.size_x=i.size_x,e.size_y=i.size_y,this.add_to_gridmap(i,t),t.removeClass("player-revert"),this.update_widget_dimensions(t,i),this.options.shift_widgets_up){if(o.length){var u=[o[0],i.row,o[o.length-1]-o[0]+1,Math.min(n,i.size_y),t];this.remove_empty_cells.apply(this,u)}if(l.length){var p=[i.col,i.row,i.size_x,i.size_y,t];this.remove_empty_cells.apply(this,p)}}return this.move_widget_up(t),this},s.empty_cells=function(t,r,e,o,i){return this.widgets_below({col:t,row:r-o,size_x:e,size_y:o}).not(i).each(_.proxy(function(t,e){var i=_(e),n=i.coords().grid;if(n.row<=r+o-1){var s=r+o-n.row;this.move_widget_down(i,s)}},this)),this.is_resizing||this.set_dom_grid_height(),this},s.remove_empty_cells=function(t,e,i,n,s){return this.widgets_below({col:t,row:e,size_x:i,size_y:n}).not(s).each(_.proxy(function(t,e){this.move_widget_up(_(e),n)},this)),this.set_dom_grid_height(),this},s.next_position=function(t,e){t||(t=1),e||(e=1);for(var i,n=this.gridmap,s=n.length,r=[],o=1;o<s;o++){i=n[o].length;for(var a=1;a<=i;a++)this.can_move_to({size_x:t,size_y:e},o,a)&&r.push({col:o,row:a,size_y:e,size_x:t})}return!!r.length&&l.sort_by_row_and_col_asc(r)[0]},s.remove_by_grid=function(t,e){var i=this.is_widget(t,e);i&&this.remove_widget(i)},s.remove_widget=function(t,e,i){var n=t instanceof _?t:_(t);if(0===n.length)return this;var s=n.coords().grid;if(void 0===s)return this;_.isFunction(e)&&(i=e,e=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(n);var r=this.widgets_below(n);return this.remove_from_gridmap(s),this.options.hide_element.call(this,n,_.proxy(function(){n.remove(),e||r.each(_.proxy(function(t,e){this.move_widget_up(_(e),s.size_y)},this)),this.set_dom_grid_height(),i&&i.call(this,t)},this)),this},s.remove_all_widgets=function(i){return this.$widgets.each(_.proxy(function(t,e){this.remove_widget(e,!0,i)},this)),this},s.serialize=function(t){t||(t=this.$widgets);var n=[];return t.each(_.proxy(function(t,e){var i=_(e);void 0!==i.coords().grid&&n.push(this.options.serialize_params(i,i.coords().grid))},this)),n},s.serialize_changed=function(){return this.serialize(this.$changed)},s.dom_to_coords=function(t){return{col:parseInt(t.attr("data-col"),10),row:parseInt(t.attr("data-row"),10),size_x:parseInt(t.attr("data-sizex"),10)||1,size_y:parseInt(t.attr("data-sizey"),10)||1,max_size_x:parseInt(t.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(t.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(t.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(t.attr("data-min-sizey"),10)||!1,el:t}},s.register_widget=function(t){var e=t instanceof _,i=e?this.dom_to_coords(t):t,n=!1;e||(t=i.el);var s=this.can_go_widget_up(i);return this.options.shift_widgets_up&&s&&(i.row=s,t.attr("data-row",s),this.$el.trigger("gridster:positionchanged",[i]),n=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:i.size_x,size_y:i.size_y},i.col,i.row)&&(_.extend(i,this.next_position(i.size_x,i.size_y)),t.attr({"data-col":i.col,"data-row":i.row,"data-sizex":i.size_x,"data-sizey":i.size_y}),n=!0),t.data("coords",t.coords()),t.data("coords").grid=i,this.add_to_gridmap(i,t),this.update_widget_dimensions(t,i),this.options.resize.enabled&&this.add_resize_handle(t),n},s.update_widget_position=function(t,i){return this.for_each_cell_occupied(t,function(t,e){if(!this.gridmap[t])return this;this.gridmap[t][e]=i}),this},s.update_widget_dimensions=function(t,e){var i=e.size_x*(this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0])+(e.size_x-1)*this.options.widget_margins[0],n=e.size_y*this.options.widget_base_dimensions[1]+(e.size_y-1)*this.options.widget_margins[1];return t.data("coords").update({width:i,height:n}),t.attr({"data-col":e.col,"data-row":e.row,"data-sizex":e.size_x,"data-sizey":e.size_y}),this},s.update_widgets_dimensions=function(){return _.each(this.$widgets,_.proxy(function(t,e){var i=_(e).coords().grid;"object"==typeof i&&this.update_widget_dimensions(_(e),i)},this)),this},s.remove_from_gridmap=function(t){return this.update_widget_position(t,!1)},s.add_to_gridmap=function(t,e){this.update_widget_position(t,e||t.el)},s.draggable=function(){var i=this,t=_.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0],container_height:this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[0],limit:{width:this.options.limit.width,height:this.options.limit.height},start:function(t,e){i.$widgets.filter(".player-revert").removeClass("player-revert"),i.$player=_(this),i.$helper=_(e.$helper),i.helper=!i.$helper.is(i.$player),i.on_start_drag.call(i,t,e),i.$el.trigger("gridster:dragstart")},stop:function(t,e){i.on_stop_drag.call(i,t,e),i.$el.trigger("gridster:dragstop")},drag:throttle(function(t,e){i.on_drag.call(i,t,e),i.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.dragg(t).data("drag")},s.resizable=function(){return this.resize_api=this.$el.gridDraggable({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:{width:this.options.max_cols!==1/0||this.limit.width,height:this.options.max_rows!==1/0||this.limit.height},scroll_container:this.options.scroll_container,start:_.proxy(this.on_start_resize,this),stop:_.proxy(function(t,e){delay(_.proxy(function(){this.on_stop_resize(t,e)},this),120)},this),drag:throttle(_.proxy(this.on_resize,this),60)}),this},s.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var t=this.options.resize.axes,e='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=_.map(t,function(t){return e.replace("{type}",t)}).join(""),_.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},s.on_start_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=_.extend({},this.player_grid_data),this.get_highest_occupied_cell().row+this.player_grid_data.size_y<=this.options.max_rows&&this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var i=this.player_grid_data.size_x,n=this.cols-this.highest_col;this.options.max_cols===1/0&&n<=i&&this.add_faux_cols(Math.min(i-n,1));var s=this.faux_grid,r=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(s,this.options.collision),this.$preview_holder=_("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:r.width,height:r.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,t,e)},s.on_drag=function(t,e){if(null===this.$player)return!1;var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),s=this.$preview_holder.attr("data-row"),r={left:e.position.left+this.baseX-i[0]*n,top:e.position.top+this.baseY-i[1]*s};this.options.max_cols===1/0&&(this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])),this.collision_api.set_colliders(this.faux_grid)),this.colliders_data=this.collision_api.get_closest_colliders(r),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:e.position.left,top:e.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,t,e)},s.on_stop_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),s=this.$preview_holder.attr("data-row");e.position.left=e.position.left+this.baseX-i[0]*n,e.position.top=e.position.top+this.baseY-i[1]*s,this.colliders_data=this.collision_api.get_closest_colliders(e.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$changed=this.$changed.add(this.$player);var r=this.placeholder_grid_data.el.coords().grid;r.col===this.placeholder_grid_data.col&&r.row===this.placeholder_grid_data.row||(this.update_widget_position(r,!1),this.options.collision.wait_for_mouseup&&this.for_each_cell_occupied(this.placeholder_grid_data,function(t,e){if(this.is_widget(t,e)){var i=this.placeholder_grid_data.row+this.placeholder_grid_data.size_y-parseInt(this.gridmap[t][e][0].getAttribute("data-row"));!this.move_widget_down(this.is_widget(t,e),i)&&this.set_placeholder(this.placeholder_grid_data.el.coords().grid.col,this.placeholder_grid_data.el.coords().grid.row)}})),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);var o=this.placeholder_grid_data.col,a=this.placeholder_grid_data.row;this.set_cells_player_occupies(o,a),this.$player.coords().grid.row=a,this.$player.coords().grid.col=o,this.$player.addClass("player-revert").removeClass("player").attr({"data-col":o,"data-row":a}).css({left:"",top:""}),this.options.draggable.stop&&this.options.draggable.stop.call(this,t,e),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.w_queue={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},s.on_start_resize=function(t,e){this.$resized_widget=e.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:e.$player.is("."+this.resize_handle_class+"-x"),bottom:e.$player.is("."+this.resize_handle_class+"-y")},this.is_responsive()||this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var i=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=_("<"+i+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resizestart")},s.on_stop_resize=function(t,e){this.$resized_widget.removeClass("resizing").css({width:"",height:"","min-width":"","min-height":""}),delay(_.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.set_dom_grid_height(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width)},s.on_resize=function(t,e){var i,n=e.pointer.diff_left,s=e.pointer.diff_top,r=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0],o=this.options.widget_base_dimensions[1],a=this.options.widget_margins[0],l=this.options.widget_margins[1],d=this.resize_max_size_x,h=this.resize_min_size_x,c=this.resize_max_size_y,u=this.resize_min_size_y,p=this.options.max_cols===1/0,f=Math.ceil(n/(r+2*a)-.2),g=Math.ceil(s/(o+2*l)-.2),m=Math.max(1,this.resize_initial_sizex+f),v=Math.max(1,this.resize_initial_sizey+g),_=Math.floor(this.container_width/this.min_widget_width-this.resize_initial_col+1),w=_*this.min_widget_width+(_-1)*a;m=Math.max(Math.min(m,d),h),i=d*r+((m=Math.min(_,m))-1)*a;var y=Math.min(i,w),b=h*r+(m-1)*a,S=c*o+((v=Math.max(Math.min(v,c),u))-1)*l,x=u*o+(v-1)*l;if(this.resize_dir.right?v=this.resize_initial_sizey:this.resize_dir.bottom&&(m=this.resize_initial_sizex),p){var C=this.resize_initial_col+m-1;p&&this.resize_initial_last_col<=C&&(this.set_dom_grid_width(Math.max(C+1,this.cols)),this.cols<C&&this.add_faux_cols(C-this.cols))}var D={};!this.resize_dir.bottom&&(D.width=Math.max(Math.min(this.resize_initial_width+n,y),b)),!this.resize_dir.right&&(D.height=Math.max(Math.min(this.resize_initial_height+s,S),x)),this.$resized_widget.css(D),m===this.resize_last_sizex&&v===this.resize_last_sizey||(this.resize_widget(this.$resized_widget,m,v,!1),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),
"data-sizex":m,"data-sizey":v})),this.options.resize.resize&&this.options.resize.resize.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=m,this.resize_last_sizey=v},s.on_overlapped_column_change=function(t,e){if(!this.colliders_data.length)return this;var i,n=this.get_targeted_columns(this.colliders_data[0].el.data.col),s=this.last_cols.length,r=n.length;for(i=0;i<r;i++)-1===_.inArray(n[i],this.last_cols)&&(t||_.noop).call(this,n[i]);for(i=0;i<s;i++)-1===_.inArray(this.last_cols[i],n)&&(e||_.noop).call(this,this.last_cols[i]);return this.last_cols=n,this},s.on_overlapped_row_change=function(t,e){if(!this.colliders_data.length)return this;var i,n=this.get_targeted_rows(this.colliders_data[0].el.data.row),s=this.last_rows.length,r=n.length;for(i=0;i<r;i++)-1===_.inArray(n[i],this.last_rows)&&(t||_.noop).call(this,n[i]);for(i=0;i<s;i++)-1===_.inArray(this.last_rows[i],n)&&(e||_.noop).call(this,this.last_rows[i]);this.last_rows=n},s.set_player=function(t,e,i){var h=!1,n=i?{col:t}:this.colliders_data[0].el.data,c=n.col,u=n.row||e;this.player_grid_data={col:c,row:u,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var p=this.get_widgets_overlapped(this.player_grid_data),f=this.player_grid_data.size_y,g=this.player_grid_data.size_x,m=this.cells_occupied_by_placeholder,v=this;if(p.each(_.proxy(function(t,e){var i=_(e),n=i.coords().grid,s=m.cols[0]+g-1,r=m.rows[0]+f-1;if(i.hasClass(v.options.static_class))return!0;if(v.options.collision.wait_for_mouseup&&v.drag_api.is_dragging)v.placeholder_grid_data.col=c,v.placeholder_grid_data.row=u,v.cells_occupied_by_placeholder=v.get_cells_occupied(v.placeholder_grid_data),v.$preview_holder.attr({"data-row":u,"data-col":c});else if(n.size_x<=g&&n.size_y<=f)if(v.is_swap_occupied(m.cols[0],n.row,n.size_x,n.size_y)||v.is_player_in(m.cols[0],n.row)||v.is_in_queue(m.cols[0],n.row,i))if(v.is_swap_occupied(s,n.row,n.size_x,n.size_y)||v.is_player_in(s,n.row)||v.is_in_queue(s,n.row,i))if(v.is_swap_occupied(n.col,m.rows[0],n.size_x,n.size_y)||v.is_player_in(n.col,m.rows[0])||v.is_in_queue(n.col,m.rows[0],i))if(v.is_swap_occupied(n.col,r,n.size_x,n.size_y)||v.is_player_in(n.col,r)||v.is_in_queue(n.col,r,i))if(v.is_swap_occupied(m.cols[0],m.rows[0],n.size_x,n.size_y)||v.is_player_in(m.cols[0],m.rows[0])||v.is_in_queue(m.cols[0],m.rows[0],i))for(var o=0;o<g;o++)for(var a=0;a<f;a++){var l=m.cols[0]+o,d=m.rows[0]+a;if(!v.is_swap_occupied(l,d,n.size_x,n.size_y)&&!v.is_player_in(l,d)&&!v.is_in_queue(l,d,i)){h=v.queue_widget(l,d,i),o=g;break}}else v.options.move_widgets_down_only?p.each(_.proxy(function(t,e){var i=_(e);v.can_go_down(i)&&i.coords().grid.row===v.player_grid_data.row&&!v.is_in_queue(s,n.row,i)&&(v.move_widget_down(i,v.player_grid_data.size_y),v.set_placeholder(c,u))})):h=v.queue_widget(m.cols[0],m.rows[0],i);else h=v.queue_widget(n.col,r,i);else h=v.queue_widget(n.col,m.rows[0],i);else h=v.queue_widget(s,n.row,i);else v.options.move_widgets_down_only?p.each(_.proxy(function(t,e){var i=_(e);v.can_go_down(i)&&i.coords().grid.row===v.player_grid_data.row&&!v.is_in_queue(i.coords().grid.col,n.row,i)&&(v.move_widget_down(i,v.player_grid_data.size_y),v.set_placeholder(c,u))})):h=v.queue_widget(m.cols[0],n.row,i);else v.options.shift_larger_widgets_down&&!h&&p.each(_.proxy(function(t,e){var i=_(e);v.can_go_down(i)&&i.coords().grid.row===v.player_grid_data.row&&(v.move_widget_down(i,v.player_grid_data.size_y),v.set_placeholder(c,u))}));v.clean_up_changed()})),h&&this.can_placeholder_be_set(c,u,g,f)){for(var s in this.w_queue){var r=parseInt(s.split("_")[0]),o=parseInt(s.split("_")[1]);"full"!==this.w_queue[s]&&this.new_move_widget_to(this.w_queue[s],r,o)}this.set_placeholder(c,u)}if(!p.length){if(this.options.shift_widgets_up){var a=this.can_go_player_up(this.player_grid_data);!1!==a&&(u=a)}this.can_placeholder_be_set(c,u,g,f)&&this.set_placeholder(c,u)}return this.w_queue={},{col:c,row:u}},s.is_swap_occupied=function(t,e,i,n){for(var s=!1,r=0;r<i;r++)for(var o=0;o<n;o++){var a=t+r,l=e+o,d=a+"_"+l;if(this.is_occupied(a,l))s=!0;else if(d in this.w_queue){if("full"===this.w_queue[d]){s=!0;continue}var h=this.w_queue[d].coords().grid;this.is_widget_under_player(h.col,h.row)||delete this.w_queue[d]}l>parseInt(this.options.max_rows)&&(s=!0),a>parseInt(this.options.max_cols)&&(s=!0),this.is_player_in(a,l)&&(s=!0)}return s},s.can_placeholder_be_set=function(t,e,i,n){for(var s=!0,r=0;r<i;r++)for(var o=0;o<n;o++){var a=t+r,l=e+o,d=this.is_widget(a,l);l>parseInt(this.options.max_rows)&&(s=!1),a>parseInt(this.options.max_cols)&&(s=!1),this.is_occupied(a,l)&&!this.is_widget_queued_and_can_move(d)&&(s=!1)}return s},s.queue_widget=function(t,e,i){var n=i,s=n.coords().grid,r=t+"_"+e;if(r in this.w_queue)return!1;this.w_queue[r]=n;for(var o=0;o<s.size_x;o++)for(var a=0;a<s.size_y;a++){var l=t+o+"_"+(e+a);l!==r&&(this.w_queue[l]="full")}return!0},s.is_widget_queued_and_can_move=function(t){var e=!1;if(!1===t)return!1;for(var i in this.w_queue)if("full"!==this.w_queue[i]&&this.w_queue[i].attr("data-col")===t.attr("data-col")&&this.w_queue[i].attr("data-row")===t.attr("data-row")){e=!0;for(var n=this.w_queue[i],s=parseInt(i.split("_")[0]),r=parseInt(i.split("_")[1]),o=n.coords().grid,a=0;a<o.size_x;a++)for(var l=0;l<o.size_y;l++){var d=s+a,h=r+l;this.is_player_in(d,h)&&(e=!1)}}return e},s.is_in_queue=function(t,e,i){var n=!1,s=t+"_"+e;if(s in this.w_queue)if("full"===this.w_queue[s])n=!0;else{var r=this.w_queue[s].coords().grid;this.is_widget_under_player(r.col,r.row)?this.w_queue[s].attr("data-col")===i.attr("data-col")&&this.w_queue[s].attr("data-row")===i.attr("data-row")?(delete this.w_queue[s],n=!1):n=!0:(delete this.w_queue[s],n=!1)}return n},s.widgets_constraints=function(t){var s=_([]),r=[],o=[];return t.each(_.proxy(function(t,e){var i=_(e),n=i.coords().grid;this.can_go_widget_up(n)?(s=s.add(i),r.push(n)):o.push(n)},this)),t.not(s),{can_go_up:l.sort_by_row_asc(r),can_not_go_up:l.sort_by_row_desc(o)}},s.manage_movements=function(t,o,a){return _.each(t,_.proxy(function(t,e){var i=e,n=i.el,s=this.can_go_widget_up(i);if(s)this.move_widget_to(n,s),this.set_placeholder(o,s+i.size_y);else if(!this.can_go_player_up(this.player_grid_data)){var r=a+this.player_grid_data.size_y-i.row;this.can_go_down(n)&&(console.log("In Move Down!"),this.move_widget_down(n,r),this.set_placeholder(o,a))}},this)),this},s.is_player=function(t,e){if(e&&!this.gridmap[t])return!1;var i=e?this.gridmap[t][e]:t;return i&&(i.is(this.$player)||i.is(this.$helper))},s.is_player_in=function(t,e){var i=this.cells_occupied_by_player||{};return 0<=_.inArray(t,i.cols)&&0<=_.inArray(e,i.rows)},s.is_placeholder_in=function(t,e){var i=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(t)&&0<=_.inArray(e,i.rows)},s.is_placeholder_in_col=function(t){var e=this.cells_occupied_by_placeholder||[];return 0<=_.inArray(t,e.cols)},s.is_empty=function(t,e){return void 0===this.gridmap[t]||void 0!==this.gridmap[t][e]&&!1===this.gridmap[t][e]},s.is_valid_col=function(t,e){return this.options.max_cols===1/0||this.cols>=this.calculate_highest_col(t,e)},s.is_valid_row=function(t,e){return this.rows>=this.calculate_highest_row(t,e)},s.calculate_highest_col=function(t,e){return t+(e||1)-1},s.calculate_highest_row=function(t,e){return t+(e||1)-1},s.is_occupied=function(t,e){return!(!this.gridmap[t]||this.is_player(t,e)||!this.gridmap[t][e]||this.options.ignore_self_occupied&&this.$player.data()===_(this.gridmap[t][e]).data())},s.is_widget=function(t,e){var i=this.gridmap[t];return!!i&&!!(i=i[e])&&i},s.is_static=function(t,e){var i=this.gridmap[t];return!!i&&!(!(i=i[e])||!i.hasClass(this.options.static_class))},s.is_widget_under_player=function(t,e){return!!this.is_widget(t,e)&&this.is_player_in(t,e)},s.get_widgets_under_player=function(e){e||(e=this.cells_occupied_by_player||{cols:[],rows:[]});var n=_([]);return _.each(e.cols,_.proxy(function(t,i){_.each(e.rows,_.proxy(function(t,e){this.is_widget(i,e)&&(n=n.add(this.gridmap[i][e]))},this))},this)),n},s.set_placeholder=function(t,n){var s=_.extend({},this.placeholder_grid_data),e=t+s.size_x-1;e>this.cols&&(t-=e-t);var i=this.placeholder_grid_data.row<n,r=this.placeholder_grid_data.col!==t;if(this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=n,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":n,"data-col":t}),this.options.shift_player_up){(i||r)&&this.widgets_below({col:s.col,row:s.row,size_y:s.size_y,size_x:s.size_x}).each(_.proxy(function(t,e){var i=_(e),n=i.coords().grid,s=this.can_go_widget_up(n);s&&this.move_widget_to(i,s)},this));var o=this.get_widgets_under_player(this.cells_occupied_by_placeholder);o.length&&o.each(_.proxy(function(t,e){var i=_(e);this.move_widget_down(i,n+s.size_y-i.data("coords").grid.row)},this))}},s.can_go_player_up=function(t){var n=t.row+t.size_y-1,s=!0,r=[],o=1e4,a=this.get_widgets_under_player();return this.for_each_column_occupied(t,function(t){var e=this.gridmap[t],i=n+1;for(r[t]=[];0<--i&&(this.is_empty(t,i)||this.is_player(t,i)||this.is_widget(t,i)&&e[i].is(a));)r[t].push(i),o=i<o?i:o;if(0===r[t].length)return!(s=!1);r[t].sort(function(t,e){return t-e})}),!!s&&this.get_valid_rows(t,r,o)},s.can_go_widget_up=function(n){var s=n.row+n.size_y-1,r=!0,o=[],a=1e4;return this.for_each_column_occupied(n,function(t){var e=this.gridmap[t];o[t]=[];for(var i=s+1;0<--i&&(!this.is_widget(t,i)||this.is_player_in(t,i)||e[i].is(n.el));)this.is_player(t,i)||this.is_placeholder_in(t,i)||this.is_player_in(t,i)||o[t].push(i),i<a&&(a=i);if(0===o[t].length)return!(r=!1);o[t].sort(function(t,e){return t-e})}),!!r&&this.get_valid_rows(n,o,a)},s.get_valid_rows=function(t,e,i){for(var n=t.row,s=t.row+t.size_y-1,r=t.size_y,o=i-1,a=[];++o<=s;){var l=!0;if(_.each(e,function(t,e){_.isArray(e)&&-1===_.inArray(o,e)&&(l=!1)}),!0===l&&(a.push(o),a.length===r))break}var d=!1;return 1===r?a[0]!==n&&(d=a[0]||!1):a[0]!==n&&(d=this.get_consecutive_numbers_index(a,r)),d},s.get_consecutive_numbers_index=function(t,e){for(var i=t.length,n=[],s=!0,r=-1,o=0;o<i;o++){if(s||t[o]===r+1){if(n.push(o),n.length===e)break;s=!1}else n=[],s=!0;r=t[o]}return n.length>=e&&t[n[0]]},s.get_widgets_overlapped=function(){var s=_([]),r=[],e=this.cells_occupied_by_player.rows.slice(0);return e.reverse(),_.each(this.cells_occupied_by_player.cols,_.proxy(function(t,n){_.each(e,_.proxy(function(t,e){if(!this.gridmap[n])return!0;var i=this.gridmap[n][e];this.is_occupied(n,e)&&!this.is_player(i)&&-1===_.inArray(i,r)&&(s=s.add(i),r.push(i))},this))},this)),s},s.on_start_overlapping_column=function(t){this.set_player(t,void 0,!1)},s.on_start_overlapping_row=function(t){this.set_player(void 0,t,!1)},s.on_stop_overlapping_column=function(t){var e=this;this.options.shift_larger_widgets_down&&this.for_each_widget_below(t,this.cells_occupied_by_player.rows[0],function(){e.move_widget_up(this,e.player_grid_data.size_y)})},s.on_stop_overlapping_row=function(t){var e=this,i=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down)for(var n=0,s=i.length;n<s;n++)this.for_each_widget_below(i[n],t,function(){e.move_widget_up(this,e.player_grid_data.size_y)})},s.new_move_widget_to=function(t,e,i){var n=t.coords().grid;return this.remove_from_gridmap(n),n.row=i,n.col=e,this.add_to_gridmap(n),t.attr("data-row",i),t.attr("data-col",e),this.update_widget_position(n,t),this.$changed=this.$changed.add(t),this},s.move_widget=function(t,e,i,n){var s=t.coords().grid,r={col:e,row:i,size_x:s.size_x,size_y:s.size_y};return this.mutate_widget_in_gridmap(t,s,r),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,r.col,r.row),t},s.move_widget_to=function(t,e){var r=this,i=t.coords().grid,n=this.widgets_below(t);return!1!==this.can_move_to(i,i.col,e)&&(this.remove_from_gridmap(i),i.row=e,this.add_to_gridmap(i),t.attr("data-row",e),this.$changed=this.$changed.add(t),n.each(function(t,e){var i=_(e),n=i.coords().grid,s=r.can_go_widget_up(n);s&&s!==n.row&&r.move_widget_to(i,s)}),this)},s.move_widget_up=function(n,s){if(void 0===s)return!1;var t=n.coords().grid,r=t.row,o=[];if(s||(s=1),!this.can_go_up(n))return!1;this.for_each_column_occupied(t,function(t){if(-1===_.inArray(n,o)){var e=n.coords().grid,i=r-s;if(!(i=this.can_go_up_to_row(e,t,i)))return!0;this.remove_from_gridmap(e),e.row=i,this.add_to_gridmap(e),n.attr("data-row",e.row),this.$changed=this.$changed.add(n),o.push(n)}})},s.move_widget_down=function(t,e){var i,n,r;if(e<=0)return!1;if((i=t.coords().grid.row)+(t.coords().grid.size_y-1)+e>this.options.max_rows)return!1;if(n=[],r=e,!t)return!1;if(this.failed=!1,-1===_.inArray(t,n)){var o=t.coords().grid,s=i+e;if(this.widgets_below(t).each(_.proxy(function(t,e){if(!0!==this.failed){var i=_(e),n=i.coords().grid,s=this.displacement_diff(n,o,r);0<s&&(this.failed=!1===this.move_widget_down(i,s))}},this)),this.failed)return!1;this.remove_from_gridmap(o),o.row=s,this.update_widget_position(o,t),t.attr("data-row",o.row),this.$changed=this.$changed.add(t),n.push(t)}return!0},s.can_go_up_to_row=function(t,e,i){var n,s=!0,r=[],o=t.row;if(this.for_each_column_occupied(t,function(t){for(r[t]=[],n=o;n--&&this.is_empty(t,n)&&!this.is_placeholder_in(t,n);)r[t].push(n);if(!r[t].length)return!(s=!1)}),!s)return!1;for(n=i,n=1;n<o;n++){for(var a=!0,l=0,d=r.length;l<d;l++)r[l]&&-1===_.inArray(n,r[l])&&(a=!1);if(!0===a){s=n;break}}return s},s.displacement_diff=function(t,e,i){var n=t.row,s=[],r=e.row+e.size_y;return this.for_each_column_occupied(t,function(t){for(var e=0,i=r;i<n;i++)this.is_empty(t,i)&&(e+=1);s.push(e)}),0<(i-=Math.max.apply(Math,s))?i:0},s.widgets_below=function(t){var e=_([]),i=_.isPlainObject(t)?t:t.coords().grid;if(void 0===i)return e;var n=this,s=i.row+i.size_y-1;return this.for_each_column_occupied(i,function(t){n.for_each_widget_below(t,s,function(){if(!n.is_player(this)&&-1===_.inArray(this,e))return e=e.add(this),!0})}),l.sort_by_row_asc(e)},s.set_cells_player_occupies=function(t,e){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=e,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},s.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},s.can_go_down=function(t){var e=!0,i=this;return t.hasClass(this.options.static_class)&&(e=!1),this.widgets_below(t).each(function(){_(this).hasClass(i.options.static_class)&&(e=!1)}),e},s.can_go_up=function(t){var e=t.coords().grid,i=e.row,n=i-1,s=!0;return 1!==i&&(this.for_each_column_occupied(e,function(t){if(this.is_occupied(t,n)||this.is_player(t,n)||this.is_placeholder_in(t,n)||this.is_player_in(t,n))return!(s=!1)}),s)},s.can_move_to=function(n,t,e){var s=n.el,i={size_y:n.size_y,size_x:n.size_x,col:t,row:e},r=!0;return!(this.options.max_cols!==1/0&&t+n.size_x-1>this.cols)&&(!(this.options.max_rows<e+n.size_y-1)&&(this.for_each_cell_occupied(i,function(t,e){var i=this.is_widget(t,e);!i||n.el&&!i.is(s)||(r=!1)}),r))},s.get_targeted_columns=function(t){for(var e=(t||this.player_grid_data.col)+(this.player_grid_data.size_x-1),i=[],n=t;n<=e;n++)i.push(n);return i},s.get_targeted_rows=function(t){for(var e=(t||this.player_grid_data.row)+(this.player_grid_data.size_y-1),i=[],n=t;n<=e;n++)i.push(n);return i},s.get_cells_occupied=function(t,e){var i,n={cols:[],rows:[]};for(e instanceof _&&(t=arguments[1].coords().grid),i=0;i<t.size_x;i++){var s=t.col+i;n.cols.push(s)}for(i=0;i<t.size_y;i++){var r=t.row+i;n.rows.push(r)}return n},s.for_each_cell_occupied=function(t,i){return this.for_each_column_occupied(t,function(e){this.for_each_row_occupied(t,function(t){i.call(this,e,t)})}),this},s.for_each_column_occupied=function(t,e){for(var i=0;i<t.size_x;i++){var n=t.col+i;e.call(this,n,t)}},s.for_each_row_occupied=function(t,e){for(var i=0;i<t.size_y;i++){var n=t.row+i;e.call(this,n,t)}},s.clean_up_changed=function(){var t=this;t.$changed.each(function(){t.options.shift_larger_widgets_down&&t.move_widget_up(_(this))})},s._traversing_widgets=function(t,e,i,n,s){var r=this.gridmap;if(r[i]){var o,a,l=t+"/"+e;if(arguments[2]instanceof _){var d=arguments[2].coords().grid;i=d.col,n=d.row,s=arguments[3]}var h=[],c=n,u={"for_each/above":function(){for(;c--&&!(0<c&&this.is_widget(i,c)&&-1===_.inArray(r[i][c],h)&&(o=s.call(r[i][c],i,c),h.push(r[i][c]),o)););},"for_each/below":function(){for(c=n+1,a=r[i].length;c<a;c++)this.is_widget(i,c)&&-1===_.inArray(r[i][c],h)&&(o=s.call(r[i][c],i,c),h.push(r[i][c]))}};u[l]&&u[l].call(this)}},s.for_each_widget_above=function(t,e,i){return this._traversing_widgets("for_each","above",t,e,i),this},s.for_each_widget_below=function(t,e,i){return this._traversing_widgets("for_each","below",t,e,i),this},s.get_highest_occupied_cell=function(){for(var t,e=this.gridmap,i=e[1].length,n=[],s=[],r=e.length-1;1<=r;r--)for(t=i-1;1<=t;t--)if(this.is_widget(r,t)){n.push(t),s.push(r);break}return{col:Math.max.apply(Math,s),row:Math.max.apply(Math,n)}},s.get_widgets_in_range=function(t,e,i,n){var s,r,o,a,l=_([]);for(s=i;t<=s;s--)for(r=n;e<=r;r--)!1!==(o=this.is_widget(s,r))&&((a=o.data("coords").grid).col>=t&&a.col<=i&&a.row>=e&&a.row<=n&&(l=l.add(o)));return l},s.get_widgets_at_cell=function(t,e){return this.get_widgets_in_range(t,e,t,e)},s.get_widgets_from=function(e,i){var t=_();return e&&(t=t.add(this.$widgets.filter(function(){var t=parseInt(_(this).attr("data-col"));return t===e||e<t}))),i&&(t=t.add(this.$widgets.filter(function(){var t=parseInt(_(this).attr("data-row"));return t===i||i<t}))),t},s.set_dom_grid_height=function(t){if(void 0===t){var e=this.get_highest_occupied_cell().row;t=(e+1)*this.options.widget_margins[1]+e*this.min_widget_height}return this.container_height=t,this.$el.css("height",this.container_height),this},s.set_dom_grid_width=function(t){void 0===t&&(t=this.get_highest_occupied_cell().col);var e=this.options.max_cols===1/0?this.options.max_cols:this.cols;return t=Math.min(e,Math.max(t,this.options.min_cols)),this.container_width=(t+1)*this.options.widget_margins[0]+t*this.min_widget_width,this.is_responsive()?this.$el.css({"min-width":"100%","max-width":"100%"}):this.$el.css("width",this.container_width),this},s.is_responsive=function(){return this.options.autogenerate_stylesheet&&"auto"===this.options.widget_base_dimensions[0]&&this.options.max_cols!==1/0},s.get_responsive_col_width=function(){var t=this.cols||this.options.max_cols;return(this.$el[0].clientWidth-3-(t+1)*this.options.widget_margins[0])/t},s.resize_responsive_layout=function(){return this.min_widget_width=this.get_responsive_col_width(),this.generate_stylesheet(),this.update_widgets_dimensions(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this},s.toggle_collapsed_grid=function(t,e){return t?(this.$widgets.css({"margin-top":e.widget_margins[0],"margin-bottom":e.widget_margins[0],"min-height":e.widget_base_dimensions[1]}),this.$el.addClass("collapsed"),this.resize_api&&this.disable_resize(),this.drag_api&&this.disable()):(this.$widgets.css({"margin-top":"auto","margin-bottom":"auto","min-height":"auto"}),this.$el.removeClass("collapsed"),this.resize_api&&this.enable_resize(),this.drag_api&&this.enable()),this},s.generate_stylesheet=function(t){var e,i="",n=this.is_responsive()&&this.options.responsive_breakpoint&&_(window).width()<this.options.responsive_breakpoint;t||(t={}),t.cols||(t.cols=this.cols),t.rows||(t.rows=this.rows),t.namespace||(t.namespace=this.options.namespace),t.widget_base_dimensions||(t.widget_base_dimensions=this.options.widget_base_dimensions),t.widget_margins||(t.widget_margins=this.options.widget_margins),this.is_responsive()&&(t.widget_base_dimensions=[this.get_responsive_col_width(),t.widget_base_dimensions[1]],this.toggle_collapsed_grid(n,t));var s=_.param(t);if(0<=_.inArray(s,l.generated_stylesheets))return!1;for(this.generated_stylesheets.push(s),l.generated_stylesheets.push(s),e=1;e<=t.cols+1;e++)i+=t.namespace+' [data-col="'+e+'"] { left:'+(n?this.options.widget_margins[0]:e*t.widget_margins[0]+(e-1)*t.widget_base_dimensions[0])+"px; }\n";for(e=1;e<=t.rows+1;e++)i+=t.namespace+' [data-row="'+e+'"] { top:'+(e*t.widget_margins[1]+(e-1)*t.widget_base_dimensions[1])+"px; }\n";for(var r=1;r<=t.rows;r++)i+=t.namespace+' [data-sizey="'+r+'"] { height:'+(n?"auto":r*t.widget_base_dimensions[1]+(r-1)*t.widget_margins[1])+(n?"":"px")+"; }\n";for(var o=1;o<=t.cols;o++){var a=o*t.widget_base_dimensions[0]+(o-1)*t.widget_margins[0];i+=t.namespace+' [data-sizex="'+o+'"] { width:'+(n?this.$wrapper.width()-2*this.options.widget_margins[0]:a>this.$wrapper.width()?this.$wrapper.width():a)+"px; }\n"}return this.remove_style_tags(),this.add_style_tag(i)},s.add_style_tag=function(t){var e=document,i="gridster-stylesheet";if(""!==this.options.namespace&&(i=i+"-"+this.options.namespace),!document.getElementById(i)){var n=e.createElement("style");n.id=i,e.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),this.remove_style_tags(),this.$style_tags=this.$style_tags.add(n)}return this},s.remove_style_tags=function(){var t=l.generated_stylesheets,e=this.generated_stylesheets;this.$style_tags.remove(),l.generated_stylesheets=_.map(t,function(t){if(-1===_.inArray(t,e))return t})},s.generate_faux_grid=function(t,e){var i,n;for(this.faux_grid=[],this.gridmap=[],i=e;0<i;i--)for(this.gridmap[i]=[],n=t;0<n;n--)this.add_faux_cell(n,i);return this},s.add_faux_cell=function(t,e){var i=_({left:this.baseX+(e-1)*this.min_widget_width,top:this.baseY+(t-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:e,row:t,original_col:e,original_row:t}).coords();return _.isArray(this.gridmap[e])||(this.gridmap[e]=[]),void 0===this.gridmap[e][t]&&(this.gridmap[e][t]=!1),this.faux_grid.push(i),this},s.add_faux_rows=function(t){t=window.parseInt(t,10);for(var e=this.rows,i=e+parseInt(t||1),n=i;e<n;n--)for(var s=this.cols;1<=s;s--)this.add_faux_cell(n,s);return this.rows=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},s.add_faux_cols=function(t){t=window.parseInt(t,10);var e=this.cols,i=e+parseInt(t||1);i=Math.min(i,this.options.max_cols);for(var n=e+1;n<=i;n++)for(var s=this.rows;1<=s;s--)this.add_faux_cell(s,n);return this.cols=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},s.recalculate_faux_grid=function(){var t=this.$wrapper.width();return this.baseX=(e.width()-t)/2,this.baseY=this.$wrapper.offset().top,"relative"===this.$wrapper.css("position")&&(this.baseX=this.baseY=0),_.each(this.faux_grid,_.proxy(function(t,e){this.faux_grid[t]=e.update({left:this.baseX+(e.data.col-1)*this.min_widget_width,top:this.baseY+(e.data.row-1)*this.min_widget_height})},this)),this.is_responsive()&&this.resize_responsive_layout(),this.options.center_widgets&&this.center_widgets(),this},s.resize_widget_dimensions=function(t){return t.widget_margins&&(this.options.widget_margins=t.widget_margins),t.widget_base_dimensions&&(this.options.widget_base_dimensions=t.widget_base_dimensions),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.$widgets.each(_.proxy(function(t,e){var i=_(e);this.resize_widget(i)},this)),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this},s.get_widgets_from_DOM=function(){var t=this.$widgets.map(_.proxy(function(t,e){var i=_(e);return this.dom_to_coords(i)},this));return t=l.sort_by_row_and_col_asc(t),_(t).map(_.proxy(function(t,e){return this.register_widget(e)||null},this)).length&&this.$el.trigger("gridster:positionschanged"),this},s.get_num_widgets=function(){return this.$widgets.size()},s.set_num_columns=function(t){var e=this.options.max_cols,i=Math.floor(t/(this.min_widget_width+this.options.widget_margins[0]))+this.options.extra_cols,n=this.$widgets.map(function(){return _(this).attr("data-col")}).get();n.length||(n=[0]);var s=Math.max.apply(Math,n);this.cols=Math.max(s,i,this.options.min_cols),e!==1/0&&s<=e&&e<this.cols&&(this.cols=e),this.drag_api&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},s.set_new_num_rows=function(t){var e=this.options.max_rows,i=this.$widgets.map(function(){return _(this).attr("data-row")}).get();i.length||(i=[0]);var n=Math.max.apply(Math,i);this.rows=Math.max(n,t,this.options.min_rows),e!==1/0&&(e<n||e<this.rows)&&(e=this.rows),this.min_rows=n,this.max_rows=e,this.options.max_rows=e;var s=this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[1];this.drag_api&&(this.drag_api.options.container_height=s),this.container_height=s,this.generate_faux_grid(this.rows,this.cols)},s.generate_grid_and_stylesheet=function(){var t=this.$wrapper.width();this.set_num_columns(t);this.options.extra_rows;return this.$widgets.each(function(t,e){+_(e).attr("data-sizey")}),this.rows=this.options.max_rows,this.baseX=(e.width()-t)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},s.destroy=function(t){return this.$el.removeData("gridster"),_.each(this.$widgets,function(){_(this).removeData("coords")}),e.unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.resize_api&&this.resize_api.destroy(),this.$widgets.each(function(t,e){_(e).coords().destroy()}),this.resize_api&&this.resize_api.destroy(),this.remove_style_tags(),t&&this.$el.remove(),this},_.fn.gridster=function(e){return this.each(function(){var t=_(this);t.data("gridster")||t.data("gridster",new l(this,e))})},l}),function(V){var j={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};V.fn.bxSlider=function(e){if(0===this.length)return this;if(1<this.length)return this.each(function(){V(this).bxSlider(e)}),this;var h={},c=this,n=V(window).width(),s=V(window).height();if(!V(c).data("bxSlider")){var r=function(){V(c).data("bxSlider")||(h.settings=V.extend({},j,e),h.settings.slideWidth=parseInt(h.settings.slideWidth),h.children=c.children(h.settings.slideSelector),h.children.length<h.settings.minSlides&&(h.settings.minSlides=h.children.length),h.children.length<h.settings.maxSlides&&(h.settings.maxSlides=h.children.length),h.settings.randomStart&&(h.settings.startSlide=Math.floor(Math.random()*h.children.length)),h.active={index:h.settings.startSlide},h.carousel=1<h.settings.minSlides||1<h.settings.maxSlides,h.carousel&&(h.settings.preloadImages="all"),h.minThreshold=h.settings.minSlides*h.settings.slideWidth+(h.settings.minSlides-1)*h.settings.slideMargin,h.maxThreshold=h.settings.maxSlides*h.settings.slideWidth+(h.settings.maxSlides-1)*h.settings.slideMargin,h.working=!1,h.controls={},h.interval=null,h.animProp="vertical"===h.settings.mode?"top":"left",h.usingCSS=h.settings.useCSS&&"fade"!==h.settings.mode&&function(){for(var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<e.length;i++)if(t.style[e[i]]!==undefined)return h.cssPrefix=e[i].replace("Perspective","").toLowerCase(),h.animProp="-"+h.cssPrefix+"-transform",!0;return!1}(),"vertical"===h.settings.mode&&(h.settings.maxSlides=h.settings.minSlides),c.data("origStyle",c.attr("style")),c.children(h.settings.slideSelector).each(function(){V(this).data("origStyle",V(this).attr("style"))}),t())},t=function(){var t=h.children.eq(h.settings.startSlide);c.wrap('<div class="'+h.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),h.viewport=c.parent(),h.settings.ariaLive&&!h.settings.ticker&&h.viewport.attr("aria-live","polite"),h.loader=V('<div class="bx-loading" />'),h.viewport.prepend(h.loader),c.css({width:"horizontal"===h.settings.mode?1e3*h.children.length+215+"%":"auto",position:"relative"}),h.usingCSS&&h.settings.easing?c.css("-"+h.cssPrefix+"-transition-timing-function",h.settings.easing):h.settings.easing||(h.settings.easing="swing"),h.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),h.viewport.parent().css({maxWidth:l()}),h.settings.pager||h.settings.controls||h.viewport.parent().css({margin:"0 auto 0px"}),h.children.css({"float":"horizontal"===h.settings.mode?"left":"none",listStyle:"none",position:"relative"}),h.children.css("width",d()),"horizontal"===h.settings.mode&&0<h.settings.slideMargin&&h.children.css("marginRight",h.settings.slideMargin),"vertical"===h.settings.mode&&0<h.settings.slideMargin&&h.children.css("marginBottom",h.settings.slideMargin),"fade"===h.settings.mode&&(h.children.css({position:"absolute",zIndex:0,display:"none"}),h.children.eq(h.settings.startSlide).css({zIndex:h.settings.slideZIndex,display:"block"})),h.controls.el=V('<div class="bx-controls" />'),h.settings.captions&&S(),h.active.last=h.settings.startSlide===f()-1,h.settings.video&&c.fitVids(),("all"===h.settings.preloadImages||h.settings.ticker)&&(t=h.children),h.settings.ticker?h.settings.pager=!1:(h.settings.controls&&y(),h.settings.auto&&h.settings.autoControls&&b(),h.settings.pager&&w(),(h.settings.controls||h.settings.autoControls||h.settings.pager)&&h.viewport.after(h.controls.el)),o(t,a)},o=function(t,e){var i=t.find('img:not([src=""]), iframe').length,n=0;0!==i?t.find('img:not([src=""]), iframe').each(function(){V(this).one("load error",function(){++n===i&&e()}).each(function(){this.complete&&V(this).load()})}):e()},a=function(){if(h.settings.infiniteLoop&&"fade"!==h.settings.mode&&!h.settings.ticker){var t="vertical"===h.settings.mode?h.settings.minSlides:h.settings.maxSlides,e=h.children.slice(0,t).clone(!0).addClass("bx-clone"),i=h.children.slice(-t).clone(!0).addClass("bx-clone");h.settings.ariaHidden&&(e.attr("aria-hidden",!0),i.attr("aria-hidden",!0)),c.append(e).prepend(i)}h.loader.remove(),m(),"vertical"===h.settings.mode&&(h.settings.adaptiveHeight=!0),h.viewport.height(u()),c.redrawSlider(),h.settings.onSliderLoad.call(c,h.active.index),h.initialized=!0,h.settings.responsive&&V(window).bind("resize",W),h.settings.auto&&h.settings.autoStart&&(1<f()||h.settings.autoSlideForOnePage)&&M(),h.settings.ticker&&z(),h.settings.pager&&k(h.settings.startSlide),h.settings.controls&&H(),h.settings.touchEnabled&&!h.settings.ticker&&P(),h.settings.keyboardEnabled&&!h.settings.ticker&&V(document).keydown(G)},u=function(){var t=0,e=V();if("vertical"===h.settings.mode||h.settings.adaptiveHeight)if(h.carousel){var n=1===h.settings.moveSlides?h.active.index:h.active.index*g();for(e=h.children.eq(n),i=1;i<=h.settings.maxSlides-1;i++)e=n+i>=h.children.length?e.add(h.children.eq(i-1)):e.add(h.children.eq(n+i))}else e=h.children.eq(h.active.index);else e=h.children;return"vertical"===h.settings.mode?(e.each(function(){t+=V(this).outerHeight()}),0<h.settings.slideMargin&&(t+=h.settings.slideMargin*(h.settings.minSlides-1))):t=Math.max.apply(Math,e.map(function(){return V(this).outerHeight(!1)}).get()),"border-box"===h.viewport.css("box-sizing")?t+=parseFloat(h.viewport.css("padding-top"))+parseFloat(h.viewport.css("padding-bottom"))+parseFloat(h.viewport.css("border-top-width"))+parseFloat(h.viewport.css("border-bottom-width")):"padding-box"===h.viewport.css("box-sizing")&&(t+=parseFloat(h.viewport.css("padding-top"))+parseFloat(h.viewport.css("padding-bottom"))),t},l=function(){var t="100%";return 0<h.settings.slideWidth&&(
t="horizontal"===h.settings.mode?h.settings.maxSlides*h.settings.slideWidth+(h.settings.maxSlides-1)*h.settings.slideMargin:h.settings.slideWidth),t},d=function(){var t=h.settings.slideWidth,e=h.viewport.width();if(0===h.settings.slideWidth||h.settings.slideWidth>e&&!h.carousel||"vertical"===h.settings.mode)t=e;else if(1<h.settings.maxSlides&&"horizontal"===h.settings.mode){if(e>h.maxThreshold)return t;e<h.minThreshold?t=(e-h.settings.slideMargin*(h.settings.minSlides-1))/h.settings.minSlides:h.settings.shrinkItems&&(t=Math.floor((e+h.settings.slideMargin)/Math.ceil((e+h.settings.slideMargin)/(t+h.settings.slideMargin))-h.settings.slideMargin))}return t},p=function(){var t=1,e=null;return"horizontal"===h.settings.mode&&0<h.settings.slideWidth?h.viewport.width()<h.minThreshold?t=h.settings.minSlides:h.viewport.width()>h.maxThreshold?t=h.settings.maxSlides:(e=h.children.first().width()+h.settings.slideMargin,t=Math.floor((h.viewport.width()+h.settings.slideMargin)/e)):"vertical"===h.settings.mode&&(t=h.settings.minSlides),t},f=function(){var t=0,e=0,i=0;if(0<h.settings.moveSlides)if(h.settings.infiniteLoop)t=Math.ceil(h.children.length/g());else for(;e<h.children.length;)++t,e=i+p(),i+=h.settings.moveSlides<=p()?h.settings.moveSlides:p();else t=Math.ceil(h.children.length/p());return t},g=function(){return 0<h.settings.moveSlides&&h.settings.moveSlides<=p()?h.settings.moveSlides:p()},m=function(){var t,e,i;h.children.length>h.settings.maxSlides&&h.active.last&&!h.settings.infiniteLoop?"horizontal"===h.settings.mode?(t=(e=h.children.last()).position(),v(-(t.left-(h.viewport.width()-e.outerWidth())),"reset",0)):"vertical"===h.settings.mode&&(i=h.children.length-h.settings.minSlides,t=h.children.eq(i).position(),v(-t.top,"reset",0)):(t=h.children.eq(h.active.index*g()).position(),h.active.index===f()-1&&(h.active.last=!0),t!==undefined&&("horizontal"===h.settings.mode?v(-t.left,"reset",0):"vertical"===h.settings.mode&&v(-t.top,"reset",0)))},v=function(t,e,i,n){var s,r;h.usingCSS?(r="vertical"===h.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",c.css("-"+h.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"===e?(c.css(h.animProp,r),0!==i?c.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){V(t.target).is(c)&&(c.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),$())}):$()):"reset"===e?c.css(h.animProp,r):"ticker"===e&&(c.css("-"+h.cssPrefix+"-transition-timing-function","linear"),c.css(h.animProp,r),0!==i?c.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){V(t.target).is(c)&&(c.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),v(n.resetValue,"reset",0),I())}):(v(n.resetValue,"reset",0),I()))):((s={})[h.animProp]=t,"slide"===e?c.animate(s,i,h.settings.easing,function(){$()}):"reset"===e?c.css(h.animProp,t):"ticker"===e&&c.animate(s,i,"linear",function(){v(n.resetValue,"reset",0),I()}))},_=function(){for(var t="",e="",i=f(),n=0;n<i;n++)e="",h.settings.buildPager&&V.isFunction(h.settings.buildPager)||h.settings.pagerCustom?(e=h.settings.buildPager(n),h.pagerEl.addClass("bx-custom-pager")):(e=n+1,h.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+e+"</a></div>";h.pagerEl.html(t)},w=function(){h.settings.pagerCustom?h.pagerEl=V(h.settings.pagerCustom):(h.pagerEl=V('<div class="bx-pager" />'),h.settings.pagerSelector?V(h.settings.pagerSelector).html(h.pagerEl):h.controls.el.addClass("bx-has-pager").append(h.pagerEl),_()),h.pagerEl.on("click touchend","a",T)},y=function(){h.controls.next=V('<a class="bx-next" href="">'+h.settings.nextText+"</a>"),h.controls.prev=V('<a class="bx-prev" href="">'+h.settings.prevText+"</a>"),h.controls.next.bind("click touchend",x),h.controls.prev.bind("click touchend",C),h.settings.nextSelector&&V(h.settings.nextSelector).append(h.controls.next),h.settings.prevSelector&&V(h.settings.prevSelector).append(h.controls.prev),h.settings.nextSelector||h.settings.prevSelector||(h.controls.directionEl=V('<div class="bx-controls-direction" />'),h.controls.directionEl.append(h.controls.prev).append(h.controls.next),h.controls.el.addClass("bx-has-controls-direction").append(h.controls.directionEl))},b=function(){h.controls.start=V('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+h.settings.startText+"</a></div>"),h.controls.stop=V('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+h.settings.stopText+"</a></div>"),h.controls.autoEl=V('<div class="bx-controls-auto" />'),h.controls.autoEl.on("click",".bx-start",D),h.controls.autoEl.on("click",".bx-stop",E),h.settings.autoControlsCombine?h.controls.autoEl.append(h.controls.start):h.controls.autoEl.append(h.controls.start).append(h.controls.stop),h.settings.autoControlsSelector?V(h.settings.autoControlsSelector).html(h.controls.autoEl):h.controls.el.addClass("bx-has-controls-auto").append(h.controls.autoEl),R(h.settings.autoStart?"stop":"start")},S=function(){h.children.each(function(){var t=V(this).find("img:first").attr("title");t!==undefined&&(""+t).length&&V(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},x=function(t){t.preventDefault(),h.controls.el.hasClass("disabled")||(h.settings.auto&&h.settings.stopAutoOnClick&&c.stopAuto(),c.goToNextSlide())},C=function(t){t.preventDefault(),h.controls.el.hasClass("disabled")||(h.settings.auto&&h.settings.stopAutoOnClick&&c.stopAuto(),c.goToPrevSlide())},D=function(t){c.startAuto(),t.preventDefault()},E=function(t){c.stopAuto(),t.preventDefault()},T=function(t){var e,i;t.preventDefault(),h.controls.el.hasClass("disabled")||(h.settings.auto&&h.settings.stopAutoOnClick&&c.stopAuto(),(e=V(t.currentTarget)).attr("data-slide-index")!==undefined&&(i=parseInt(e.attr("data-slide-index")))!==h.active.index&&c.goToSlide(i))},k=function(i){var t=h.children.length;if("short"===h.settings.pagerType)return 1<h.settings.maxSlides&&(t=Math.ceil(h.children.length/h.settings.maxSlides)),void h.pagerEl.html(i+1+h.settings.pagerShortSeparator+t);h.pagerEl.find("a").removeClass("active"),h.pagerEl.each(function(t,e){V(e).find("a").eq(i).addClass("active")})},$=function(){if(h.settings.infiniteLoop){var t="";0===h.active.index?t=h.children.eq(0).position():h.active.index===f()-1&&h.carousel?t=h.children.eq((f()-1)*g()).position():h.active.index===h.children.length-1&&(t=h.children.eq(h.children.length-1).position()),t&&("horizontal"===h.settings.mode?v(-t.left,"reset",0):"vertical"===h.settings.mode&&v(-t.top,"reset",0))}h.working=!1,h.settings.onSlideAfter.call(c,h.children.eq(h.active.index),h.oldIndex,h.active.index)},R=function(t){h.settings.autoControlsCombine?h.controls.autoEl.html(h.controls[t]):(h.controls.autoEl.find("a").removeClass("active"),h.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},H=function(){1===f()?(h.controls.prev.addClass("disabled"),h.controls.next.addClass("disabled")):!h.settings.infiniteLoop&&h.settings.hideControlOnEnd&&(0===h.active.index?(h.controls.prev.addClass("disabled"),h.controls.next.removeClass("disabled")):h.active.index===f()-1?(h.controls.next.addClass("disabled"),h.controls.prev.removeClass("disabled")):(h.controls.prev.removeClass("disabled"),h.controls.next.removeClass("disabled")))},M=function(){if(0<h.settings.autoDelay)setTimeout(c.startAuto,h.settings.autoDelay);else c.startAuto(),V(window).focus(function(){c.startAuto()}).blur(function(){c.stopAuto()});h.settings.autoHover&&c.hover(function(){h.interval&&(c.stopAuto(!0),h.autoPaused=!0)},function(){h.autoPaused&&(c.startAuto(!0),h.autoPaused=null)})},z=function(){var t,e,i,n,s,r,o,a,l=0;"next"===h.settings.autoDirection?c.append(h.children.clone().addClass("bx-clone")):(c.prepend(h.children.clone().addClass("bx-clone")),t=h.children.first().position(),l="horizontal"===h.settings.mode?-t.left:-t.top),v(l,"reset",0),h.settings.pager=!1,h.settings.controls=!1,h.settings.autoControls=!1,h.settings.tickerHover&&(h.usingCSS?(n="horizontal"===h.settings.mode?4:5,h.viewport.hover(function(){e=c.css("-"+h.cssPrefix+"-transform"),i=parseFloat(e.split(",")[n]),v(i,"reset",0)},function(){a=0,h.children.each(function(){a+="horizontal"===h.settings.mode?V(this).outerWidth(!0):V(this).outerHeight(!0)}),s=h.settings.speed/a,r="horizontal"===h.settings.mode?"left":"top",o=s*(a-Math.abs(parseInt(i))),I(o)})):h.viewport.hover(function(){c.stop()},function(){a=0,h.children.each(function(){a+="horizontal"===h.settings.mode?V(this).outerWidth(!0):V(this).outerHeight(!0)}),s=h.settings.speed/a,r="horizontal"===h.settings.mode?"left":"top",o=s*(a-Math.abs(parseInt(c.css(r)))),I(o)})),I()},I=function(t){var e,i,n=t||h.settings.speed,s={left:0,top:0},r={left:0,top:0};"next"===h.settings.autoDirection?s=c.find(".bx-clone").first().position():r=h.children.first().position(),e="horizontal"===h.settings.mode?-s.left:-s.top,i="horizontal"===h.settings.mode?-r.left:-r.top,v(e,"ticker",n,{resetValue:i})},F=function(t){var e=V(window),i={top:e.scrollTop(),left:e.scrollLeft()},n=t.offset();return i.right=i.left+e.width(),i.bottom=i.top+e.height(),n.right=n.left+t.outerWidth(),n.bottom=n.top+t.outerHeight(),!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)},G=function(t){var e=document.activeElement.tagName.toLowerCase(),i="input|textarea";if(null==new RegExp(e,["i"]).exec(i)&&F(c)){if(39===t.keyCode)return x(t),!1;if(37===t.keyCode)return C(t),!1}},P=function(){h.touch={start:{x:0,y:0},end:{x:0,y:0}},h.viewport.bind("touchstart MSPointerDown pointerdown",Y),h.viewport.on("click",".bxslider a",function(t){h.viewport.hasClass("click-disabled")&&(t.preventDefault(),h.viewport.removeClass("click-disabled"))})},Y=function(t){if(h.controls.el.addClass("disabled"),h.working)t.preventDefault(),h.controls.el.removeClass("disabled");else{h.touch.originalPos=c.position();var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e];h.touch.start.x=i[0].pageX,h.touch.start.y=i[0].pageY,h.viewport.get(0).setPointerCapture&&(h.pointerId=e.pointerId,h.viewport.get(0).setPointerCapture(h.pointerId)),h.viewport.bind("touchmove MSPointerMove pointermove",O),h.viewport.bind("touchend MSPointerUp pointerup",A),h.viewport.bind("MSPointerCancel pointercancel",L)}},L=function(){v(h.touch.originalPos.left,"reset",0),h.controls.el.removeClass("disabled"),h.viewport.unbind("MSPointerCancel pointercancel",L),h.viewport.unbind("touchmove MSPointerMove pointermove",O),h.viewport.unbind("touchend MSPointerUp pointerup",A),h.viewport.get(0).releasePointerCapture&&h.viewport.get(0).releasePointerCapture(h.pointerId)},O=function(t){var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=Math.abs(i[0].pageX-h.touch.start.x),s=Math.abs(i[0].pageY-h.touch.start.y),r=0,o=0;s<3*n&&h.settings.preventDefaultSwipeX?t.preventDefault():n<3*s&&h.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!==h.settings.mode&&h.settings.oneToOneTouch&&("horizontal"===h.settings.mode?(o=i[0].pageX-h.touch.start.x,r=h.touch.originalPos.left+o):(o=i[0].pageY-h.touch.start.y,r=h.touch.originalPos.top+o),v(r,"reset",0))},A=function(t){h.viewport.unbind("touchmove MSPointerMove pointermove",O),h.controls.el.removeClass("disabled");var e=t.originalEvent,i="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=0,s=0;h.touch.end.x=i[0].pageX,h.touch.end.y=i[0].pageY,"fade"===h.settings.mode?(s=Math.abs(h.touch.start.x-h.touch.end.x))>=h.settings.swipeThreshold&&(h.touch.start.x>h.touch.end.x?c.goToNextSlide():c.goToPrevSlide(),c.stopAuto()):("horizontal"===h.settings.mode?(s=h.touch.end.x-h.touch.start.x,n=h.touch.originalPos.left):(s=h.touch.end.y-h.touch.start.y,n=h.touch.originalPos.top),!h.settings.infiniteLoop&&(0===h.active.index&&0<s||h.active.last&&s<0)?v(n,"reset",200):Math.abs(s)>=h.settings.swipeThreshold?(s<0?c.goToNextSlide():c.goToPrevSlide(),c.stopAuto()):v(n,"reset",200)),h.viewport.unbind("touchend MSPointerUp pointerup",A),h.viewport.get(0).releasePointerCapture&&h.viewport.get(0).releasePointerCapture(h.pointerId)},W=function(){if(h.initialized)if(h.working)window.setTimeout(W,10);else{var t=V(window).width(),e=V(window).height();n===t&&s===e||(n=t,s=e,c.redrawSlider(),h.settings.onSliderResize.call(c,h.active.index))}},N=function(t){var e=p();h.settings.ariaHidden&&!h.settings.ticker&&(h.children.attr("aria-hidden","true"),h.children.slice(t,t+e).attr("aria-hidden","false"))},B=function(t){return t<0?h.settings.infiniteLoop?f()-1:h.active.index:t>=f()?h.settings.infiniteLoop?0:h.active.index:t};return c.goToSlide=function(t,e){var i,n,s,r,o=!0,a=0,l={left:0,top:0},d=null;if(h.oldIndex=h.active.index,h.active.index=B(t),!h.working&&h.active.index!==h.oldIndex){if(h.working=!0,void 0!==(o=h.settings.onSlideBefore.call(c,h.children.eq(h.active.index),h.oldIndex,h.active.index))&&!o)return h.active.index=h.oldIndex,void(h.working=!1);"next"===e?h.settings.onSlideNext.call(c,h.children.eq(h.active.index),h.oldIndex,h.active.index)||(o=!1):"prev"===e&&(h.settings.onSlidePrev.call(c,h.children.eq(h.active.index),h.oldIndex,h.active.index)||(o=!1)),h.active.last=h.active.index>=f()-1,(h.settings.pager||h.settings.pagerCustom)&&k(h.active.index),h.settings.controls&&H(),"fade"===h.settings.mode?(h.settings.adaptiveHeight&&h.viewport.height()!==u()&&h.viewport.animate({height:u()},h.settings.adaptiveHeightSpeed),h.children.filter(":visible").fadeOut(h.settings.speed).css({zIndex:0}),h.children.eq(h.active.index).css("zIndex",h.settings.slideZIndex+1).fadeIn(h.settings.speed,function(){V(this).css("zIndex",h.settings.slideZIndex),$()})):(h.settings.adaptiveHeight&&h.viewport.height()!==u()&&h.viewport.animate({height:u()},h.settings.adaptiveHeightSpeed),!h.settings.infiniteLoop&&h.carousel&&h.active.last?"horizontal"===h.settings.mode?(l=(d=h.children.eq(h.children.length-1)).position(),a=h.viewport.width()-d.outerWidth()):(i=h.children.length-h.settings.minSlides,l=h.children.eq(i).position()):h.carousel&&h.active.last&&"prev"===e?(n=1===h.settings.moveSlides?h.settings.maxSlides-g():(f()-1)*g()-(h.children.length-h.settings.maxSlides),l=(d=c.children(".bx-clone").eq(n)).position()):"next"===e&&0===h.active.index?(l=c.find("> .bx-clone").eq(h.settings.maxSlides).position(),h.active.last=!1):0<=t&&(r=t*parseInt(g()),l=h.children.eq(r).position()),void 0!==l?(s="horizontal"===h.settings.mode?-(l.left-a):-l.top,v(s,"slide",h.settings.speed)):h.working=!1),h.settings.ariaHidden&&N(h.active.index*g())}},c.goToNextSlide=function(){if(h.settings.infiniteLoop||!h.active.last){var t=parseInt(h.active.index)+1;c.goToSlide(t,"next")}},c.goToPrevSlide=function(){if(h.settings.infiniteLoop||0!==h.active.index){var t=parseInt(h.active.index)-1;c.goToSlide(t,"prev")}},c.startAuto=function(t){h.interval||(h.interval=setInterval(function(){"next"===h.settings.autoDirection?c.goToNextSlide():c.goToPrevSlide()},h.settings.pause),h.settings.autoControls&&!0!==t&&R("stop"))},c.stopAuto=function(t){h.interval&&(clearInterval(h.interval),h.interval=null,h.settings.autoControls&&!0!==t&&R("start"))},c.getCurrentSlide=function(){return h.active.index},c.getCurrentSlideElement=function(){return h.children.eq(h.active.index)},c.getSlideElement=function(t){return h.children.eq(t)},c.getSlideCount=function(){return h.children.length},c.isWorking=function(){return h.working},c.redrawSlider=function(){h.children.add(c.find(".bx-clone")).outerWidth(d()),h.viewport.css("height",u()),h.settings.ticker||m(),h.active.last&&(h.active.index=f()-1),h.active.index>=f()&&(h.active.last=!0),h.settings.pager&&!h.settings.pagerCustom&&(_(),k(h.active.index)),h.settings.ariaHidden&&N(h.active.index*g())},c.destroySlider=function(){h.initialized&&(h.initialized=!1,V(".bx-clone",this).remove(),h.children.each(function(){V(this).data("origStyle")!==undefined?V(this).attr("style",V(this).data("origStyle")):V(this).removeAttr("style")}),V(this).data("origStyle")!==undefined?this.attr("style",V(this).data("origStyle")):V(this).removeAttr("style"),V(this).unwrap().unwrap(),h.controls.el&&h.controls.el.remove(),h.controls.next&&h.controls.next.remove(),h.controls.prev&&h.controls.prev.remove(),h.pagerEl&&h.settings.controls&&!h.settings.pagerCustom&&h.pagerEl.remove(),V(".bx-caption",this).remove(),h.controls.autoEl&&h.controls.autoEl.remove(),clearInterval(h.interval),h.settings.responsive&&V(window).unbind("resize",W),h.settings.keyboardEnabled&&V(document).unbind("keydown",G),V(this).removeData("bxSlider"))},c.reloadSlider=function(t){t!==undefined&&(e=t),c.destroySlider(),r(),V(c).data("bxSlider",this)},r(),V(c).data("bxSlider",this),this}}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,s){return jQuery.easing[jQuery.easing.def](t,e,i,n,s)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(1-Math.pow(2,-10*e/s))+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(2-Math.pow(2,-10*--e))+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){var r=1.70158,o=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(o||(o=.3*s),a<Math.abs(n)){a=n;r=o/4}else r=o/(2*Math.PI)*Math.asin(n/a);return-a*Math.pow(2,10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/o)+i},easeOutElastic:function(t,e,i,n,s){var r=1.70158,o=0,a=n;if(0==e)return i;if(1==(e/=s))return i+n;if(o||(o=.3*s),a<Math.abs(n)){a=n;r=o/4}else r=o/(2*Math.PI)*Math.asin(n/a);return a*Math.pow(2,-10*e)*Math.sin((e*s-r)*(2*Math.PI)/o)+n+i},easeInOutElastic:function(t,e,i,n,s){var r=1.70158,o=0,a=n;if(0==e)return i;if(2==(e/=s/2))return i+n;if(o||(o=s*(.3*1.5)),a<Math.abs(n)){a=n;r=o/4}else r=o/(2*Math.PI)*Math.asin(n/a);return e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/o)*-.5+i:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-r)*(2*Math.PI)/o)*.5+n+i},easeInBack:function(t,e,i,n,s,r){return r==undefined&&(r=1.70158),n*(e/=s)*e*((r+1)*e-r)+i},easeOutBack:function(t,e,i,n,s,r){return r==undefined&&(r=1.70158),n*((e=e/s-1)*e*((r+1)*e+r)+1)+i},easeInOutBack:function(t,e,i,n,s,r){return r==undefined&&(r=1.70158),(e/=s/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+i:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+i},easeInBounce:function(t,e,i,n,s){return n-jQuery.easing.easeOutBounce(t,s-e,0,n,s)+i},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?n*(7.5625*e*e)+i:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,s){return e<s/2?.5*jQuery.easing.easeInBounce(t,2*e,0,n,s)+i:.5*jQuery.easing.easeOutBounce(t,2*e-s,0,n,s)+.5*n+i}}),function(s){"use strict";s.fn.fitVids=function(t){var e={customSelector:null},i=document.createElement("div"),n=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return i.className="fit-vids-style",i.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",n.parentNode.insertBefore(i,n),t&&s.extend(e,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.kickstarter.com']","object","embed"];e.customSelector&&t.push(e.customSelector),s(this).find(t.join(",")).each(function(){var t=s(this);if(!("embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){var e=("object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height())/(isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10));if(!t.attr("id")){var i="fitvid"+Math.floor(999999*Math.random());t.attr("id",i)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),t.removeAttr("height").removeAttr("width")}})})}}(jQuery),Gws_Category_Navi.prototype.setBaseUrl=function(t){this.baseUrl=t},Gws_Category_Navi.prototype.render=function(t){if(0!=t.length){var s=this,r=[],o=r[0],a=-1,l=location.href.replace(/https?:\/\/.*?\//,"/"),d=null;$.each(t,function(t,e){var i=(e.name.match(/\//g)||[]).length,n=s.baseUrl.replace("ID",e._id);0!=i&&i==a||(r.push({depth:i,items:[]}),o=r[r.length-1]),l.startsWith(n)&&(d=e._id),o.items.push('<a class="link-item" href="'+n+'">'+e.trailing_name+"</a>"),a=i});var i=[];$.each(r,function(t,e){i.push('<div class="depth depth-'+e.depth+'">'),i.push(e.items.join('<span class="separator"></span>')),i.push("</div>")}),this.el.find(".dropdown-menu").append(i.join(""));var e=this.el.find(".dropdown-toggle");if(d){var n='<i class="material-icons md-18 md-dark">&#xE14C;</i>';e.after('<a class="ml-1" href="'+e.attr("href")+'">'+n+"</a>")}e.click(function(){return!1})}else this.el.hide()},Gws_Tab.renderTabs=function(t){var e=location.pathname+"/";$(t).find("a").each(function(){var t=$(this);e.match(new RegExp("^"+t.attr("href")+"(/|$)"))&&t.addClass("current")})},this.Gws_Popup=function(){function t(){}return t.init=null,t.render=function(t,e){var i;return this.init||(this.init=!0,$(window).resize(function(){return $(".gws-popup").remove()}),$(document).click(function(t){if(!$(t.target).closest(".gws-popup, .gws-popup-event").length)return $(".gws-popup").remove()})),$(".gws-popup").remove(),i=$("<div class='gws-popup'></div>").html($(e)),$("body").append(i),t.addClass("gws-popup-event"),this.renderPopup(t)},t.renderPopup=function(t){var e,i,n;return e=$(".gws-popup"),$(window).width()<1.5*e.outerWidth()&&e.css("max-width",$(window).width()/2),i=t.offset().left+t.outerWidth()/2-e.outerWidth()/2,n=t.offset().top-e.outerHeight()-20,i<0?(i=t.offset().left+t.outerWidth()/2-20,e.addClass("left")):e.removeClass("left"),i+e.outerWidth()>$(window).width()?(i=t.offset().left-e.outerWidth()+t.outerWidth()/2+20,e.addClass("right")):e.removeClass("right"),n<0?(n=t.offset().top+t.outerHeight(),e.addClass("top")):e.removeClass("top"),e.css({left:i,top:n}).animate({top:"+=10",opacity:1},50)},t}(),this.Gws_Member=function(){function t(){}return t.groups=null,t.users=null,t.render=function(){return $(".js-copy-groups").length<2&&($(".js-copy-groups").remove(),$(".js-paste-groups").remove()),$(".js-copy-groups").click(function(){return t.copyGroups($(this))}),$(".js-paste-groups").click(function(){return t.pasteGroups($(this))}),$(".js-copy-users").length<2&&($(".js-copy-users").remove(),$(".js-paste-users").remove()),$(".js-copy-users").click(function(){return t.copyUsers($(this))}),$(".js-paste-users").click(function(){return t.pasteUsers($(this))})},t.confirmReadableSetting=function(){return $(".save").on("click",function(){if(0===$(".gws-addon-readable-setting tbody tr").length)return confirm("\u95b2\u89a7\u8005\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u5168\u54e1\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")})},t.copyGroups=function(t){return this.groups=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.groups.length+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteGroups=function(t){var e;return e=this.pasteItems(t,this.groups),this.showLog(t,e+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.copyUsers=function(t){return this.users=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.users.length+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteUsers=function(t){var e;return e=this.pasteItems(t,this.users),this.showLog(t,e+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteItems=function(t,e){var i,n,s,r;return e&&0!==e.length?((i=t.closest("dl")).find("table").show(),r=i.find("tbody"),n=i.find(".hidden-ids").attr("name"),s=0,e.each(function(){var t;if(0===r.find('tr[data-id="'+$(this).data("id")+'"]').length)return(t=$(this).clone(!0)).find("input").attr("name",n),r.append(t),s+=1}),s):0},t.showLog=function(t,e){return $(".gws-member-log").remove(),$("<span class='gws-member-log'>"+e+"</span>").appendTo(t.parent()).hide().fadeIn(200)},t}(),this.Gws_Reminder=function(){function t(){}return t.renderList=function(e){var t;return null==e&&(e={}),(t=$(e.el||document)).find(".list-item").each(function(){return $(this).find(".links").prepend('<a class="restore" href="#" style="display: none;">\u5143\u306b\u623b\u3059</a>')}),t.find(".list-item.deleted").each(function(){return $(this).find(".check, .meta, .delete, .updated, .more-btn").hide(),$(this).find(".dropdown-menu").removeClass("active"),$(this).find(".restore").show(),$(this).find(".notification").hide()}),t.find(".list-item .delete").click(function(){var t;return t=$(this).closest(".list-item"),$.ajax({url:e.url,method:"post",data:{_method:"delete",id:t.data("id"),item_id:t.data("item_id"),item_model:t.data("model"),item_name:t.data("name"),date:t.data("date")},success:function(){return t.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .updated, .more-btn").hide(),t.find(".dropdown-menu").removeClass("active"),t.find(".restore").show(),t.find(".notification").hide(),!1},error:function(){return alert("Error")}}),!1}),t.find(".list-item .restore").click(function(){var t;return t=$(this).closest(".list-item"),$.ajax({url:e.restore_url,method:"post",data:{id:t.data("id"),item_id:t.data("item_id"),item_model:t.data("model"),item_name:t.data("name"),date:t.data("date")},success:function(){return t.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .more-btn").show(),t.find(".restore").hide(),t.find(".notification")[0]&&(t.find(".notification")[0].selectedIndex=0),t.find(".notification").show(),!1},error:function(){return alert("Error")}}),!1})},t}(),Gws_Bookmark.prototype.render=function(t){null===t&&(t={});var e,i=this;this.bookmarkId=t.id,this.defaultName=t.default_name,this.url=t.url,this.model=t.model,e=this.bookmarkId?this.bookmarkIcon:this.unbookmarkIcon;var n=t.name||this.defaultName,s=$('<span class="bookmark-icon"></span>').append($('<i class="material-icons"></i>').html(e)),r=$('<ul class="dropdown-menu"></ul>'),o=$("<li></li>");o.append($('<input name="bookmark[name]" id="bookmark_name" class="bookmark-name" type="text">').val(n)),o.append($('<input name="button" type="button" class="btn update" />').val(t.save)),o.append($('<input name="button" type="button" class="btn delete" />').val(t["delete"])),r.append($('<li><div class="bookmark-notice"></div></li>')).append(o),this.el.html(s).append(r),this.el.click(function(t){if(i.loading)return!1;$(t.target).hasClass("update")?i.update():$(t.target).hasClass("delete")?i["delete"]():i.bookmarkId?(i.el.addClass("active"),i.el.find(".dropdown-menu").addClass("active")):i.create()})},Gws_Bookmark.prototype.create=function(){this.loading=!0;var e=this,i=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),$.ajax({url:this.url,method:"POST",data:{item:{name:this.defaultName,url:location.pathname+location.search,model:this.model}},success:function(t){e.el.find(".dropdown-menu").html(i),e.el.addClass("active"),e.el.find(".dropdown-menu").addClass("active"),e.el.find(".material-icons").html(e.bookmarkIcon),e.el.find(".bookmark-notice").text(t.notice),e.el.find(".bookmark-name").val(e.defaultName),e.bookmarkId=t.bookmark_id,e.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype.update=function(){this.loading=!0;var e=this,i=this.el.find(".bookmark-name").val()||this.defaultName,t=this.url+"/"+this.bookmarkId,n=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:t,method:"POST",data:{_method:"patch",item:{name:i,url:location.pathname+location.search,model:this.model}},success:function(t){e.el.find(".dropdown-menu").html(n),e.el.removeClass("active"),e.el.find(".dropdown-menu").removeClass("active"),e.el.find(".material-icons").html(e.bookmarkIcon),e.el.find(".bookmark-notice").text(t.notice),e.el.find(".bookmark-name").val(i),e.bookmarkId=t.bookmark_id,e.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype["delete"]=function(){var t=this;if(!this.bookmarkId)return!1;this.loading=!0;var e=this.url+"/"+this.bookmarkId,i=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:e,method:"POST",data:{_method:"delete",item:{url:location.pathname+location.search}},success:function(){t.el.find(".dropdown-menu").html(i),t.el.removeClass("active"),t.el.find(".dropdown-menu").removeClass("active"),t.el.find(".material-icons").html(t.unbookmarkIcon),t.bookmarkId=null,t.loading=!1},error:function(){alert("Error")}})},Gws_ReadableSetting.prototype.render=function(){var t=this;this.el.find(".buttons input").change(function(){"select"==$(this).val()?t.showSelectForm():t.hideSelectForm()}),"select"==this.el.find(".buttons input:checked").val()?this.el.find(".gws-addon-readable-setting-select").show():this.el.find(".gws-addon-readable-setting-select").hide()},Gws_ReadableSetting.prototype.showSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideDown("fast")},Gws_ReadableSetting.prototype.hideSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideUp("fast")},Gws_Contrast.getContrastId=function(t){return Cookies.get("gws-contrast-"+t)},Gws_Contrast.setContrastId=function(t,e){Cookies.set("gws-contrast-"+t,e,{expires:7,path:"/"})},Gws_Contrast.removeContrastId=function(t){Cookies.remove("gws-contrast-"+t)},Gws_Contrast.prototype.render=function(){var n=this;this.$el.data("load",function(){n.loadContrasts()}),this.$el.on("click",".gws-contrast-item",function(t){var e=$(this),i=e.data("id");"default"===i?(n.removeContrast(e.data("text-color"),e.data("color")),Gws_Contrast.removeContrastId(n.opts.siteId)):(n.changeContrast(e.data("text-color"),e.data("color")),Gws_Contrast.setContrastId(n.opts.siteId,i)),SS.notice(n.opts.notice.replace(":name",e.text())),t.stopPropagation()})},Gws_Contrast.prototype.loadContrasts=function(){if(this.$el.data("loadedAt"))this.checkActiveContrast();else{var e=this;$.ajax({url:this.opts.url,type:"GET",dataType:"json",success:function(t){e.renderContrasts(t)},error:function(){e.showMessage(this.opts.loadError)},complete:function(t){e.completeLoading(t)}})}},Gws_Contrast.prototype.completeLoading=function(){this.$el.data("loadedAt",Date.now()),this.$el.find(".gws-contrast-loading").closest("li").hide()},Gws_Contrast.prototype.showMessage=function(t){this.$el.append($("<li/>").html('<div class="gws-contrast-error">'+t+"</div>"))},Gws_Contrast.prototype.renderContrasts=function(t){if(0!==t.length){
this.renderContrast("default",this.opts.defaultContrast);var e=this;$.each(t,function(){e.renderContrast(this._id.$oid,this.name,this.color,this.text_color)}),this.checkActiveContrast()}else this.showMessage(this.opts.noContrasts)},Gws_Contrast.prototype.renderContrast=function(t,e,i,n){var s={id:t};i&&(s.color=i),n&&(s.textColor=n);var r=$("<input/>",{type:"radio",name:"gws-contrast-item",value:t}),o=$("<label/>",{"class":"gws-contrast-item",data:s});o.append(r),o.append('<span class="gws-contrast-name">'+e+"</span>"),this.$el.append($("<li/>").append(o))},Gws_Contrast.prototype.checkActiveContrast=function(){var t=Gws_Contrast.getContrastId(this.opts.siteId);t?$('input[name="gws-contrast-item"]').val([t]):$('input[name="gws-contrast-item"]').val(["default"])},Gws_Contrast.prototype.changeContrast=function(t,e){this.$style||(this.$style=$("<style/>",{type:"text/css"}),$("head").append(this.$style)),this.$style.html(this.template.replace(/:color/g,t).replace(/:background/g,e))},Gws_Contrast.prototype.removeContrast=function(){this.$style&&this.$style.html("")},this.Gws_Schedule_View=function(){function i(){}return i.getCalendar=function(){var t;return 0===(t=$("#calendar-controller")).length&&(t=$("#calendar")),t.fullCalendar("getView").calendar?t:null},i.getCalendarDate=function(){var t;return(t=i.getCalendar())?t.fullCalendar("getDate").format("YYYY-MM-DD"):null},i.renderTabs=function(t){return $(t).find("a").click(function(){var t,e;return(t=i.getCalendarDate())&&(e=(e=$(this).attr("href")).replace(/(\?.*)?$/,"?calendar[date]="+t),$(this).attr("href",e)),!0})},i.renderSideCalendars=function(t){return $(t).find(".fc-toolbar h2").click(function(){var t,e;return e="gws-schedule-tool-calendars",t=i.getCalendarDate(),t=$.fullCalendar.moment(t),$("."+e).is(":hidden")&&$("."+e).remove(),0===$("."+e).length&&i.crenderSideCalendars(e,t),$("."+e).animate({width:"toggle"},"fast")})},i.crenderSideCalendars=function(i,e){var t,n,s;for(t="<div class='"+i+"'><div class='xdsoft_datetimepicker controller'><button type='button' class='xdsoft_prev' /><button type='button' class='xdsoft_next' /></div></div>",$("#menu").before(t),n=s=0;s<=3;n=++s)0<n&&e.add(1,"months"),$("."+i).append("<div class='"+i+"-cal"+n+"'></div>"),$("."+i+"-cal"+n).datetimepicker({timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,scrollMonth:!1,inline:!0,defaultDate:e.format("YYYY-MM-DD"),defaultSelect:!1,todayButton:!1,onGenerate:function(){return $(this).find(".xdsoft_today").removeClass("xdsoft_today"),$(this).find(".xdsoft_current").removeClass("xdsoft_current")},onSelectDate:function(t){return e=sprintf("%d-%02d-%02d",t.getFullYear(),t.getMonth()+1,t.getDate()),$(".calendar").fullCalendar("gotoDate",e)}});return $("."+i).find(".xdsoft_month, .xdsoft_year").unbind("mousedown").find("i").remove(),$("."+i+" .xdsoft_datetimepicker").not(".controller.controller").find(".xdsoft_prev, .xdsoft_next").hide(),$("."+i+" .controller .xdsoft_prev").mousedown(function(){var t,e;for(e=[],n=t=1;t<=4;n=++t)e.push($("."+i+" .xdsoft_prev").not(this).mousedown().mouseup());return e}),$("."+i+" .controller .xdsoft_next").mousedown(function(){var t,e;for(e=[],n=t=1;t<=4;n=++t)e.push($("."+i+" .xdsoft_next").not(this).mousedown().mouseup());return e})},i}(),this.Gws_Schedule_Calendar=function(){function d(){}return d.messages={noPlan:"\u4e88\u5b9a\u306f\u3042\u308a\u307e\u305b\u3093"},d.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=this.defaultParams(t,e),e.restUrl&&$.extend(!0,n,this.editableParams(t,e)),e.restUrl&&$.extend(!0,n,this.tapMenuParams(t,e)),$.extend(!0,n,e),$(t).fullCalendar(n),this.renderInitialize(t,i),this.overrideAddLink(t)},d.renderInitialize=function(t,e){return null==e&&(e={}),e.viewTodo||(e.viewTodo="active"),e.view&&$(t).fullCalendar("changeView",e.view),e.date&&$(t).fullCalendar("gotoDate",e.date),"list"===e.viewFormat&&($.fullCalendar.toggleListFormat(t),$(t).find(".fc-withListView-button").addClass("fc-state-active")),"active"===e.viewTodo&&$(t).find(".fc-withTodo-button").addClass("fc-state-active"),"active"===e.viewAttendance&&$(t).find(".fc-withAbsence-button").addClass("fc-state-active"),Gws_Schedule_View.renderSideCalendars(t),$(t+"-header .calendar-text").each(function(){var t,e;return e=$(this),t=$(this).find(".calendar-text-popup").prop("outerHTML"),e.find(".calendar-text-link").click(function(){return Gws_Popup.render($(this),$(t).show()),!1})})},d.defaultParams=function(e){return{buttonText:{listMonth:"\u30ea\u30b9\u30c8"},columnFormat:{month:"ddd",week:"M/D [(]ddd[)]",day:"M/D [(]ddd[)]"},customButtons:{withTodo:{text:"ToDo\u8868\u793a",click:function(){return $(".fc-event-todo").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),d.updateNoPlanVisibility($(this).closest(".fc"))}},withAbsence:{text:"\u6b20\u5e2d\u8868\u793a",click:function(){return $(".fc-event-user-attendance-absence").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),d.updateNoPlanVisibility($(this).closest(".fc"))}},withListView:{text:"\u30ea\u30b9\u30c8",click:function(){return $.fullCalendar.toggleListFormat(e),$(e).fullCalendar("refetchEvents"),$(window).trigger("resize"),$(this).toggleClass("fc-state-active")}},reload:{text:"\u518d\u8aad\u8fbc",icon:"gws-schedule-calendar-reload",click:function(){$(e).fullCalendar("refetchEvents")}}},contentHeight:"auto",displayEventEnd:{basicWeek:!0},endParam:"s[end]",fixedWeekCount:!1,slotEventOverlap:!1,header:{left:"today prev next title reload",right:"withAbsence withTodo month,basicWeek,agendaDay withListView"},lang:"ja",nextDayThreshold:"00:00:00",schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",slotLabelFormat:"HH:mm",startParam:"s[start]",timeFormat:"HH:mm",titleFormat:{month:"YYYY\u5e74 M\u6708",week:"(YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09)",day:"YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09"},loading:function(t){return t?$(e).hasClass("fc-list-format")?$(this).find(".fc-view").prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-widget-content").eq(0).prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-loading").remove()},eventAfterAllRender:function(t){var e,i;return(i=$(".fc .fc-withTodo-button")).length&&(i.hasClass("fc-state-active")?$(".fc .fc-event-todo").show():$(".fc .fc-event-todo").hide()),(e=$(".fc .fc-withAbsence-button")).length&&(e.hasClass("fc-state-active")?$(".fc .fc-event-user-attendance-absence").show():$(".fc .fc-event-user-attendance-absence").hide()),d.updateNoPlanVisibility(t.el.closest(".fc")),d.changePrintPreviewPortrait(t)}}},d.viewStateQuery=function(t){var e,i,n;return i=t.el.closest(".fc").hasClass("fc-list-format")?"list":"default",n=$(".fc .fc-withTodo-button").hasClass("fc-state-active")?"active":"inactive",e=$(".fc .fc-withAbsence-button").hasClass("fc-state-active")?"active":"inactive","calendar[path]="+location.pathname+"&calendar[view]="+t.name+"&calendar[viewFormat]="+i+"&calendar[viewTodo]="+n+"&calendar[viewAttendance]="+e},d.tapMenuParams=function(t,a){var l;return l=a.restUrl,{dayClick:function(e,t,i){var n,s,r,o;if(n="",a.tapMenu&&(s=new Date,r=e.format()+"T"+s.getHours()+":00:00",o="calendar[date]="+e.format()+"&"+d.viewStateQuery(i),n="<a href='"+l+"/new?start="+r+"&"+o+"' class='add-plan'>\u4e88\u5b9a\u3092\u4f5c\u6210</a>",n+="<a href='"+l.replace(/schedule\/.*/,"schedule/todo/-/readables")+"/new?start="+r+"&"+o+"' class='add-plan'>ToDo\u3092\u4f5c\u6210</a>"),0===$("#calendar-controller").length&&("month"!==i.name&&(n+='<a href="" data-view="month">\u6708\u8868\u793a</a>'),"basicWeek"!==i.name&&(n+='<a href="" data-view="basicWeek">\u9031\u8868\u793a</a>'),"agendaDay"!==i.name&&(n+='<a href="" data-view="agendaDay">\u65e5\u8868\u793a</a>')),n)return $("body").append('<div class="tap-menu">'+n+"</div>"),t.pageX+$(".tap-menu").width()>$(window).width()?$(".tap-menu").css("top",t.pageY-5).css("right",5).show():$(".tap-menu").css("top",t.pageY-5).css("left",t.pageX-5).show(),$(".tap-menu a").click(function(){var t;if($(this).data("view"))return(t=i.calendar.getCalendar()).changeView($(this).data("view")),t.gotoDate(e),$(".tap-menu").remove(),!1}),$(".tap-menu").mouseleave(function(){return $(".tap-menu").remove()})}}},d.editableParams=function(t,e){var l;return l=e.restUrl,{editable:!0,eventClick:function(t,e,i){var n,s,r;if(!t.noPopup)return r=$(this),Gws_Popup.render(r,"<div class='fc-popup'><span class='fc-loading'>\u8aad\u307f\u8fbc\u307f\u4e2d</span></div>"),n=t.restUrl?t.restUrl:l,s="calendar[date]="+t.start.format("YYYY-MM-DD")+"&"+d.viewStateQuery(i),$.ajax({url:n+"/"+t.id+"/popup",success:function(t){return $(".fc-popup").html(t),$(".fc-popup").find("a").each(function(){return $(this).attr("href",$(this).attr("href")+"?"+s)}),Gws_Popup.renderPopup(r)}})},eventDrop:function(t,e,i,n,s,r){var o,a;return a=null,t.end&&(a=t.end.format()),o=t.restUrl?t.restUrl:l,$.ajax({type:"PUT",url:o+"/"+t.id+".json",data:{item:{api:"drop",api_start:t.start.format(),api_end:a}},success:function(){var t;return t=r.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),i()}})},eventResize:function(t,e,i){return $.ajax({type:"PUT",url:l+"/"+t.id+".json",data:{item:{api:"resize",api_start:t.start.format(),api_end:t.end.format()}},success:function(){var t;return t=view.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),i()}})}}},d.changePrintPreviewPortrait=function(t){if($("body").hasClass("print-preview"))return"agendaDay"===t.type||"listMonth"===t.type||t.el.closest(".fc").hasClass("fc-list-format")?($("body").removeClass("horizontal"),$("body").addClass("vertical")):($("body").removeClass("vertical"),$("body").addClass("horizontal"))},d.overrideAddLink=function(s){return $(".add-plan").click(function(){var t,e,i,n;return i=new Date,t=$(s).fullCalendar("getDate"),n=$(s).fullCalendar("getView"),e=$(this).attr("href").replace(/\?.*/,""),n.start.isBefore(i)&&n.end.isAfter(i)||(e=e+"?start="+(t.format("YYYY-MM-DD")+"T"+i.getHours()+":00:00")+"&"+("calendar[date]="+t.format()+"&"+d.viewStateQuery(n))),$(this).attr("href",e)})},d.updateNoPlanVisibility=function(t){var e;if(0!==(e=$(t).find(".fc-listMonth-view-container .no-plan")).length)return 0===$(".fc-event:visible").length?e.show():e.hide()},d}();var FC=$.fullCalendar,View=FC.View;BasicHourView=FC.views.basicHour=FC.BasicView.extend({renderEvents:function(t){for(i in this.dayGrid.renderEvents(t),head='<tr><td class="fc-head-container fc-widget-header">',head+='<div class="fc-row fc-widget-header">',head+="<table><thead><tr>",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])head+='<th class="fc-day-header fc-widget-header fc-hour-'+i+'">'+i+"</th>";head+="</tr></thead></table>",head+="</div>",head+="</td></tr>",this.el.find(".fc-head").html(head)}}),BasicHourView.eventRender=function(t,e,i){var n=BasicHourView.eventLeftPosition(t,i),s=BasicHourView.eventRightPosition(t,i)-n;s<1&&(s=1),e.find(".fc-time").remove(),e.css({position:"absolute",top:"2px",width:s.toString()+"%","margin-left":n+"%"})},BasicHourView.eventLeftPosition=function(t,e){if(nums=BasicHourView.datesToNum(t.start,e.start),nums[0]<nums[1])return 0;var i=new Date(t.start._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.eventRightPosition=function(t,e){if(!t.end)return 1;if(nums=BasicHourView.datesToNum(t.end,e.end),nums[0]==nums[1])return 99.5;var i=new Date(t.end._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.datesToNum=function(t,e){return num1=1e4*t.year()+100*(t.month()+1)+t.date(),num2=1e4*e.year()+100*(e.month()+1)+e.date(),[num1,num2]},function(){var t=$.fullCalendar,p=(t.View,!1),f=function(){var t=$(".fc-listMonth-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-listMonth-view")},g=function(t){return t.html(""),t},m=function(){var t=$(".fc-listMonth-view .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},e=t.ListMonthView=t.BasicView.extend({renderEvents:function(i){var n=this.calendar,t=g(f()),e=$('<div class="fc-listMonth-view-table"></div>'),s=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");for(var r in $('<div class="tr"></div>').appendTo(e).append(s),i){var o=i[r];if(-1===o.className.indexOf("fc-holiday")){var a=$('<span class="fc-content"></span>').text(o.title),l=$('<a class="fc-event fc-event-point"></a>').append(a);l.addClass(o.className.join(" ")),l.css({color:o.textColor,"background-color":o.backgroundColor}),l.bind("click",function(t){var e=$(this).data("eventNo");return n.view.trigger("eventClick",$(this),i[e],t)}).data("eventNo",r);var d=$('<div class="td info"></div>').append(l);o.sanitizedHtml&&d.append('<p class="summary">'+o.sanitizedHtml+"</p>");var h=$('<div class="td date"></div>').text(o.startDateLabel),c=$('<div class="td time"></div>').text(o.startTimeLabel);o.allDay&&c.text(o.allDayLabel),0;var u=$('<div class="tr"></div>').appendTo(e).append(h).append(c).append(d);-1!==o.className.indexOf("fc-event-todo")&&u.addClass("fc-event-todo"),-1!==o.className.indexOf("fc-event-user-attendance-absence")&&(u.addClass("fc-event-user-attendance-absence"),u.css("display","none"))}}e.appendTo(t),m(),p||(p=!0,$(".fc-withTodo-button").on("click",function(){var t=$("#calendar").fullCalendar("getView").name;t||(t=$("#calendar-controller").fullCalendar("getView").name),"listMonth"===t&&setTimeout(m,0)}))}});t.views.listMonth={"class":e,duration:{months:1},defaults:{fixedWeekCount:!1}}}(),function(){var u=$.fullCalendar,p=function(t){if(!t.title)return"";var e='<div class="fc-title">'+u.htmlEscape("["+t.title+"]");return t.sanitizedHtml?e+" "+u.htmlEscape(t.sanitizedHtml)+"</div>":e+"</div>"},t=u.TimeGrid.extend({fgSegHtml:function(t,e){var i,n,s,r=this.view,o=t.event,a=r.isEventDraggable(o),l=!e&&t.isStart&&r.isEventResizableFromStart(o),d=!e&&t.isEnd&&r.isEventResizableFromEnd(o),h=this.getSegClasses(t,a,l||d),c=u.cssToStr(this.getSegSkinCss(t));return h.unshift("fc-time-grid-event","fc-v-event"),r.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),s=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(o),n=this.getEventTimeText(o,"LT"),s=this.getEventTimeText(o,null,!1)),'<a class="'+h.join(" ")+'"'+(o.url?' href="'+u.htmlEscape(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+u.htmlEscape(s)+'" data-full="'+u.htmlEscape(n)+'"><span>'+u.htmlEscape(i)+"</span></div>":"")+p(o)+'</div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"}});u.AgendaView.extend({timeGridClass:t})}();var fullCalendar_renderListEvents=function(i){var t=function(){var t=$(".fc-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-view")},e=function(t){return t.html(""),t},n=function(){var t=$(".fc-listMonth-view-container .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},s=this.calendar,r=e(t()),o=$('<div class="fc-listMonth-view-table"></div>'),a=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");$('<div class="tr"></div>').appendTo(o).append(a);for(var l=0;l<i.length;l++){var d=i[l].event;if(-1===d.className.indexOf("fc-holiday")){var h=$('<span class="fc-content"></span>').text(d.title),c=$('<a class="fc-event fc-event-point"></a>').append(h);c.addClass(d.className.join(" ")),c.css({color:d.textColor,"background-color":d.backgroundColor}),c.bind("click",function(t){var e=$(this).data("eventNo");return s.view.trigger("eventClick",$(this),i[e].event,t)}).data("eventNo",l);var u=$('<div class="td info"></div>').append(c);if(d.sanitizedHtml&&u.append('<p class="summary">'+d.sanitizedHtml+"</p>"),d.allDay)var p=d.startDateLabel+" "+d.allDayLabel,f=d.endDateLabel+" "+d.allDayLabel;else p=d.startDateLabel+" "+d.startTimeLabel,f=d.endDateLabel+" "+d.endTimeLabel;var g=$('<div class="td startAt"></div>').text(p),m=$('<div class="td delimiter"></div>').text("-"),v=$('<div class="td endAt"></div>').text(f),_=$('<div class="tr"></div>').appendTo(o).append(g).append(m).append(v).append(u);0,-1!==d.className.indexOf("fc-event-todo")&&_.addClass("fc-event-todo"),-1!==d.className.indexOf("fc-event-user-attendance-absence")&&(_.addClass("fc-event-user-attendance-absence"),_.css("display","none"))}}o.appendTo(r),n()};$.fullCalendar.toggleListFormat=function(t){$(t).hasClass("fc-list-format")?($(t).find(".fc-view").children().show(),$(t).find(".fc-listMonth-view-container").hide(),$(t).removeClass("fc-list-format")):($(t).find(".fc-view").children().hide(),$(t).find(".fc-listMonth-view-container").show(),$(t).addClass("fc-list-format"))},$.fullCalendar.BasicView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.BasicView.prototype.renderEvents_=$.fullCalendar.BasicView.prototype.renderEvents,$.fullCalendar.BasicView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.dayGrid.segs,this.renderListEvents(segs))},$.fullCalendar.BasicView.prototype.renderSkeletonHtml_=$.fullCalendar.BasicView.prototype.renderSkeletonHtml,$.fullCalendar.BasicView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},$.fullCalendar.AgendaView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.AgendaView.prototype.renderEvents_=$.fullCalendar.AgendaView.prototype.renderEvents,$.fullCalendar.AgendaView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.timeGrid.segs.concat(this.dayGrid.segs),this.renderListEvents(segs))},$.fullCalendar.AgendaView.prototype.renderSkeletonHtml_=$.fullCalendar.AgendaView.prototype.renderSkeletonHtml,$.fullCalendar.AgendaView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},Gws_Schedule_CalendarTransition.prototype.renderLinks=function(t){if(this.state){var e=this;$(t).each(function(){if(!$(this).hasClass("no-calendar-state")){var t=$(this).attr("href");0<=t.indexOf("?")?t+="&"+e.state:t+="?"+e.state,$(this).attr("href",t)}})}},this.Gws_Schedule_Multiple_Calendar=function(){function t(){}return t.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=Gws_Schedule_Calendar.defaultParams(t,e),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.editableParams(t,e)),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.tapMenuParams(t,e)),$.extend(!0,n,this.defaultParams(t,e)),$.extend(!0,n,this.contentParams(t,e)),$.extend(!0,n,e),$(t).fullCalendar(n),Gws_Schedule_Calendar.renderInitialize(t,i),$(document).click(function(t){return $(".fc-event").not($(t.target).closest(".fc-event")).find(".fc-popup").remove()})},t.defaultParams=function(){return{defaultView:"basicWeek",header:{left:"today prev next title reload",right:"withAbsence withTodo basicWeek,timelineDay"},slotDuration:"01:00",slotLabelFormat:"H",views:{basicHour:{type:"day",buttonText:"\u65e5",contentHeight:25},timelineDay:{contentHeight:25,minTime:"08:00",maxTime:"22:00"}}}},t.controllerParams=function(){return{header:{left:"today prev next title reload",right:"withAbsence withTodo basicWeek,timelineDay"},eventSources:[],eventAfterAllRender:function(t){if("basicWeek"===t.name)return t.el.find(".fc-body").hide()}}},t.contentParams=function(){return{eventRender:function(t,e,i){if("basicHour"===i.name)return BasicHourView.eventRender(t,e,i)},eventAfterAllRender:function(){$(window).trigger("resize")}}},t.renderController=function(t,e,i){var n,s;null==e&&(e={}),null==i&&(i={}),s=Gws_Schedule_Calendar.defaultParams(t,e),$.extend(!0,s,this.defaultParams(t,e)),$.extend(!0,s,this.controllerParams(t,e)),$.extend(!0,s,e),$(t).fullCalendar(s),Gws_Schedule_Calendar.renderInitialize(t,i),Gws_Schedule_Calendar.overrideAddLink(t),(n=$(t)).find(".fc-today-button").click(function(){return $(".calendar.multiple .fc-today-button").click()}),n.find(".fc-prev-button").click(function(){return $(".calendar.multiple .fc-prev-button").click()}),n.find(".fc-next-button").click(function(){return $(".calendar.multiple .fc-next-button").click()}),n.find(".fc-basicWeek-button").click(function(){return $(".calendar.multiple .fc-basicWeek-button").click()}),n.find(".fc-timelineDay-button").click(function(){return $(".calendar.multiple .fc-timelineDay-button").click()}),n.find(".fc-basicHour-button").click(function(){return $(".calendar.multiple .fc-basicHour-button").click()}),n.find(".fc-reload-button").click(function(){return $(".calendar.multiple .fc-reload-button").click()})},t}(),this.Gws_Schedule_Plan=function(){function r(){}return r.diffOn=36e5,r.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate}),this.relateDateForm(),this.relateDateTimeForm()},r.renderAlldayForm=function(){return this.changeDateForm(),$("#item_allday").change(function(){return r.changeDateValue(),r.changeDateForm()})},r.changeDateValue=function(){var t,e;return $("#item_allday").prop("checked")?($("#item_start_on").val($("#item_start_at").val().replace(/ .*/,"")),$("#item_end_on").val($("#item_end_at").val().replace(/ .*/,""))):(e=$("#item_start_at").val().replace(/.* /,""),t=$("#item_end_at").val().replace(/.* /,""),""===e&&""!==$("#item_start_on").val()&&(e="00:00"),""===t&&""!==$("#item_end_on").val()&&(t="00:00"),$("#item_start_at").val($("#item_start_on").val()+" "+e),$("#item_end_at").val($("#item_end_on").val()+" "+t))},r.changeDateForm=function(){return $("#item_allday").prop("checked")?($(".dates-field").show(),$(".datetimes-field").hide()):($(".dates-field").hide(),$(".datetimes-field").show())},r.relateDateForm=function(n,s){if(null==n&&(n=".date.start"),null==s&&(s=".date.end"),$(n+", "+s).click(function(){return r.diffOn=r.diffDates($(n).val(),$(s).val())}),$(n).change(function(){var t,e,i;if((i=$(n).val())&&(i=new Date(i).getTime(),!isNaN(i)))return(t=new Date).setTime(i+r.diffOn),e="%d/%02d/%02d",$(n).hasClass("datetime")&&(e="%d/%02d/%02d %02d:%02d"),$(s).val(sprintf(e,t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes()))}),""===$(s).val())return $(n).change()},r.relateDateTimeForm=function(){return this.relateDateForm(".datetime.start",".datetime.end")},r.diffDates=function(t,e){var i;return t&&e?(i=new Date(e).getTime()-new Date(t).getTime())<0?0:i:36e5},r.transferEnd2Start=function(){return $("#item_allday").prop("checked")?$("#item_start_on").val($("#item_end_on").val()):$("#item_start_at").val($("#item_end_at").val())},r}(),this.Gws_Schedule_Repeat_Plan=function(){function t(){}return t.renderForm=function(){return this.changeRepeatForm(),this.relateDateForm(),$("#item_repeat_type").change(function(){return t.changeRepeatForm()})},t.changeRepeatForm=function(){var t;return""===(t=$("#item_repeat_type").val())?$(".gws-schedule-repeat").addClass("hide"):($(".gws-schedule-repeat").removeClass("hide"),$(".repeat-daily, .repeat-weekly, .repeat-monthly").hide(),$(".repeat-"+t).show())},t.relateDateForm=function(){return Gws_Schedule_Plan.relateDateForm(".date.repeat_start",".date.repeat_end")},t.renderSubmitButtons=function(){var t,e,i,n,s,r;return s=$("#main form"),r='<span class="gws-schedule-btn-space"></span>',t=$('<input type="button" class="btn" value="\u4eca\u56de\u306e\u307f" />'),e=$('<input type="button" class="btn" value="\u4ee5\u964d\u3059\u3079\u3066" />'),i=$('<input type="button" class="btn" value="\u4e00\u9023\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3059\u3079\u3066" />'),t.bind("click",function(){return s.append('<input type="hidden" name="item[edit_range]" value="one" />').submit()}),e.bind("click",function(){return s.append('<input type="hidden" name="item[edit_range]" value="later" />').submit()}),i.bind("click",function(){return s.append('<input type="hidden" name="item[edit_range]" value="all" />').submit()}),(n=$('<div class="gws-schedule-repeat-submit"></div>')).append(t).append(r).append(e).append(r).append(i),$(".send .save, .send .delete").click(function(){if(""!==$("#item_repeat_type").val())return $.colorbox({inline:!0,href:n}),!1})},t}(),Gws_Schedule_Integration.paths={},Gws_Schedule_Integration.render=function(){var t=$(".gws-schedule-box");t[0]&&(t.find(".send-message").each(function(){$(this).on("click",function(){var t=$(this).closest("[data-user-id]").data("user-id");location.href=Gws_Schedule_Integration.paths.newMemoMessage+"?to%5B%5D="+t})}),t.find(".send-email").each(function(){$(this).on("click",function(){var t=$(this).closest("[data-email]").data("email");location.href=Gws_Schedule_Integration.paths.newWebmail+"?item%5Bto%5D="+encodeURIComponent(t)})}),t.find(".copy-email-address").each(function(){$(this).on("click",function(t){return $(this).closest("[data-email]").find(".clipboard-copy-button").click(),$(".dropdown, .dropdown-menu").removeClass("active"),t.preventDefault(),!1})}))},this.Gws_Schedule_Todo_Search=function(){function t(t){this.$el=$(t),this.templateHtml=this.$el.find("#schedule-todo-selected-member-template").html(),this.render()}return t.prototype.render=function(){var i=this;this.$el.find("select.schedule-todo-auto-submit").on("change",function(){i.scheduleToSubmit()});var t=this.$el.find(".schedule-todo-member-select-btn");if(t[0]){var e=t.data("href");t.colorbox({href:e,width:"90%",height:"90%"}),t.data("on-select",function(t){var e=t.closest("[data-id]");0!==e.length&&i.selectUser(e.data())}),this.$el.on("click",".schedule-todo-selected-member .dismiss",function(){$(this).closest(".schedule-todo-selected-member").remove(),i.scheduleToSubmit()})}},t.prototype.selectUser=function(t){var e=t.id,i=t.longName;if(!(0<this.$el.find(".schedule-todo-selected-member[data-id="+e+"]").length)){var n=this.templateHtml.replace(/#id/g,e).replace(/#name/g,i);this.$el.find(".schedule-todo-selected-members").append(n).removeClass("hide"),this.scheduleToSubmit()}},t.prototype.scheduleToSubmit=function(){if(!this.timerId){var t=this;this.timerId=setTimeout(function(){t.$el.submit()},0)}},t}(),this.Gws_Schedule_Todo_Index=function(){function t(t){this.$el=$(t),this.render()}var i=function(t){t.removeClass("hide")},e=function(t){t.addClass("hide")},s=function(t){return"expand_less"===t.find(".list-item-switch").html()};return t.prototype.render=function(){var t=this;this.$el.find(".gws-schedule-todo-list-item-header").on("click",function(){t.toggleListItems($(this))})},t.prototype.toggleListItems=function(t){s(t)?this.collapseListItems(t):this.expandListItems(t)},t.prototype.collapseListItems=function(t){t.find(".list-item-switch").html("expand_more"),this.eachListItem(t,function(){e($(this))})},t.prototype.expandListItems=function(t){t.find(".list-item-switch").html("expand_less");var e=this;this.eachListItem(t,function(){console.log(this);var t=$(this);e.examineToShow(t)?(console.log(!0),i($(this))):console.log(!1)})},t.prototype.examineToShow=function(t){if(t.hasClass("gws-schedule-todo-list-item-header"))return!(e=t.data("parent"))||this.examineToShow(this.$el.find("#"+e));var e,i=t.data("group"),n=this.$el.find("#"+i);return!!s(n)&&(!(e=n.data("parent"))||this.examineToShow(this.$el.find("#"+e)))},t.prototype.eachListItem=function(t,n){var s=t.data("group"),r=t.data("depth");$.each(t.nextAll(".list-item"),function(){var t=$(this),e=t.data("group"),i=t.data("depth");if(e!==s&&i<=r)return!1;n.apply(this)})},t}(),Gws_Schedule_Csv.render=function(t){var e=new Gws_Schedule_Csv(t);return e.render(),e},Gws_Schedule_Csv.prototype.render=function(){var e=this;this.$el.find(".import-confirm").click(function(){e.$importMode.val("confirm")}),this.$el.find(".import-save").click(function(){e.$importMode.val("save")}),this.$el.find("#import_form").ajaxForm({beforeSubmit:function(){e.$importLog.html('<span class="import-loading">\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3044\u307e\u3059\u3002</span>'),SS_AddonTabs.show("#import-result")},success:function(t){e.renderResult(t)},error:function(){e.renderError(data)}}),this.$el.find(".show-csv-description").click(function(){e.showCsvDescription()})},Gws_Schedule_Csv.prototype.renderResult=function(t){var e=this.$importLog;if(e.html(""),t.messages&&e.append('<div class="mb-1">'+t.messages.join("<br />")+"</div>"),t.items){var i={exist:0,entry:0,saved:0,error:0},n='<table class="index mt-1"><thead><tr><th style="width: 150px">\u958b\u59cb\u65e5\u6642</th><th style="width: 150px">\u7d42\u4e86\u65e5\u6642</th><th style="width: 30%">\u30bf\u30a4\u30c8\u30eb</th><th>\u7d50\u679c</th></tr></thead><tbody>';$.each(t.items,function(t,e){"exist"==e.result&&(i.exist+=1),"entry"==e.result&&(i.entry+=1),"saved"==e.result&&(i.saved+=1),"error"==e.result&&(i.error+=1),n+='<tr class="import-'+e.result+'"><td>'+SS.formatTime(e.start_at)+"</td><td>"+SS.formatTime(e.end_at)+"</td><td>"+e.name+"</td><td>"+e.messages.join("<br />")+"</td></tr>"}),n+="</tbody></table>";var s='<div class="mb-1">';i.exist&&(s+='<span class="ml-2 import-exist">\u767b\u9332\u6e08\u307f('+i.exist+")</span>"),i.entry&&(s+='<span class="ml-2 import-entry">\u767b\u9332\u53ef\u80fd('+i.entry+")</span>"),i.saved&&(s+='<span class="ml-2 import-saved">\u767b\u9332\u5b8c\u4e86('+i.saved+")</span>"),i.error&&(s+='<span class="ml-2 import-error">\u30a8\u30e9\u30fc('+i.error+")</span>"),s+="</div>",e.append(s+n)}},Gws_Schedule_Csv.prototype.renderError=function(t,e,i){try{var n=t.responseJSON.join("\n");this.$importLog.html(n)}catch(s){this.$importLog.html("Error: "+i)}},Gws_Schedule_Csv.prototype.showCsvDescription=function(){var t=this.$el.find(".show-csv-description").attr("href");$.colorbox({inline:!0,href:t,width:"90%",height:"90%",fixed:!0,open:!0})},this.Gws_Memo_Message=function(){function t(){}return t.render=function(){$(".list-head .search").on("click",function(){$(".gws-memo-search").animate({height:"toggle"},"fast")}),$(".gws-memo-search .reset").on("click",function(){$(".gws-memo-search input[type=text]").val(""),$(".gws-memo-search input[type=checkbox]").val(""),$(".gws-memo-search .search").click()}),$(".cc-bcc-label").click(function(){return $(".gws-addon-memo-member .cc-bcc").animate({height:"toggle"},"fast"),!1}),$(".add-template").change(function(){""!==$(this).val()&&("html"===$("#item_format").val()?CKEDITOR.instances.item_html.insertText($(this).val()):Webmail_Mail_Form.insertText($("#item_text"),$(this).val()),$(this).val(""))}),$(".send-mdn,.ignore-mdn").on("click",function(){if($(this).hasClass("disabled"))return!1;$.ajax({url:$(this).attr("href"),method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){return $(".send-mdn,.ignore-mdn").addClass("disabled")},success:function(t){return SS.notice(t.notice),$(".request-mdn-notice").remove()}})}),$(".icon-star a").on("click",function(){var t,e=$(this).parent();return t=e.hasClass("on")?$(this).attr("href")+"/unset_star":$(this).attr("href")+"/set_star",$.ajax({url:t,method:"POST",dataType:"json",data:{_method:"put"},success:function(t){"set_star"===t.action?e.removeClass("off").addClass("on"):e.removeClass("on").addClass("off"),t.notice&&SS.notice(t.notice)}}),!1})},t.buildForm=function(t,e){var i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()});if(0===i.length)return!1;var n,s,r=$('meta[name="csrf-token"]').attr("content"),o=$("<form/>",{action:t,method:"post",data:{confirm:e}});for(o.append($("<input/>",{name:"authenticity_token",value:r,type:"hidden"})),n=0,s=i.length;n<s;n++){var a=i[n];o.append($("<input/>",{name:"ids[]",value:a,type:"hidden"}))}return o},t}(),Gws_Memo_Folder.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},Gws_Memo_Filter.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},this.Gws_Monitor_Topic=function(){function t(){}return t.render=function(){return $(".public").on("click",function(){var t,e,i,n,s;return s=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:s,type:"hidden"})),n.appendTo(
document.body).submit()}),$(".preparation").on("click",function(){var t,e,i,n,s;return s=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:s,type:"hidden"})),n.appendTo(document.body).submit()}),$(".question_not_applicable").on("click",function(){var t,e,i;return i=$('meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/question_not_applicable",method:"post",data:{confirm:"\u8a72\u5f53\u306a\u3057\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()}),$(".answered").on("click",function(){var t,e,i;return i=$('meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/answered",method:"post",data:{confirm:"\u56de\u7b54\u6e08\u307f\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()})},t.buildForm=function(t,e){var i,n,s,r,o,a;if(0===(i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()})).length)return!1;for(a=$('meta[name="csrf-token"]').attr("content"),(n=$("<form/>",{action:t,method:"post",data:{confirm:e}})).append($("<input/>",{name:"authenticity_token",value:a,type:"hidden"})),s=0,o=i.length;s<o;s++)r=i[s],n.append($("<input/>",{name:"ids[]",value:r,type:"hidden"}));return n},t.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate})},t}(),Gws_Portal.prototype.addItems=function(t){var i=this;$.each(t,function(t,e){i.addItem(e)})},Gws_Portal.prototype.addItem=function(t){var e=t._id.$oid,i=this.gs.add_widget('<li class="portlet-item" data-id="'+e+'"></li>',t.grid_data.size_x,t.grid_data.size_y,t.grid_data.col,t.grid_data.row);if(i){i.data("id",e);var n=this.el.find(".portlet-html[data-id='"+e+"']");if(n.length){n.height();n.prependTo(i)}}},Gws_Portal.prototype.autoResizeItem=function(t,e){var i=this.gs.options.widget_base_dimensions[1],n=i/2<e%i?1:0,s=t.data("sizex"),r=Math.floor(e/i)+n;t.data("sizey")<r&&this.gs.resize_widget(t,s,r)},Gws_Portal.prototype.setSerializeEvent=function(t){var e=this;e.updateUrl=$(t).data("href"),$(t).click(function(){e.serialize()})},Gws_Portal.prototype.setResetEvent=function(t){var i=this;$(t).click(function(){var t=[];i.el.find(".portlet-item").each(function(){t.push($(this).clone())}),i.gs.remove_all_widgets(),$.each(t,function(t,e){i.gs.add_widget(e,e.data("sizex"),e.data("sizey"))})})},Gws_Portal.prototype.serialize=function(){var i=this,n={};i.el.find("li.portlet-item").each(function(){var t=$(this),e=t.data("id");n[e]=i.gs.serialize(t)[0]}),$.ajax({url:i.updateUrl,method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),json:JSON.stringify(n)},success:function(t){SS.notice(t.message)}})},Gws_Elasticsearch_Highlighter=function(){},Gws_Elasticsearch_Highlighter.prototype={render:function(){location.hash&&$(location.hash).css("border","1px solid red")}},this.Gws_Discussion_Thread=function(){function t(){}return t.render=function(l){var o=function(t,e,i){var n=$("<span></span>"),s=$('<img src="/assets/img/gws/ic-file.png" alt="" />'),r=$('<a target="_blank"></a>'),o=$('<input type="hidden" name="item[file_ids][]" class="file-id" />'),a=$('<i class="material-icons md-18 md-inactive deselect">close</i>');n.attr("data-file-id",e),n.attr("id","file-"+e),r.text(i),r.attr("href","/.u"+l+"/apis/temp_files/"+e+"/view"),o.attr("value",e),a.on("click",function(){return $(this).parent("span").remove(),$(t).find("[data-file-id]").length<=0&&$(t).hide(),!1}),n.append(s),n.append(r),n.append(a),n.append(o),$(t).show(),$(t).append(n)};$("a.ajax-box").data("on-select",function(t){var e,i,n;return n=$.colorbox.element().closest(".comment-files").find(".selected-files"),e=t.data("id"),i=t.data("humanized-name"),o(n,e,i),$.colorbox.close()}),new SS_Addon_TempFile(".comment-files .upload-drop-area",l,{select:function(t,r){return $(t).each(function(t,e){var i,n,s;return s=$(r).closest(".comment-files").find(".selected-files"),i=e._id,n=e.name,o(s,i,n)}),!1}}),$(".open-reply").on("click",function(){return $(this).closest(".addon-body").next(".reply").show(),$(this).remove(),!1}),$(".reply[data-topic]").each(function(){var t=$(this).attr("data-topic"),e=function(){return $(".discussion-contributor"+t+" input#item_contributor_model").val($(this).data("model")),$(".discussion-contributor"+t+" input#item_contributor_id").val($(this).data("id")),$(".discussion-contributor"+t+" input#item_contributor_name").val($(this).data("name"))};return $(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]').on("change",e),$(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]:checked').each(e)})},t}(),this.Gws_Discussion_Unseen=function(){function e(){}return e.url=null,e.intervalID=null,e.intervalTime=null,e.timestamp=null,e.renderUnseen=function(t,e,i){if(this.url=t,this.intervalTime=e,this.timestamp=i,this.url&&this.intervalTime&&this.timestamp)return this.intervalID=setInterval(this.checkMessage,this.intervalTime)},e.checkMessage=function(){return $.ajax({url:e.url,success:function(t){if(parseInt(t)>e.timestamp)return $(".gws-discussion-unseen").show(),clearInterval(e.intervalID)}})},e}(),Gws_Attendance=function(t,e){this.el=t,this.$el=$(t),this.$toolbar=this.$el.find(".cell-toolbar"),this.options=e,this.now=new Date(e.now),this.render()},Gws_Attendance.prototype.render=function(){var n=this;this.$el.find("button[name=punch]").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).data("action"),i=$(this).data("confirm");n.onPunchClicked(e,i)}),this.$el.find("button[name=edit]").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).data("action"),i=$(this).data("confirm");n.onEditClicked(e,i)}),this.$el.find(".reason-tooltip").on("click",function(t){t.preventDefault(),t.stopPropagation(),n.hideToolbar(),n.hideTooltip(),$(this).find(".reason").show()}),this.$el.find("select[name=year_month]").on("change",function(){var t=$(this).val();t&&(location.href=n.options.indexUrl.replace(":year_month",t))}),this.$toolbar.find(".punch").on("click",function(){return n.onPunchClicked($(this).attr("href"),$(this).data("confirmation")),!1}),$(document).on("click",this.el+" .time-card .time",function(t){t.preventDefault(),t.stopPropagation(),n.onClickTime($(this))}),$(document).on("click",this.el+" .time-card .memo",function(t){t.preventDefault(),t.stopPropagation(),n.onClickMemo($(this))}),$(document).on("click",function(){n.hideToolbar(),n.hideTooltip()})},Gws_Attendance.prototype.onPunchClicked=function(t,e){if(t&&(!e||confirm(e))){var i=$('meta[name="csrf-token"]').attr("content");$form=$("<form/>",{action:t,method:"post"}),$form.append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),$("body").append($form),$form.submit()}},Gws_Attendance.prototype.onEditClicked=function(t,e){t&&(e&&!confirm(e)||($a=$("<a />",{href:t}),$a.colorbox({open:!0,width:"90%"})))},Gws_Attendance.prototype.hideToolbar=function(){this.$toolbar.hide()},Gws_Attendance.prototype.hideTooltip=function(){this.$el.find(".reason-tooltip .reason").hide()},Gws_Attendance.prototype.onClickTime=function(t){this.onClickCell(t,this.options.timeUrl)},Gws_Attendance.prototype.onClickMemo=function(t){this.onClickCell(t,this.options.memoUrl)},Gws_Attendance.prototype.setFocus=function(t){this.$el.find(".time-card .time").removeClass("focus"),this.$el.find(".time-card .memo").removeClass("focus"),t.addClass("focus")},Gws_Attendance.prototype.isCellToday=function(t){return t.closest("tr").hasClass("current")},Gws_Attendance.prototype.onClickCell=function(t,e){if(this.hideTooltip(),t.data("day"))if(this.setFocus(t),this.options.editable||this.isCellToday(t)){var i=t.data("day"),n=t.data("type"),s=t.data("mode"),r=this.isCellToday(t),o=this.options.editable;"memo"===n&&this.isCellToday(t)&&(o=!0);var a,l=!1;if("punch"===s&&r)a=(a=this.options.punchUrl).replace(":type",n),this.$toolbar.find(".edit").hide(),this.$toolbar.find(".punch").attr("href",a).show(),l=!0;if("edit"===s&&o)a=(a=(a=e).replace(":day",i)).replace(":type",n),this.$toolbar.find(".punch").hide(),this.$toolbar.find(".edit").attr("href",a).show(),l=!0;if(l){var d=t.offset();t.hasClass("top")?d.top-=this.$toolbar.outerHeight():d.top+=t.outerHeight(),this.$toolbar.show(),this.$toolbar.offset(d)}else this.$toolbar.hide()}else this.$toolbar.hide()},Gws_Attendance_Portlet=function(t,e){this.$el=$(t),this.options=e,this.render()},Gws_Attendance_Portlet.prototype.render=function(){var t=this;this.$el.find("button[name=punch]").on("click",function(){t.punch($(this),$(this).closest("tr").data("field-name"))}),this.$el.find("button[name=edit]").on("click",function(){t.edit($(this),$(this).closest("tr").data("field-name"))})},Gws_Attendance_Portlet.prototype.punch=function(t,e){if(t.attr("disabled","disabled"),confirm(this.options.confirmMessage)){var i=this.options.punchUrl.replace(":TYPE",e),n=this;$.ajax({url:i,method:"POST",data:{ref:this.options.ref},dataType:"json",success:function(){alert(n.options.successMessage),location.reload()},error:function(t){alert(t.responseJSON.join("\n"))},complete:function(){t.removeAttr("disabled")}})}else t.removeAttr("disabled")},Gws_Attendance_Portlet.prototype.edit=function(t,e){t.attr("disabled","disabled");var i=this.options.editUrl.replace(":TYPE",e);$a=$("<a/>",{href:i}),$a.colorbox({open:!0,onClosed:function(){t.removeAttr("disabled")}})},this.Gws_Presence_User=function(){function d(){}return d.render=function(){$(document).on("click",function(){return $(".presence-state-selector").hide(),!0}),$(".presence-state-selector").on("click",function(){return!1}),$(".presence-state-selector [data-value]").on("click",function(){var e=$(this).closest(".presence-state-selector").attr("data-id"),t=$(this).closest(".presence-state-selector").attr("data-url"),i=$(this).attr("data-value");return $.ajax({url:t,type:"POST",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),presence_state:i},success:function(t){d.changedState(e,t),$(".presence-state-selector").hide()},error:function(t){alert(t.responseJSON.join("\n"))}}),!1}),$(".editable .select-presence-state,.editable .presence-state").on("click",function(){return $(".presence-state-selector").closest("li.portlet-item").css("z-index",0),$(".presence-state-selector").hide(),$(this).closest("li.portlet-item").css("z-index",1e3),$(this).closest("td").find(".presence-state-selector").show(),!1}),$(".ajax-text-field").on("click",function(){return d.toggleForm(this),!1}),$(".ajax-text-field").next(".editicon").on("click",function(){return $(this).prev(".ajax-text-field").trigger("click"),!1})},d.changedState=function(t,e){var i=e.presence_state||"",n=e.presence_state_label,s=e.presence_state_style,r=$("tr[data-id="+t+"] .presence-state"),o=$("tr[data-id="+t+"] .presence-state-selector");r.removeClass(),r.addClass("presence-state"),r.addClass(s),r.text(n),o.find('[data-value="'+i+'"] .selected-icon').css("visibility","visible"),o.find('[data-value!="'+i+'"] .selected-icon').css("visibility","hidden")},d.toggleForm=function(t){var e=$(t).attr("data-tag-state"),i=$(t).attr("data-original-tag"),n=$(t).attr("data-form-tag"),s=$(t).text()||$(t).val(),r=$(n).attr("name"),o=($(n).attr("data-id"),$(n).attr("data-url")),a=!1;if("original"==e){(n=$(n)).attr("data-original-tag",$(t).attr("data-original-tag")),n.attr("data-form-tag",$(t).attr("data-form-tag")),n.val(s),n.focusout(function(){if(a)return!0;var t={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return t[r]=$(n).val(),$.ajax({url:o,type:"POST",data:t,success:function(t){$(n).val(t[r]),d.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),a=!0}}),!1}),n.keypress(function(t){if(13==t.which){var e={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return e[r]=$(n).val(),$.ajax({url:o,type:"POST",data:e,success:function(t){$(n).val(t[r]),d.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),a=!0}}),!1}});var l=n.uniqueId();$(t).replaceWith(n),$(l).focus()}else(i=$(i).text(s)).attr("data-original-tag",$(t).attr("data-original-tag")),i.attr("data-form-tag",$(t).attr("data-form-tag")),i.on("click",function(){return d.toggleForm(this),!1}),i.uniqueId(),$(t).replaceWith(i),$(".ajax-text-field[data-id='"+i.attr("data-id")+"'][data-name='"+i.attr("data-name")+"']").text(s)},d}(),this.Gws_Presence_User_Reload=function(){function t(){}return t.render=function(t){null==t&&(t={});var e=t.url,i=t.paginate_params,n=t.page;$(".group-users .reload").on("click",function(){param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i,page:n}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e).show(),e.show()}})}),$(".group-users .list-head .search").on("submit",function(){return param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e),e.show()},error:function(){$(".group-users .data-table-wrap").html("")}}),!1})},t}(),Gws_Share_FolderToolbar.prototype.render=function(){var t=this;this.$el.find(".btn-create-folder").on("click",function(){t.createFolder($(this))}),this.$el.find(".btn-create-root-folder").on("click",function(){t.createFolder($(this))}),this.$el.find(".btn-rename-folder").on("click",function(){t.renameFolder($(this),{success:{callback:t.refresh}})}),this.$el.find(".btn-delete-folder").on("click",function(){t.deleteFolder($(this))}),this.$el.find(".btn-edit-folder").on("click",function(){t.editFolder($(this))}),this.$el.find(".btn-refresh-folder").on("click",function(){t.refreshFolder()})},Gws_Share_FolderToolbar.prototype.createFolder=function(t,e){var i=t.data("href");if(i)location.href=i;else{var n=t.data("api");if(n){var s=t.data("success");!s&&e&&(s=e.success);var r=t.data("error");!r&&e&&(r=e.error);var o=this;$.colorbox({href:n,open:!0,fixed:!0,"with":"90%",height:"90%",onComplete:function(){SS.ajaxForm("#cboxLoadedContent form",{success:function(t){var e;if($.colorbox.close(),s&&s.redirect_to)return t&&((e=t.id)||(e=t._id)),void(location.href=s.redirect_to.replace(/:id/,e));s&&s.reload?location.reload():s&&s.callback&&s.callback.call(o,t)},error:function(t){$.colorbox.close(),t.responseJSON&&0<t.responseJSON.length?alert(t.responseJSON.join("\n")):r&&r.message&&alert(r.message)}})}})}}},Gws_Share_FolderToolbar.prototype.refresh=function(t){t&&(this.$el.find(".folder-name").text(t.name),this.refreshFolder())},Gws_Share_FolderToolbar.prototype.renameFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.deleteFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.editFolder=Gws_Share_FolderToolbar.prototype.createFolder,Gws_Share_FolderToolbar.prototype.refreshFolder=function(){this.options.treeNavi&&this.options.treeNavi.refresh()},$(function(){$("a[href^=http]").not('[href*="'+location.hostname+'"]').attr({target:"_blank"});var e=location.pathname+"/";$(".gws-schedule-tabs a").each(function(){var t=$(this);e.match(new RegExp("^"+t.attr("href")+"(/|$)"))&&t.addClass("current")}),Gws_Member.render()});