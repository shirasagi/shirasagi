this.Googlemaps_Map=function(){function m(){}return m.map=null,m.form=null,m.center=null,m.zoom=null,m.defaultCenter=[36.204824,138.252924],m.defaultZoom=13,m.markers=null,m.markerIcon="/assets/img/googlemaps/marker1.png",m.clickIcon="/assets/img/googlemaps/marker17.png",m.openedInfo=null,m.resized=null,m.kmlLayer=null,m.showGoogleMapsSearch=!1,m.mapsSearchUrl="https://www.google.co.jp/maps/search/",m.attachMessage=function(e){return google.maps.event.addListener(m.markers[e].marker,"click",function(){m.openedInfo&&m.openedInfo.close(),m.markers[e].window&&m.markers[e].window.open(m.markers[e].marker.getMap(),m.markers[e].marker),m.openedInfo=m.markers[e].window}),google.maps.event.addListener(m.markers[e].window,"closeclick",function(){m.openedInfo=null})},m.setForm=function(e){return this.form=e},m.load=function(e,o){o||(o={}),o.zoom&&m.validateZoom(o.zoom)&&(m.zoom=o.zoom),o.center&&m.validateLatLon(o.center[1],o.center[0])&&(m.center=o.center.reverse()),o.showGoogleMapsSearch&&(m.showGoogleMapsSearch=!0);var n=m.getCenter(),r={center:new google.maps.LatLng(n[0],n[1]),zoom:m.getZoom(),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}};m.map=new google.maps.Map($(e).get(0),r)},m.getCenter=function(){return m.center?m.center:m.defaultCenter},m.getZoom=function(){return m.zoom?m.zoom:m.defaultZoom},m.resize=function(){if(google.maps.event.trigger(this.map,"resize"),!this.resized){var e=m.getCenter();this.map.setCenter(new google.maps.LatLng(e[0],e[1])),this.form&&this.form.renderMarkers()}return this.resized=!0},m.renderMarkers=function(){if(this.form)return this.form.renderMarkers()},m.renderEvents=function(){if(this.form)return this.form.renderEvents()},m.setMarkers=function(e){var s;m.markers=e,s=new google.maps.LatLngBounds,$.each(m.markers,function(e,o){var n,r,t;t={position:new google.maps.LatLng(o.loc[1],o.loc[0]),map:m.map},o.image?t.icon=o.image:t.icon=m.markerIcon,m.markers[e].marker=new google.maps.Marker(t),s.extend(new google.maps.LatLng(o.loc[1],o.loc[0]));var a="";o.html?a=o.html:(o.name||o.text)&&(n=o.name,r=o.text,a='<div class="marker-info">',n&&""!==n&&(a+="<p>"+n+"</p>",r&&""!==r&&$.each(r.split(/[\r\n]+/),function(){return this.match(/^https?:\/\//)?a+='<p><a href="'+this+'">'+this+"</a></p>":a+="<p>"+this+"</p>"})),a+="</div>"),m.showGoogleMapsSearch&&(a+=m.getMapsSearchHtml(o.loc[1],o.loc[0])),a&&(m.markers[e].window=new google.maps.InfoWindow({content:a}),m.attachMessage(e))}),m.adjustMarkerBounds(m.markers.length,s)},m.setKmlLayer=function(e){m.kmlLayer=new google.maps.KmlLayer({url:e,suppressInfoWindows:!0,preserveViewport:!1}),m.kmlLayer.setMap(m.map)},m.setGeoJson=function(e){m.map.data.setStyle({fillColor:"#b2c9e8",strokeColor:"#5A88C6",strokeWeight:1}),m.map.data.loadGeoJson(e,{},function(e){var o=new google.maps.LatLngBounds,n=[];e.forEach(function(e){e.getGeometry().forEachLatLng(function(e){o.extend(e),n.push(e)})}),m.adjustMarkerBounds(n.length,o)})},m.adjustMarkerBounds=function(e,o){if(0<e){var n=!1;if(m.center){var r=m.getCenter();m.map.setCenter(new google.maps.LatLng(r[0],r[1])),n=!0}m.zoom&&(m.map.setZoom(m.getZoom()),n=!0),n||(google.maps.event.addListenerOnce(m.map,"idle",function(){m.map.getZoom()>m.getZoom()&&m.map.setZoom(m.getZoom())}),m.map.fitBounds(o))}else{r=m.getCenter();m.map.setCenter(new google.maps.LatLng(r[0],r[1])),m.map.setZoom(m.getZoom())}},m.validateZoom=function(e){return 1<=e&&e<=21},m.validateLatLon=function(e,o){return-90<=e&&e<=90&&-180<=o&&o<=180},m.getMapsSearchHtml=function(e,o){return'<p><a href="'+(m.mapsSearchUrl+e+","+o)+'">Google\u30de\u30c3\u30d7\u3067\u898b\u308b</a></p>'},m}();