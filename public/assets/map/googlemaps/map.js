(function(){this.Map=function(){function t(){}return t.map=null,t.form=null,t.center=[36.204824,138.252924],t.markers=null,t.openedInfo=null,t.resized=null,t.attachMessage=function(e){return google.maps.event.addListener(t.markers[e].marker,"click",function(o){return t.openedInfo&&t.openedInfo.close(),t.markers[e].window&&t.markers[e].window.open(t.markers[e].marker.getMap(),t.markers[e].marker),t.openedInfo=t.markers[e].window}),google.maps.event.addListener(t.markers[e].window,"closeclick",function(e){return t.openedInfo=null})},t.setForm=function(t){return this.form=t},t.load=function(t){var e;e={center:new google.maps.LatLng(this.center[0],this.center[1]),zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}},this.map=new google.maps.Map($(t).get(0),e)},t.resize=function(){return google.maps.event.trigger(this.map,"resize"),this.resized||(this.map.setCenter(new google.maps.LatLng(this.center[0],this.center[1])),this.form&&this.form.renderMarkers()),this.resized=!0},t.renderMarkers=function(){return this.form?this.form.renderMarkers():void 0},t.renderEvents=function(){return this.form?this.form.renderEvents():void 0},t.setMarkers=function(e){var o,i;t.markers=e,o=new google.maps.LatLngBounds,$.each(t.markers,function(e,i){var r,n,s;i.image?t.markers[e].marker=new google.maps.Marker({position:new google.maps.LatLng(i.loc[0],i.loc[1]),icon:i.image,map:t.map}):t.markers[e].marker=new google.maps.Marker({position:new google.maps.LatLng(i.loc[0],i.loc[1]),map:t.map}),o.extend(new google.maps.LatLng(i.loc[0],i.loc[1])),i.html?(r=i.html,t.markers[e].window=new google.maps.InfoWindow({content:r}),t.attachMessage(e)):(i.name||i.text)&&(n=i.name,s=i.text,r='<div class="marker-info">',n&&""!==n&&(r+="<p>"+n+"</p>"),s&&""!==s&&$.each(s.split(/[\r\n]+/),function(){return r+=this.match(/^https?:\/\//)?'<p><a href="'+this+'">'+this+"</a></p>":"<p>"+this+"</p>"}),r+="</div>",t.markers[e].window=new google.maps.InfoWindow({content:r}),t.attachMessage(e))}),$.isEmptyObject(t.markers)||(i=google.maps.event.addListener(t.map,"bounds_changed",function(t){return this.getZoom()>13&&this.initialZoom===!0&&(this.setZoom(13),this.initialZoom=!1),google.maps.event.removeListener(i)}),t.map.initialZoom=!0,t.map.fitBounds(o))},t}()}).call(this);