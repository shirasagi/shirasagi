(function(){var t,e=[].slice;t=function(){function t(t,e){null==e&&(e={}),this.el=$(t),this.options=$.extend({},this.defaults,e),this.el.on("click",function(t){return function(e){return t.search()}}(this))}return t.prototype.defaults={postal_code:"input[name='item[postal_code]']",addr:"input[name='item[addr]']",error:".postal-code-search-error",error_message:"\u90f5\u4fbf\u756a\u53f7\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093"},t.prototype.search=function(){var t;return this.clear_error(),t=$(this.options.postal_code).val(),this.el.css("cursor","wait"),$.ajax({type:"POST",url:this.options.path,data:{code:t},success:function(t){return function(e){return t.set_address(e)}}(this),error:function(t){return function(){return t.set_error()}}(this),complete:function(t){return function(){return t.el.css("cursor","")}}(this)})},t.prototype.set_address=function(t){var e;if(t.prefecture)return e=t.prefecture,t.city&&(e+=t.city),t.town&&(e+=t.town),$(this.options.addr).val(e)},t.prototype.set_error=function(){return $(this.options.error).html(this.options.error_message)},t.prototype.clear_error=function(){return $(this.options.error).html("")},t}(),$.fn.extend({postalCodeSearch:function(){var o,i;return i=arguments[0],o=2<=arguments.length?e.call(arguments,1):[],this.each(function(){var e,r;return e=$(this),r=e.data("postalCodeSearch"),r||e.data("postalCodeSearch",r=new t(this,i)),"string"==typeof i?r[i].apply(r,o):void 0})}})}).call(this),function(){}.call(this);