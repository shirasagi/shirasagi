var PostalCodeSearch,slice=[].slice;PostalCodeSearch=function(){function t(t,r){var e;null==r&&(r={}),this.el=$(t),this.options=$.extend({},this.defaults,r),this.el.on("click",(e=this,function(){return e.search()}))}return t.prototype.defaults={postal_code:"input[name='item[postal_code]']",addr:"input[name='item[addr]']",error:".postal-code-search-error",error_message:"\u90f5\u4fbf\u756a\u53f7\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093"},t.prototype.search=function(){var t,r,e,o;return this.clear_error(),t=$(this.options.postal_code).val(),this.el.css("cursor","wait"),$.ajax({type:"POST",url:this.options.path,data:{code:t},success:(o=this,function(t){return o.set_address(t)}),error:(e=this,function(){return e.set_error()}),complete:(r=this,function(){return r.el.css("cursor","")})})},t.prototype.set_address=function(t){var r;if(t.prefecture)return r=t.prefecture,t.city&&(r+=t.city),t.town&&(r+=t.town),$(this.options.addr).val(r)},t.prototype.set_error=function(){return $(this.options.error).html(this.options.error_message)},t.prototype.clear_error=function(){return $(this.options.error).html("")},t}(),$.fn.extend({postalCodeSearch:function(t){var e,o;return o=t,e=2<=arguments.length?slice.call(arguments,1):[],this.each(function(){var t,r;if((r=(t=$(this)).data("postalCodeSearch"))||t.data("postalCodeSearch",r=new PostalCodeSearch(this,o)),"string"==typeof o)return r[o].apply(r,e)})}});